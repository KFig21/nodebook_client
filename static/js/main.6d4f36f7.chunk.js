(this.webpackJsonpnodebook_client=this.webpackJsonpnodebook_client||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){},102:function(e,t,n){},103:function(e,t,n){},104:function(e,t,n){},105:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),c=n(28),r=n.n(c),i=n(3),o=n(12),l=n(18),u=function(e,t){switch(t.type){case"LOGIN_START":return{user:null,isFetching:!0,error:!1};case"LOGIN_SUCCESS":return{user:t.payload,isFetching:!1,error:!1};case"LOGIN_FAILURE":return{user:null,isFetching:!1,error:!0};case"LOGOUT":return localStorage.clear(),{user:null,isFetching:!1,error:!1};case"FOLLOW":return Object(l.a)(Object(l.a)({},e),{},{user:Object(l.a)(Object(l.a)({},e.user),{},{followings:[].concat(Object(o.a)(e.user.followings),[t.payload])})});case"UNFOLLOW":return Object(l.a)(Object(l.a)({},e),{},{user:Object(l.a)(Object(l.a)({},e.user),{},{followings:e.user.followings.filter((function(e){return e!==t.payload}))})});default:return e}},d=n(0),p={user:JSON.parse(localStorage.getItem("user"))||null,isFetching:!1,error:!1},j=Object(a.createContext)(p),b=function(e){var t=e.children,n=Object(a.useReducer)(u,p),s=Object(i.a)(n,2),c=s[0],r=s[1];return Object(a.useEffect)((function(){localStorage.setItem("user",JSON.stringify(c.user))}),[c.user]),Object(d.jsx)(j.Provider,{value:{user:c.user,isFetching:c.isFetching,error:c.error,dispatch:r},children:t})},f=(n(58),n(2)),m=n.n(f),O=n(29),h=n(4),x=n(8),v=n(7),N=(n(60),n(61),n(5)),g=n.n(N),w=(n(80),n(81),n(46)),k=n.n(w);function y(e){var t=e.type;return Object(d.jsx)("div",{className:"loader-"+t,children:Object(d.jsx)(k.a,{type:"bars",color:"#4bb44b"})})}n(82);var S=n(120),_=n(121);function C(){var e=Object(a.useContext)(j).user,t="http://localhost:3001/",n=Object(a.useRef)(),s=Object(a.useState)(null),c=Object(i.a)(s,2),r=c[0],o=c[1],l=Object(a.useState)(""),u=Object(i.a)(l,2),p=u[0],b=u[1],f=""===p,O=function(){var t=Object(h.a)(m.a.mark((function t(a){var s,c,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),s={userId:e._id,body:n.current.value},!r){t.next=16;break}return c=new FormData,i=Date.now()+r.name,c.append("name",i),c.append("file",r),s.img=i,console.log(s),t.prev=9,t.next=12,g.a.post("https://radiant-oasis-77477.herokuapp.com/api/upload",c);case 12:t.next=16;break;case 14:t.prev=14,t.t0=t.catch(9);case 16:return t.prev=16,t.next=19,g.a.post("https://radiant-oasis-77477.herokuapp.com/api/posts",s);case 19:window.location.reload(),t.next=24;break;case 22:t.prev=22,t.t1=t.catch(16);case 24:case"end":return t.stop()}}),t,null,[[9,14],[16,22]])})));return function(e){return t.apply(this,arguments)}}();return Object(d.jsx)("div",{className:"share",children:Object(d.jsxs)("div",{className:"share-wrapper",children:[Object(d.jsxs)("div",{className:"share-top",children:[Object(d.jsx)("img",{className:"share-avatar",src:e.profilePicture?t+e.profilePicture:t+"assets/noAvatar.png",alt:""}),Object(d.jsx)("input",{placeholder:"What's on your mind "+e.username+"?",className:"share-input",onChange:function(e){return b(e.target.value)},ref:n})]}),Object(d.jsx)("hr",{className:"share-hr"}),r&&Object(d.jsxs)("div",{className:"share-img-container",children:[Object(d.jsx)("img",{className:"share-img",src:URL.createObjectURL(r),alt:""}),Object(d.jsx)(S.a,{className:"share-cancel-img",onClick:function(){return o(null)}})]}),Object(d.jsxs)("form",{className:"share-bottom",onSubmit:O,children:[Object(d.jsx)("div",{className:"share-options",children:Object(d.jsxs)("label",{htmlFor:"file",className:"share-option",children:[Object(d.jsx)(_.a,{className:"share-icon"}),Object(d.jsx)("span",{className:"share-option-text",children:"Photo or Video"}),Object(d.jsx)("input",{style:{display:"none"},type:"file",id:"file",accept:".png,.jpeg,.jpg",onChange:function(e){return o(e.target.files[0])}})]})}),Object(d.jsx)("button",{type:"submit",className:"share-button",disabled:f,children:"Share"})]})]})})}var F=n(16),P=n(122),I=n(123),L=n(124);n(87),n(88);function E(e){var t=e.comment,n=e.fetchNotifications,s=Object(a.useState)(t.likes.length),c=Object(i.a)(s,2),r=c[0],o=c[1],l=Object(a.useState)(!1),u=Object(i.a)(l,2),p=u[0],b=u[1],f=Object(a.useContext)(j).user,O=Object(a.useState)({}),v=Object(i.a)(O,2),N=v[0],w=v[1],k=Object(a.useState)(!1),y=Object(i.a)(k,2),S=y[0],_=y[1],C=Object(a.useState)(!1),E=Object(i.a)(C,2),A=E[0],U=E[1],R=Object(a.useState)(!1),D=Object(i.a)(R,2),T=D[0],W=D[1],V=Object(a.useRef)(),Y=Object(a.useState)(""),B=Object(i.a)(Y,2),G=B[0],H=B[1],M=""===G||G===t.body;Object(a.useEffect)((function(){b(t.likes.includes(f._id))}),[f._id,t.likes]),Object(a.useEffect)((function(){var e=function(){var e=Object(h.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("https://radiant-oasis-77477.herokuapp.com/api/users?userId=".concat(t.userId));case 2:n=e.sent,w(n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t.userId]);var J=function(e){try{g.a.put("https://radiant-oasis-77477.herokuapp.com/api/comments/"+t._id+"/like",{userId:f._id})}catch(a){}if(o(p?r-1:r+1),b(!p),p){if(p)try{g.a.delete("https://radiant-oasis-77477.herokuapp.com/api/notifications/",{data:{sender:f._id,recipient:N._id,commentId:t._id,postId:t.postId,type:"commentLike"}})}catch(a){}}else try{g.a.post("https://radiant-oasis-77477.herokuapp.com/api/notifications/",{sender:f._id,recipient:N._id,commentId:t._id,postId:t.postId,type:"commentLike",seen:!1})}catch(a){}n()},z=function(){var e=Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.delete("https://radiant-oasis-77477.herokuapp.com/api/comments/".concat(t._id,"/"),{data:{userId:f._id}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),alert(e.t0);case 8:_(!S),U(!A),n(),window.location.reload();case 12:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(h.a)(m.a.mark((function e(n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a={userId:f._id,body:V.current.value,edited:!0,editedtimestamp:Date.now()},e.prev=2,e.next=5,g.a.put("https://radiant-oasis-77477.herokuapp.com/api/comments/".concat(t._id,"/"),a);case 5:window.location.reload(),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(2);case 10:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"comment-container",children:[Object(d.jsx)(x.b,{to:"/profile/".concat(N.username),children:Object(d.jsx)("img",{className:"comment-avatar",src:"http://localhost:3001/assets/noAvatar.png",alt:""})}),Object(d.jsxs)("div",{className:"comment-right",children:[Object(d.jsxs)("div",{className:"comment-body-container",children:[Object(d.jsxs)("div",{className:"commenter-info-container",children:[Object(d.jsxs)("div",{className:"comment-info-left",children:[Object(d.jsx)(x.b,{to:"/profile/".concat(N.username),children:Object(d.jsx)("span",{className:"comment-username",children:N.username})}),Object(d.jsx)("span",{className:"comment-date",children:Object(F.a)(t.createdAt)})]}),(N.username===f.username||f.isAdmin)&&Object(d.jsxs)("div",{className:"comment-info-right",children:[Object(d.jsx)(P.a,{className:"comment-options-icon",onClick:function(){return _(!S),void(A&&U(!A))}}),S&&Object(d.jsxs)("div",{className:"comment-options-div",children:[Object(d.jsx)("button",{className:"comment-options-delete",onClick:function(){return U(!A)},children:"delete"}),Object(d.jsx)("button",{className:"comment-options-edit",onClick:function(){return W(!T)},children:"edit"})]})]})]}),Object(d.jsx)("div",{className:"comment-body",children:t.body}),t.edited&&Object(d.jsxs)("span",{className:"comment-edit",children:["edit: ",Object(F.a)(t.editedtimestamp)]}),T&&Object(d.jsx)("div",{children:Object(d.jsxs)("form",{onSubmit:q,children:[Object(d.jsx)("textarea",{className:"edit-input",type:"text",maxlength:"500",ref:V,onChange:function(e){return H(e.target.value)},defaultValue:t.body?t.body:null}),Object(d.jsxs)("div",{className:"edit-option-buttons-div",children:[Object(d.jsx)("button",{disabled:M,type:"submit",className:"edit-options-button "+(M?"invalid":"edit-options-submit "),children:"edit"}),Object(d.jsx)("button",{className:"edit-options-cancel edit-options-button",onClick:function(){return W(!1),_(!1),void U(!1)},children:"cancel"})]})]})}),A&&Object(d.jsxs)("div",{className:"delete-comment-container",children:[Object(d.jsx)("span",{children:"Are you sure you want to delete this comment?"}),Object(d.jsxs)("div",{className:"delete-comment-button-container",children:[Object(d.jsx)("button",{className:"delete-button",onClick:function(){return z()},children:"DELETE"}),Object(d.jsx)("button",{className:"cancel-button",onClick:function(){return U(!A)},children:"Cancel"})]})]})]}),Object(d.jsxs)("div",{className:"comment-like-container",children:[p?Object(d.jsx)(I.a,{className:"like-icon",onClick:J}):Object(d.jsx)(L.a,{className:"like-icon",onClick:J}),1===r?p?Object(d.jsx)("span",{className:"post-like-counter",children:"You like this"}):Object(d.jsx)("span",{className:"post-like-counter",children:"1 person likes this"}):r>1?p?2===r?Object(d.jsxs)("span",{className:"post-like-counter",children:["You and ",r-1," other person like this"]}):Object(d.jsxs)("span",{className:"post-like-counter",children:["You and ",r-1," other people like this"]}):Object(d.jsxs)("span",{className:"post-like-counter",children:[r," people like this"]}):Object(d.jsx)("span",{className:"post-like-counter",children:"Be the first to like this"})]})]})]})}function A(e){var t=e.post,n=e.page,s=e.fetchNotifications,c=e.sidebarOpen,r=Object(a.useState)(t.likes.length),o=Object(i.a)(r,2),l=o[0],u=o[1],p=Object(a.useState)(!1),b=Object(i.a)(p,2),f=b[0],O=b[1],N=Object(a.useState)([]),w=Object(i.a)(N,2),k=w[0],y=w[1],S=Object(a.useState)({}),_=Object(i.a)(S,2),C=_[0],A=_[1],U=Object(a.useContext)(j).user,R=Object(a.useRef)(),D=Object(a.useRef)(),T=Object(v.f)(),W=Object(a.useState)(!1),V=Object(i.a)(W,2),Y=V[0],B=V[1],G=Object(a.useState)(!1),H=Object(i.a)(G,2),M=H[0],J=H[1],z=Object(a.useState)(!1),q=Object(i.a)(z,2),K=q[0],Q=q[1],X=Object(a.useState)(""),Z=Object(i.a)(X,2),$=Z[0],ee=Z[1],te=""===$||$===t.body,ne=Object(a.useState)(""),ae=Object(i.a)(ne,2),se=ae[0],ce=ae[1],re=""===se,ie="http://localhost:3001/";Object(a.useEffect)((function(){O(t.likes.includes(U._id))}),[U._id,t.likes]),Object(a.useEffect)((function(){var e=function(){var e=Object(h.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("https://radiant-oasis-77477.herokuapp.com/api/users?userId=".concat(t.userId));case 2:n=e.sent,A(n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t.userId]),Object(a.useEffect)((function(){var e=function(){var e=Object(h.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("https://radiant-oasis-77477.herokuapp.com/api/posts/".concat(t._id,"/comments"));case 2:n=e.sent,y(n.data.sort((function(e,t){return new Date(e.createdAt)-new Date(t.createdAt)})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t.comments&&e()}),[C]);var oe=function(){try{g.a.put("https://radiant-oasis-77477.herokuapp.com/api/posts/".concat(t._id,"/like"),{userId:U._id})}catch(e){}if(u(f?l-1:l+1),O(!f),f){if(f)try{g.a.delete("https://radiant-oasis-77477.herokuapp.com/api/notifications/",{data:{sender:U._id,recipient:C._id,postId:t._id,commentId:null,type:"postLike"}})}catch(e){}}else try{g.a.post("https://radiant-oasis-77477.herokuapp.com/api/notifications/",{sender:U._id,recipient:C._id,postId:t._id,commentId:null,type:"postLike",seen:!1})}catch(e){}s()},le=function(){var e=Object(h.a)(m.a.mark((function e(n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a={userId:U._id,body:R.current.value,postId:t._id,sender:U._id,recipient:C._id,type:"comment",seen:!1},e.prev=2,e.next=5,g.a.post("https://radiant-oasis-77477.herokuapp.com/api/posts/".concat(t._id,"/comment"),a);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:window.location.reload(),s();case 11:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=Object(h.a)(m.a.mark((function e(n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a={userId:U._id,body:D.current.value,edited:!0,editedtimestamp:Date.now()},e.prev=2,e.next=5,g.a.put("https://radiant-oasis-77477.herokuapp.com/api/posts/".concat(t._id),a);case 5:window.location.reload(),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(2);case 10:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.delete("https://radiant-oasis-77477.herokuapp.com/api/posts/".concat(t._id,"/"),{data:{userId:U._id}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),alert(e.t0);case 8:B(!Y),J(!M),s(),T("/",{replace:!0}),window.location.reload();case 13:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),pe=function(){Q(!1),B(!1),J(!1)};return Object(d.jsxs)("div",{className:"post",children:[M&&Object(d.jsxs)("div",{className:"delete-post-container",children:[Object(d.jsx)("span",{className:"delete-post-message",children:"Are you sure you want to delete this post?"}),Object(d.jsxs)("div",{className:"delete-post-button-container",children:[Object(d.jsx)("button",{className:"delete-button",onClick:function(){return de()},children:"DELETE"}),Object(d.jsx)("button",{className:"cancel-button",onClick:function(){return pe()},children:"Cancel"})]})]}),Object(d.jsxs)("div",{className:"post-wrapper",style:c?{pointerEvents:"none"}:{},children:[Object(d.jsxs)("div",{className:"post-top",children:[Object(d.jsxs)("div",{className:"post-top-left",children:[Object(d.jsxs)(x.b,{to:"/profile/".concat(C.username),children:[Object(d.jsx)("img",{className:"post-avatar",src:C.profilePicture?ie+C.profilePicture:ie+"assets/noAvatar.png",alt:""}),Object(d.jsx)("span",{className:"post-username",children:C.username})]}),Object(d.jsx)("span",{className:"post-date",children:Object(F.a)(t.createdAt)})]}),(C.username===U.username||U.isAdmin)&&Object(d.jsxs)("div",{className:"post-top-right",children:[Object(d.jsx)(P.a,{className:"post-options-icon",onClick:function(){return B(!Y),K&&Q(!K),void(M&&Q(!M))}}),Y&&!M&&!K&&Object(d.jsxs)("div",{className:"post-options-div",children:[Object(d.jsx)("button",{className:"post-options-delete",onClick:function(){return J(!M)},children:"delete post"}),Object(d.jsx)("button",{className:"post-options-edit",onClick:function(){return Q(!K)},children:"edit post"})]})]})]}),Object(d.jsxs)("div",{className:"post-center",children:[Object(d.jsx)("span",{className:"post-body",children:null===t||void 0===t?void 0:t.body}),K&&Object(d.jsx)("div",{children:Object(d.jsxs)("form",{onSubmit:ue,children:[Object(d.jsx)("textarea",{className:"edit-input",type:"text",maxlength:"500",ref:D,onChange:function(e){return ee(e.target.value)},defaultValue:(null===t||void 0===t?void 0:t.body)?null===t||void 0===t?void 0:t.body:null}),Object(d.jsx)("button",{disabled:te,type:"submit",className:te?"invalid":"edit-options-submit ",children:"edit"}),Object(d.jsx)("button",{className:"edit-options-cancel",onClick:function(){return pe()},children:"cancel"})]})}),t.edited&&Object(d.jsxs)("span",{className:"post-edit",children:["edit: ",Object(F.a)(t.editedtimestamp)]}),Object(d.jsx)("img",{className:"post-img",src:ie+t.img,alt:""})]}),Object(d.jsx)("div",{className:"post-bottom",children:Object(d.jsxs)("div",{className:"post-bottom-left",children:[f?Object(d.jsx)(I.a,{className:"like-icon",onClick:oe}):Object(d.jsx)(L.a,{className:"like-icon",onClick:oe}),1===l?f?Object(d.jsx)("span",{className:"post-like-counter",children:"You like this"}):Object(d.jsx)("span",{className:"post-like-counter",children:"1 person likes this"}):l>1?f?2===l?Object(d.jsxs)("span",{className:"post-like-counter",children:["You and ",l-1," other person like this"]}):Object(d.jsxs)("span",{className:"post-like-counter",children:["You and ",l-1," other people like this"]}):Object(d.jsxs)("span",{className:"post-like-counter",children:[l," people like this"]}):Object(d.jsx)("span",{className:"post-like-counter",children:"Be the first to like this"})]})}),Object(d.jsxs)("div",{className:"post-comments-container",children:[Object(d.jsxs)("div",{className:"post-comment-input-container",children:[Object(d.jsx)("textarea",{className:"comment-input",type:"text",ref:R,onChange:function(e){return ce(e.target.value)},placeholder:"add a comment!"}),Object(d.jsx)("form",{onSubmit:le,children:Object(d.jsx)("button",{type:"submit",disabled:re,children:"comment"})})]}),k&&k.length>0&&"postPage"===n&&Object(d.jsx)("div",{className:"post-comments",children:k.map((function(e){return Object(d.jsx)(E,{comment:e,fetchNotifications:s})}))}),k&&k.length>0&&k.length<3&&"timeline"===n&&Object(d.jsx)("div",{className:"post-comments",children:k.map((function(e){return Object(d.jsx)(E,{comment:e,fetchNotifications:s})}))}),k&&k.length>2&&"timeline"===n&&Object(d.jsxs)("div",{className:"post-comments",children:[Object(d.jsx)(E,{comment:k[0],fetchNotifications:s}),Object(d.jsx)(x.b,{to:"/post/"+t._id,children:Object(d.jsxs)("button",{className:"view-more-comments-button",children:["View more comments ","("+t.comments.length+")"]})})]})]})]})]})}function U(e){var t=e.fetchNotifications,n=e.setSidebarOpen,s=Object(a.useState)(!0),c=Object(i.a)(s,2),r=c[0],l=c[1],u=Object(a.useState)([]),p=Object(i.a)(u,2),b=p[0],f=p[1],O=Object(a.useState)(0),x=Object(i.a)(O,2),v=x[0],N=x[1],w=Object(a.useContext)(j).user,k=w.username;Object(a.useEffect)((function(){var e=function(){var e=Object(h.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("https://radiant-oasis-77477.herokuapp.com/api/posts/timeline/".concat(w._id,"/").concat(v));case 2:t=e.sent,f([].concat(Object(o.a)(b),Object(o.a)(t.data))),l(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();k&&e()}),[k,w._id,v]);var S=function(e){var t=e.target;t.offsetHeight+t.scrollTop>.95*t.scrollHeight&&N(b.length)};return Object(d.jsx)("div",{className:"timeline",onScroll:S,onClick:function(){return n(!1)},children:Object(d.jsx)(d.Fragment,{children:r?Object(d.jsx)(y,{type:"full-screen"}):Object(d.jsx)("div",{onScroll:S,children:Object(d.jsxs)("div",{className:"timeline-wrapper",children:[(!k||k===w.username)&&Object(d.jsx)(C,{}),b.map((function(e){return Object(d.jsx)(A,{post:e,page:"timeline",fetchNotifications:t},e._id)}))]})})})})}n(89);var R=n(125),D=n(126),T=n(20),W=n.n(T);function V(e){var t=e.profileUser,n=e.currentPage,s=e.post,c=e.notificationsCount,r=e.sidebarOpen,o=e.setSidebarOpen,l=Object(v.g)().username,u=Object(v.g)().postId,p=Object(a.useState)(!1),b=Object(i.a)(p,2),f=b[0],O=b[1],x=Object(a.useContext)(j),N=x.user,w=x.dispatch,k=Object(a.useState)({}),y=Object(i.a)(k,2),S=y[0],_=y[1];Object(a.useEffect)((function(){var e=function(){var e=Object(h.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.followings.includes(null===t||void 0===t?void 0:t._id);case 2:n=e.sent,O(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()})),Object(a.useEffect)((function(){if(u){var e=function(){var e=Object(h.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("https://radiant-oasis-77477.herokuapp.com/api/posts/".concat(u));case 2:return t=e.sent,e.next=5,g.a.get("https://radiant-oasis-77477.herokuapp.com/api/users?userId=".concat(t.data.userId));case 5:n=e.sent,_(n.data);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}}),[u]);var C=function(){var e=Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("followed",f),e.prev=1,!f){e.next=9;break}return e.next=5,g.a.put("https://radiant-oasis-77477.herokuapp.com/api/users/".concat(t._id,"/unfollow"),{userId:N._id});case 5:w({type:"UNFOLLOW",payload:t._id});try{g.a.delete("https://radiant-oasis-77477.herokuapp.com/api/notifications/",{data:{sender:N._id,recipient:t._id,postId:null,commentId:null,type:"follow"}})}catch(n){}e.next=13;break;case 9:return e.next=11,g.a.put("https://radiant-oasis-77477.herokuapp.com/api/users/".concat(t._id,"/follow"),{userId:N._id});case 11:w({type:"FOLLOW",payload:t._id});try{g.a.post("https://radiant-oasis-77477.herokuapp.com/api/notifications/",{sender:N._id,recipient:t._id,postId:null,commentId:null,type:"follow",seen:!1})}catch(n){}case 13:O(!f),e.next=18;break;case 16:e.prev=16,e.t0=e.catch(1);case 18:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(){return e.apply(this,arguments)}}(),F=function(){return Object(d.jsx)("div",{className:"navbar",children:Object(d.jsxs)("div",{className:"navbar-container",children:[Object(d.jsx)("div",{className:"mobile-menu-button-container",children:Object(d.jsx)("div",{className:"hamburger",onClick:function(){return o(!r)},children:Object(d.jsx)(W.a,{className:"hamburger-icon"})})}),Object(d.jsx)("span",{className:"nav-title",children:n})]})})},P=function(){return Object(d.jsx)("div",{className:"navbar",children:Object(d.jsxs)("div",{className:"navbar-container",children:[Object(d.jsx)("div",{className:"mobile-menu-button-container",children:Object(d.jsx)("div",{className:"hamburger",onClick:function(){return o(!r)},children:Object(d.jsx)(W.a,{className:"hamburger-icon"})})}),Object(d.jsxs)("span",{className:"nav-title",children:["Followers"===n&&Object(d.jsxs)(d.Fragment,{children:[N.username," - ",n," "," (",N.followers.length,") "]}),"Following"===n&&Object(d.jsxs)(d.Fragment,{children:[N.username," - ",n," "," (",N.followings.length,") "]})]})]})})},I=function(){return Object(d.jsx)("div",{className:"navbar",children:Object(d.jsxs)("div",{className:"navbar-container",children:[Object(d.jsx)("div",{className:"mobile-menu-button-container",children:Object(d.jsx)("div",{className:"hamburger",onClick:function(){return o(!r)},children:Object(d.jsx)(W.a,{className:"hamburger-icon"})})}),t?Object(d.jsxs)("div",{className:"nav-info-container",children:[Object(d.jsx)("span",{className:"nav-title",children:t.username}),l!==N.username&&Object(d.jsxs)("button",{className:"follow-button",onClick:C,children:[f?"Unfollow":"Follow",f?Object(d.jsx)(R.a,{}):Object(d.jsx)(D.a,{})]})]}):Object(d.jsx)("span",{className:"nav-title",children:"Loading..."})]})})},L=function(){return Object(d.jsx)("div",{className:"navbar",children:Object(d.jsxs)("div",{className:"navbar-container",children:[Object(d.jsx)("div",{className:"mobile-menu-button-container",children:Object(d.jsx)("div",{className:"hamburger",onClick:function(){return o(!r)},children:Object(d.jsx)(W.a,{className:"hamburger-icon"})})}),N?Object(d.jsx)("div",{className:"nav-info-container",children:Object(d.jsxs)("span",{className:"nav-title",children:[N.username," - update profile"]})}):Object(d.jsx)("span",{className:"nav-title",children:"Loading..."})]})})},E=function(){return Object(d.jsx)("div",{className:"navbar",children:Object(d.jsxs)("div",{className:"navbar-container",children:[Object(d.jsx)("div",{className:"mobile-menu-button-container",children:Object(d.jsx)("div",{className:"hamburger",onClick:function(){return o(!r)},children:Object(d.jsx)(W.a,{className:"hamburger-icon"})})}),N?Object(d.jsx)("div",{className:"nav-info-container",children:Object(d.jsxs)("span",{className:"nav-title",children:[N.username," - Notifications ","("+c+")"]})}):Object(d.jsx)("span",{className:"nav-title",children:"Loading..."})]})})},A=function(){return Object(d.jsx)("div",{className:"navbar",children:Object(d.jsxs)("div",{className:"navbar-container",children:[Object(d.jsx)("div",{className:"mobile-menu-button-container",children:Object(d.jsx)("div",{className:"hamburger",onClick:function(){return o(!r)},children:Object(d.jsx)(W.a,{className:"hamburger-icon"})})}),N&&s?Object(d.jsx)("div",{className:"nav-info-container",children:Object(d.jsxs)("span",{className:"nav-title",children:[S.username," - ","("+s.comments.length+" replies)"]})}):Object(d.jsx)("span",{className:"nav-title",children:"Loading..."})]})})};return Object(d.jsxs)(d.Fragment,{children:["Timeline"===n&&Object(d.jsx)(F,{}),"Profile"===n&&Object(d.jsx)(I,{}),"NotUsersProfile"===n&&Object(d.jsx)(I,{}),"Update"===n&&Object(d.jsx)(L,{}),"Followers"===n&&Object(d.jsx)(P,{}),"Following"===n&&Object(d.jsx)(P,{}),"Notifications"===n&&Object(d.jsx)(E,{}),"Post"===n&&Object(d.jsx)(A,{}),"Explore"===n&&Object(d.jsx)(F,{})]})}function Y(e){var t=e.currentPage,n=e.setCurrentPage,a=e.fetchNotifications,s=e.sidebarOpen,c=e.setSidebarOpen;return n("Timeline"),Object(d.jsxs)("div",{className:"container",id:"container",children:[Object(d.jsx)(V,{currentPage:t,sidebarOpen:s,setSidebarOpen:c}),Object(d.jsx)(U,{fetchNotifications:a,setSidebarOpen:c})]})}n(94);var B=n(127),G=n(128),H=n(129),M=n(130);n(95);function J(e){var t=e.friend,n=e.handleFollowingStatus,s=e.handleChangeFeed,c=e.sidebarOpen,r="http://localhost:3001/",o=Object(a.useContext)(j).user,l=Object(a.useState)(""),u=Object(i.a)(l,2),p=u[0],b=u[1],f=Object(a.useState)(!0),O=Object(i.a)(f,2),v=O[0],N=O[1];return Object(a.useEffect)((function(){var e=function(){var e=Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout(Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t._id,e.next=3,o._id;case 3:if(e.t1=e.sent,e.t0!==e.t1){e.next=8;break}b("you"),e.next=9;break;case 8:!0===t.followingStatus&&!0===t.followerStatus?b("mutual following"):!1===t.followingStatus&&!0===t.followerStatus?b("follows you"):!0===t.followingStatus&&!1===t.followerStatus&&b("doesn't follow you");case 9:N(!1);case 10:case"end":return e.stop()}}),e)}))),1e3);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()})),Object(d.jsx)("div",{className:"you"!==p?"follow-container":"follow-container current-user-container",children:v?Object(d.jsx)(y,{type:"follower"}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(x.b,{to:"/profile/"+t.username,style:{textDecoration:"none"},onClick:function(){return s("posts")},children:Object(d.jsxs)("div",{className:"follow-container-left",children:[Object(d.jsx)("img",{src:t.profilePicture?r+t.profilePicture:r+"assets/noAvatar.png",alt:"",className:"follow-img"}),Object(d.jsxs)("div",{className:"follow-user-info",children:[Object(d.jsx)("span",{className:"follow-username",children:t.username}),Object(d.jsxs)("span",{className:"follow-name",children:[t.firstname," ",t.lastname]})]})]})}),"you"!==p&&Object(d.jsxs)("div",{className:"follow-container-right",children:[Object(d.jsx)("span",{className:"follow-status-span",children:p}),Object(d.jsxs)("button",{disabled:c,className:"follow-button",onClick:function(){return n(t.followingStatus,t)},children:[t.followingStatus?"Unfollow ":"Follow ",t.followingStatus?Object(d.jsx)(R.a,{}):Object(d.jsx)(D.a,{})]})]})]})},t._id)}function z(e){var t=e.profileUser,n=e.feed,s=e.handleChangeFeed,c=e.fetchNotifications,r=e.loading,i=e.posts,o=e.friends,l=e.handleFollowingStatus,u=e.sidebarOpen,p=Object(a.useContext)(j).user;return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"profile-feed",children:[Object(d.jsx)("div",{className:"profile-header",children:Object(d.jsx)("div",{className:"profile-header-wrapper",children:Object(d.jsxs)("div",{className:"profile-info",children:[Object(d.jsx)("h4",{className:"profile-info-username",children:t.username}),Object(d.jsxs)("span",{className:"profile-info-name",children:[t.firstname," ",t.lastname]})]})})}),Object(d.jsx)("div",{className:"profile-header-buttons-container",children:Object(d.jsxs)("div",{className:"profile-header-buttons-wrapper",children:[Object(d.jsxs)("div",{style:u?{pointerEvents:"none"}:{},onClick:function(){return s("info")},className:"profile-info-clickable "+("info"===n?"pic-active":""),children:["info",Object(d.jsx)(B.a,{className:"profile-info-icon"})]}),Object(d.jsxs)("div",{style:u?{pointerEvents:"none"}:{},onClick:function(){return s("posts")},className:"profile-info-clickable "+("posts"===n?"pic-active":""),children:[Object(d.jsx)("span",{className:"count",children:t.posts?t.posts.length:"0"}),"posts",Object(d.jsx)(G.a,{className:"profile-info-icon"})]}),Object(d.jsxs)("div",{style:u?{pointerEvents:"none"}:{},onClick:function(){return s("followers")},className:"profile-info-clickable "+("followers"===n?"pic-active":""),children:[Object(d.jsx)("span",{className:"count",children:t.followers?t.followers.length:"0"}),"followers",Object(d.jsx)(H.a,{className:"profile-info-icon"})]}),Object(d.jsxs)("div",{style:u?{pointerEvents:"none"}:{},onClick:function(){return s("following")},className:"profile-info-clickable "+("following"===n?"pic-active":""),children:[Object(d.jsx)("span",{className:"count",children:t.followings?t.followings.length:"0"}),"following",Object(d.jsx)(H.a,{className:"profile-info-icon"})]})]})}),r?Object(d.jsx)(y,{type:"center-feed"}):Object(d.jsxs)("div",{className:"feed",children:["info"===n&&Object(d.jsx)("div",{className:"feed-wrapper",children:Object(d.jsxs)("div",{className:"profileInfo-container",children:[p._id===t._id&&Object(d.jsx)(x.b,{to:"/".concat(p._id,"/update"),children:Object(d.jsx)("div",{title:"update user info",children:Object(d.jsx)(M.a,{className:"edit-icon"})})}),Object(d.jsxs)("div",{className:"profile-info-div",children:[Object(d.jsx)("div",{className:"profile-info-strong",children:"Name:"})," ",Object(d.jsxs)("div",{className:"profile-info-content",children:[t.firstname," ",t.lastname]})]}),Object(d.jsxs)("div",{className:"profile-info-div",children:[" ",Object(d.jsx)("div",{className:"profile-info-strong",children:"Bio:"})," ",Object(d.jsx)("div",{className:"profile-info-content",children:t.about})]}),Object(d.jsxs)("div",{className:"profile-info-div",children:[Object(d.jsx)("div",{className:"profile-info-strong",children:"Birthday:"})," ",Object(d.jsx)("div",{className:"profile-info-content",children:t.birthday?function(e){var t=e.split("-");return t[1]+"/"+t[2]+"/"+t[0]}(t.birthday):"private"})]}),Object(d.jsxs)("div",{className:"profile-info-div",children:[Object(d.jsx)("div",{className:"profile-info-strong",children:"Location:"})," ",Object(d.jsx)("div",{className:"profile-info-content",children:t.location?t.location:"private"})]}),Object(d.jsxs)("div",{className:"profile-info-div",children:[Object(d.jsx)("div",{className:"profile-info-strong",children:"Website:"})," ",Object(d.jsx)("div",{className:"profile-info-content",children:t.website?Object(d.jsx)("a",{href:t.website,target:"_blank",rel:"noopener noreferrer",className:"profile-website-a",children:t.website}):"private"})]})]})}),"posts"===n&&Object(d.jsxs)("div",{className:"feed-wrapper",children:[(!t.username||t.username===p.username)&&Object(d.jsx)(C,{}),i.length>0?Object(d.jsx)(d.Fragment,{children:i.map((function(e){return Object(d.jsx)(A,{post:e,page:"timeline",fetchNotifications:c},e._id)}))}):Object(d.jsx)("span",{className:"no-content-message",children:"No posts yet \ud83d\ude1e"})]}),"followers"===n&&Object(d.jsx)("div",{className:"feed-wrapper",children:o.length>0?Object(d.jsx)(d.Fragment,{children:o.map((function(e){return Object(d.jsx)(J,{friend:e,handleChangeFeed:s,handleFollowingStatus:l})}))}):Object(d.jsx)("span",{className:"no-content-message",children:"Nothing to see here \ud83d\ude1e"})}),"following"===n&&Object(d.jsx)("div",{className:"feed-wrapper",children:o.length>0?Object(d.jsx)(d.Fragment,{children:o.map((function(e){return Object(d.jsx)(J,{friend:e,handleChangeFeed:s,handleFollowingStatus:l})}))}):Object(d.jsx)("span",{className:"no-content-message",children:"Nothing to see here \ud83d\ude1e"})})]})]})})}n(96),n(97);function q(e){var t=e.currentPage,n=e.setCurrentPage,s=e.fetchNotifications,c=e.sidebarOpen,r=e.setSidebarOpen,l="http://localhost:3001/",u=Object(a.useState)({}),p=Object(i.a)(u,2),b=p[0],f=p[1],O=Object(v.g)().username,x=Object(a.useState)(!1),N=Object(i.a)(x,2),w=N[0],k=N[1],y=Object(a.useState)("posts"),S=Object(i.a)(y,2),_=S[0],C=S[1],F=Object(a.useContext)(j),P=F.user,I=F.dispatch,L=Object(a.useState)(0),E=Object(i.a)(L,2),A=E[0],U=E[1],R=Object(a.useState)(!0),D=Object(i.a)(R,2),T=D[0],W=D[1],Y=Object(a.useState)([]),B=Object(i.a)(Y,2),G=B[0],H=B[1],M=Object(a.useState)([]),J=Object(i.a)(M,2),q=J[0],K=J[1];Object(a.useEffect)((function(){var e=function(){var e=Object(h.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.followings.includes(null===b||void 0===b?void 0:b._id);case 2:t=e.sent,k(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(e(),w)return null})),Object(a.useEffect)((function(){var e=function(){var e=Object(h.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("https://radiant-oasis-77477.herokuapp.com/api/users?username=".concat(O));case 2:t=e.sent,f(t.data),C("posts");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),O===P.username?n("Profile"):n("NotUsersProfile")}),[O,t]),Object(a.useEffect)((function(){var e=function(){var e=Object(h.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("https://radiant-oasis-77477.herokuapp.com/api/posts/profile/".concat(b.username,"/").concat(A));case 2:t=e.sent,H([].concat(Object(o.a)(G),Object(o.a)(t.data))),W(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();"posts"===_&&b.username&&e()}),[b.username,P._id,A,_]);var Q=function(){var e=Object(h.a)(m.a.mark((function e(t,n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=function(){var e=Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=8;break}return e.next=4,g.a.put("https://radiant-oasis-77477.herokuapp.com/api/users/".concat(n._id,"/unfollow"),{userId:P._id});case 4:I({type:"UNFOLLOW",payload:n._id});try{g.a.delete("https://radiant-oasis-77477.herokuapp.com/api/notifications/",{data:{sender:P._id,recipient:n._id,postId:null,commentId:null,type:"follow"}})}catch(a){}e.next=12;break;case 8:return e.next=10,g.a.put("https://radiant-oasis-77477.herokuapp.com/api/users/".concat(n._id,"/follow"),{userId:P._id});case 10:I({type:"FOLLOW",payload:n._id});try{g.a.post("https://radiant-oasis-77477.herokuapp.com/api/notifications/",{sender:P._id,recipient:n._id,postId:null,commentId:null,type:"follow",seen:!1})}catch(a){}case 12:e.next=16;break;case 14:e.prev=14,e.t0=e.catch(0);case 16:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),a();case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){var e=function(){var e=Object(h.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get("https://radiant-oasis-77477.herokuapp.com/api/users/".concat(b._id,"/").concat(_,"-profile/").concat(P._id,"/").concat(A));case 3:t=e.sent,K([].concat(Object(o.a)(q),Object(o.a)(t.data))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();"posts"!==_&&e()}),[A]),Object(a.useEffect)((function(){var e=function(){var e=Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout(Object(h.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get("https://radiant-oasis-77477.herokuapp.com/api/users/".concat(b._id,"/").concat(_,"-profile/").concat(P._id,"/0"));case 3:t=e.sent,K(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:W(!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])}))),300);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();"posts"!==_&&e()}),[_,b.username]);return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("div",{className:"container",id:"container",children:Object(d.jsxs)("div",{className:"profile-right",children:[Object(d.jsx)(V,{user:P,profileUser:b,currentPage:t,sidebarOpen:c,setSidebarOpen:r}),Object(d.jsxs)("div",{className:"profile-right-content",onClick:function(){return r(!1)},onScroll:function(e){var t=e.target;t.offsetHeight+t.scrollTop>.98*t.scrollHeight&&("posts"===_&&G.length>A+4?U(G.length):"posts"!==_&&q.length>A+9&&U(q.length))},children:[Object(d.jsx)("div",{className:"profile-right-top",children:Object(d.jsxs)("div",{className:"profile-cover",children:[Object(d.jsx)("img",{className:"profile-cover-img",src:b.coverPicture?l+b.coverPicture:l+"assets/cover.png",alt:""}),Object(d.jsx)("img",{className:"profile-avatar",src:b.profilePicture?l+b.profilePicture:l+"assets/noAvatar.png",alt:""})]})}),Object(d.jsx)("div",{className:"profile-right-bottom",children:Object(d.jsx)(z,{profileUser:b,feed:_,handleChangeFeed:function(e){H([]),K([]),W(!0),U(0),C(e)},fetchNotifications:s,loading:T,posts:G,friends:q,handleFollowingStatus:Q,sidebarOpen:c})})]})]})})})}n(43),n(98);function K(e){var t=e.currentPage,n=e.setCurrentPage,s=e.follow,c=e.sidebarOpen,r=e.setSidebarOpen;n(s);var l=Object(a.useState)(!0),u=Object(i.a)(l,2),p=u[0],b=u[1],f=Object(a.useState)([]),O=Object(i.a)(f,2),x=O[0],v=O[1],N=Object(a.useState)(0),w=Object(i.a)(N,2),k=w[0],S=w[1],_=Object(a.useContext)(j),C=_.user,F=_.dispatch,P=function(){var e=Object(h.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=8;break}return e.next=4,g.a.put("https://radiant-oasis-77477.herokuapp.com/api/users/".concat(n._id,"/unfollow"),{userId:C._id});case 4:F({type:"UNFOLLOW",payload:n._id});try{g.a.delete("https://radiant-oasis-77477.herokuapp.com/api/notifications/",{data:{sender:C._id,recipient:n._id,postId:null,commentId:null,type:"follow"}})}catch(a){}e.next=12;break;case 8:return e.next=10,g.a.put("https://radiant-oasis-77477.herokuapp.com/api/users/".concat(n._id,"/follow"),{userId:C._id});case 10:F({type:"FOLLOW",payload:n._id});try{g.a.post("https://radiant-oasis-77477.herokuapp.com/api/notifications/",{sender:C._id,recipient:n._id,postId:null,commentId:null,type:"follow",seen:!1})}catch(a){}case 12:e.next=16;break;case 14:e.prev=14,e.t0=e.catch(0);case 16:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){var e=function(){var e=Object(h.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get("https://radiant-oasis-77477.herokuapp.com/api/users/".concat(C._id,"/").concat(s,"/").concat(k));case 3:t=e.sent,v([].concat(Object(o.a)(x),Object(o.a)(t.data))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:b(!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[k]),Object(a.useEffect)((function(){var e=function(){var e=Object(h.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get("https://radiant-oasis-77477.herokuapp.com/api/users/".concat(C._id,"/").concat(s,"/0"));case 3:t=e.sent,v(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:b(!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[C,t]);return Object(d.jsx)("div",{className:"followfeed",onScroll:function(e){var t=e.target;t.offsetHeight+t.scrollTop>.95*t.scrollHeight&&S(x.length)},onClick:function(){return r(!1)},children:p?Object(d.jsx)(y,{type:"full-screen"}):Object(d.jsx)("div",{className:"followfeed-wrapper",children:x.length>0?Object(d.jsx)(d.Fragment,{children:x.map((function(e){return Object(d.jsx)(J,{friend:e,handleFollowingStatus:P,sidebarOpen:c},e._id)}))}):Object(d.jsx)(d.Fragment,{children:"Following"===s?Object(d.jsx)("span",{className:"no-explore-message",children:"Find users to follow in the Explore tab!"}):Object(d.jsx)("span",{className:"no-explore-message",children:"No followers yet!"})})})})}function Q(e){var t=e.currentPage,n=e.setCurrentPage,a=e.follow,s=e.sidebarOpen,c=e.setSidebarOpen;return Object(d.jsxs)("div",{className:"container",id:"container",children:[Object(d.jsx)(V,{currentPage:t,sidebarOpen:s,setSidebarOpen:c}),Object(d.jsx)(K,{follow:a,currentPage:t,setCurrentPage:n,setSidebarOpen:c,sidebarOpen:s})]})}function X(e){var t=e.post,n=e.fetchNotifications,s=e.sidebarOpen,c=e.setSidebarOpen;console.log(t);var r=Object(a.useState)(!0),o=Object(i.a)(r,2),l=o[0],u=o[1];return Object(a.useEffect)((function(){t&&u(!1)}),[t]),Object(d.jsx)("div",{className:"timeline",onClick:function(){c(!1)},children:Object(d.jsx)(d.Fragment,{children:l?Object(d.jsx)(y,{type:"full-screen"}):Object(d.jsx)("div",{children:Object(d.jsx)("div",{className:"timeline-wrapper",children:Object(d.jsx)(A,{post:t,page:"postPage",fetchNotifications:n,sidebarOpen:s},t._id)})})})})}n(99);function Z(e){var t=e.user,n=e.currentPage,s=e.setCurrentPage,c=e.fetchNotifications,r=e.sidebarOpen,o=e.setSidebarOpen;s("Post");var l=Object(v.g)().postId,u=Object(a.useState)(""),p=Object(i.a)(u,2),j=p[0],b=p[1];return Object(a.useEffect)((function(){var e=function(){var e=Object(h.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("https://radiant-oasis-77477.herokuapp.com/api/posts/".concat(l));case 2:t=e.sent,b(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[l]),Object(d.jsxs)("div",{className:"container",id:"container",children:[Object(d.jsx)(V,{user:t,currentPage:n,post:j,setSidebarOpen:o,sidebarOpen:r}),Object(d.jsx)(X,{user:t,post:j,fetchNotifications:c,setSidebarOpen:o,sidebarOpen:r})]})}n(44);var $=n(131);function ee(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(!1),r=Object(i.a)(c,2),o=r[0],l=r[1],u=Object(v.f)(),p=Object(a.useRef)(),b=Object(a.useRef)(),f=Object(a.useContext)(j),O=f.isFetching,N=f.dispatch,w=function(){var e=Object(h.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),l(!0),e.prev=2,N({type:"LOGIN_START"}),e.prev=4,e.next=7,g.a.post("https://radiant-oasis-77477.herokuapp.com/api/auth/login",{usermail:p.current.value,password:b.current.value});case 7:n=e.sent,N({type:"LOGIN_SUCCESS",payload:n.data}),l(!1),u("/",{replace:!0}),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(4),s(!0),N({type:"LOGIN_FAILURE",payload:e.t0}),l(!1);case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(2),console.log(e.t1);case 23:case"end":return e.stop()}}),e,null,[[2,20],[4,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsx)(d.Fragment,{children:o?Object(d.jsx)(y,{type:"full-screen"}):Object(d.jsxs)("div",{className:"login-container",children:[Object(d.jsxs)("div",{className:"login-left",children:[Object(d.jsx)("div",{className:"glow"}),Object(d.jsx)("img",{className:"wordmark",src:"http://localhost:3001/assets/wordmark3.png",alt:""})]}),Object(d.jsxs)("div",{className:"login-right",children:[Object(d.jsx)("div",{className:"login-form",children:Object(d.jsxs)("form",{onSubmit:w,children:[Object(d.jsx)("div",{children:Object(d.jsx)("input",{className:"form-input",type:"text",placeholder:"Username or email",ref:p,required:!0})}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{className:"form-input",placeholder:"Password",type:"password",ref:b,required:!0})}),Object(d.jsx)("button",{type:"submit",disabled:O,children:O?Object(d.jsx)($.a,{color:"white",size:"20px"}):"Login"})]})}),Object(d.jsxs)("div",{className:"login-sub-container",children:[Object(d.jsxs)("p",{className:"dont-have-an-account",children:["Don't have an account?",Object(d.jsx)(x.b,{to:"/signup",children:" Sign-up"})]}),n&&Object(d.jsx)("span",{className:"error-span",children:"Username or password incorrect"})]})]})]})})}function te(e){e.setUserAuth;var t=Object(v.f)(),n=Object(a.useRef)(),s=Object(a.useRef)(),c=Object(a.useRef)(),r=Object(a.useRef)(),i=Object(a.useRef)(),o=Object(a.useRef)(),l=function(){var e=Object(h.a)(m.a.mark((function e(a){var l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),o.current.value===i.current.value){e.next=5;break}o.current.setCustomValidity("Passwords don't match!"),e.next=15;break;case 5:return l={firstname:n.current.value,lastname:s.current.value,username:c.current.value,email:r.current.value,password:i.current.value},e.prev=6,e.next=9,g.a.post("https://radiant-oasis-77477.herokuapp.com/api/auth/register",l);case 9:t("/login",{replace:!0}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"login-container",children:[Object(d.jsxs)("div",{className:"login-left",children:[Object(d.jsx)("div",{className:"glow"}),Object(d.jsx)("img",{className:"wordmark",src:"http://localhost:3001/assets/wordmark3.png",alt:""})]}),Object(d.jsxs)("div",{className:"login-right",children:[Object(d.jsx)("div",{className:"login-form",children:Object(d.jsxs)("form",{onSubmit:l,children:[Object(d.jsx)("div",{children:Object(d.jsx)("input",{className:"form-input",type:"text",placeholder:"First name",ref:n})}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{className:"form-input",type:"text",placeholder:"Last name",ref:s})}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{className:"form-input",type:"text",placeholder:"Username",ref:c})}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{className:"form-input",type:"email",placeholder:"Email address",ref:r})}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{className:"form-input",placeholder:"Password",type:"password",ref:i})}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{className:"form-input",placeholder:"Confirm password",type:"password",ref:o})}),Object(d.jsx)("button",{type:"submit",children:"Sign up"})]})}),Object(d.jsx)("div",{className:"login-sub-container",children:Object(d.jsxs)("p",{className:"dont-have-an-account",children:["Already have an account?",Object(d.jsx)(x.b,{to:"/login",children:" Login"})]})})]})]})}n(100);var ne=function(){var e=Object(h.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"LOGOUT",payload:null});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function ae(){var e=Object(a.useRef)(),t=Object(a.useRef)(),n=Object(a.useRef)(),s=Object(a.useRef)(),c=Object(a.useRef)(),r=Object(a.useRef)(),o=Object(a.useRef)(),l=Object(a.useRef)(),u=Object(v.f)(),p=Object(a.useContext)(j),b=p.user,f=p.dispatch,O=Object(a.useState)(""),x=Object(i.a)(O,2),N=x[0],w=x[1],k=Object(a.useState)(!1),y=Object(i.a)(k,2),S=y[0],_=y[1],C=Object(a.useState)(""),F=Object(i.a)(C,2),P=F[0],I=F[1];Object(a.useEffect)((function(){var e=function(){var e=Object(h.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get("https://radiant-oasis-77477.herokuapp.com/api/users?username=".concat(b.username));case 3:t=e.sent,w(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var L=function(){var a=Object(h.a)(m.a.mark((function a(i){var d;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i.preventDefault(),d={firstname:e.current.value,lastname:t.current.value,username:n.current.value,email:s.current.value,about:c.current.value,location:r.current.value,website:o.current.value,birthday:l.current.value,userId:N._id},a.prev=2,a.next=5,g.a.put("https://radiant-oasis-77477.herokuapp.com/api/users/".concat(N._id),d);case 5:_(!1),I(""),b.username===n.current.value?u("/",{replace:!0}):(alert("You're new username is ".concat(n.current.value)),localStorage.clear(),ne(f),u("/login",{replace:!0})),a.next=15;break;case 10:a.prev=10,a.t0=a.catch(2),console.log(a.t0.response.data.msg),_(!0),I(a.t0.response.data.msg);case 15:case"end":return a.stop()}}),a,null,[[2,10]])})));return function(e){return a.apply(this,arguments)}}();return Object(d.jsx)("div",{className:"update-user-page",children:Object(d.jsx)("div",{className:"update-form",children:Object(d.jsxs)("form",{onSubmit:L,children:[Object(d.jsxs)("div",{className:"update-item-div",children:[Object(d.jsx)("label",{htmlFor:"firstname",className:"update-label",children:"First name:"}),Object(d.jsx)("input",{className:"update-form-input",type:"text",placeholder:"First name",ref:e,defaultValue:N.firstname?N.firstname:null})]}),Object(d.jsxs)("div",{className:"update-item-div",children:[Object(d.jsx)("label",{htmlFor:"lastname",className:"update-label",children:"Last name:"}),Object(d.jsx)("input",{className:"update-form-input",type:"text",placeholder:"Last name",ref:t,defaultValue:N.lastname?N.lastname:null})]}),Object(d.jsxs)("div",{className:"update-item-div",children:[Object(d.jsx)("label",{htmlFor:"username",className:"update-label",children:"Username:"}),Object(d.jsx)("input",{className:"update-form-input",type:"text",placeholder:"Username",ref:n,defaultValue:N.username?N.username:null})]}),Object(d.jsxs)("div",{className:"update-item-div",children:[Object(d.jsx)("label",{htmlFor:"email",className:"update-label",children:"Email:"}),Object(d.jsx)("input",{className:"update-form-input",type:"email",placeholder:"Email address",ref:s,defaultValue:N.email?N.email:null})]}),Object(d.jsxs)("div",{className:"update-item-div",children:[Object(d.jsx)("label",{htmlFor:"bio",className:"update-label",children:"Bio:"}),Object(d.jsx)("textarea",{className:"update-form-textarea",placeholder:"About",type:"text",ref:c,defaultValue:N.about?N.about:null})]}),Object(d.jsxs)("div",{className:"update-item-div",children:[Object(d.jsx)("label",{htmlFor:"location",className:"update-label",children:"Location:"}),Object(d.jsx)("input",{className:"update-form-input",placeholder:"Location",type:"text",ref:r,defaultValue:N.location?N.location:null})]}),Object(d.jsxs)("div",{className:"update-item-div",children:[Object(d.jsx)("label",{htmlFor:"website",className:"update-label",children:"Website:"}),Object(d.jsx)("input",{className:"update-form-input",placeholder:"Website",type:"text",ref:o,defaultValue:N.website?N.website:null})]}),Object(d.jsxs)("div",{className:"update-item-div",children:[Object(d.jsx)("label",{htmlFor:"birthday",className:"update-label",children:"Birthday:"}),Object(d.jsx)("input",{className:"update-form-input",placeholder:"Website",type:"date",ref:l,defaultValue:N.birthday?N.birthday:null})]}),Object(d.jsx)("div",{className:"message-before-update-button",children:Object(d.jsxs)("span",{children:[Object(d.jsx)("span",{className:"info-icon",children:"\u24d8"})," If you are changing your username you will be logged out after updating"]})}),S&&Object(d.jsx)("div",{className:"error-msg",children:Object(d.jsx)("span",{children:P})}),Object(d.jsx)("button",{type:"submit",children:"Update"})]})})})}function se(e){var t=e.user,n=e.currentPage,a=e.setCurrentPage,s=e.updateType;return a("Update"),Object(d.jsxs)("div",{className:"container",id:"container",children:[Object(d.jsx)(V,{user:t,currentPage:n}),"user"===s&&Object(d.jsx)(ae,{user:t})]})}n(101);function ce(e){var t=e.friend,n=e.handleFollowingStatus,s=e.sidebarOpen,c="http://localhost:3001/",r=Object(a.useContext)(j).user,o=Object(a.useState)(""),l=Object(i.a)(o,2),u=l[0],p=l[1],b=Object(a.useState)(!0),f=Object(i.a)(b,2),O=f[0],v=f[1];return Object(a.useEffect)((function(){var e=function(){var e=Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout(Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t._id,e.next=3,r._id;case 3:if(e.t1=e.sent,e.t0!==e.t1){e.next=8;break}p("you"),e.next=9;break;case 8:!0===t.followingStatus&&!0===t.followerStatus?p("mutual following"):!1===t.followingStatus&&!0===t.followerStatus?p("follows you"):!0===t.followingStatus&&!1===t.followerStatus&&p("doesn't follow you");case 9:v(!1);case 10:case"end":return e.stop()}}),e)}))),1e3);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()})),Object(d.jsx)("div",{className:"follow-container",children:O?Object(d.jsx)(y,{type:"follower"}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(x.b,{to:"/profile/"+t.username,style:{textDecoration:"none"},children:Object(d.jsxs)("div",{className:"follow-container-left",children:[Object(d.jsx)("img",{src:t.profilePicture?c+t.profilePicture:c+"assets/noAvatar.png",alt:"",className:"follow-img"}),Object(d.jsxs)("div",{className:"follow-user-info",children:[Object(d.jsx)("span",{className:"follow-username",children:t.username}),Object(d.jsxs)("span",{className:"follow-name",children:[t.firstname," ",t.lastname]})]})]})}),"you"!==u&&Object(d.jsxs)("div",{className:"follow-container-right",children:[Object(d.jsx)("span",{className:"follow-status-span",children:u}),Object(d.jsxs)("button",{disabled:s,className:"follow-button",onClick:function(){return n(t.followingStatus,t)},children:[t.followingStatus?"Unfollow":"Follow",t.followingStatus?Object(d.jsx)(R.a,{}):Object(d.jsx)(D.a,{})]})]})]})},t._id)}n(102);function re(e){var t=e.setCurrentPage,n=(e.currentPage,e.sidebarOpen),s=e.setSidebarOpen;t("Explore");var c=Object(a.useState)(!0),r=Object(i.a)(c,2),l=r[0],u=r[1],p=Object(a.useState)([]),b=Object(i.a)(p,2),f=b[0],O=b[1],x=Object(a.useState)(0),v=Object(i.a)(x,2),N=v[0],w=v[1],k=Object(a.useContext)(j),S=k.user,_=k.dispatch,C=function(){var e=Object(h.a)(m.a.mark((function e(t,n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=function(){var e=Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=8;break}return e.next=4,g.a.put("https://radiant-oasis-77477.herokuapp.com/api/users/".concat(n._id,"/unfollow"),{userId:S._id});case 4:_({type:"UNFOLLOW",payload:n._id});try{g.a.delete("https://radiant-oasis-77477.herokuapp.com/api/notifications/",{data:{sender:S._id,recipient:n._id,postId:null,commentId:null,type:"follow"}})}catch(a){}e.next=12;break;case 8:return e.next=10,g.a.put("https://radiant-oasis-77477.herokuapp.com/api/users/".concat(n._id,"/follow"),{userId:S._id});case 10:_({type:"FOLLOW",payload:n._id});try{g.a.post("https://radiant-oasis-77477.herokuapp.com/api/notifications/",{sender:S._id,recipient:n._id,postId:null,commentId:null,type:"follow",seen:!1})}catch(a){}case 12:e.next=16;break;case 14:e.prev=14,e.t0=e.catch(0);case 16:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),a();case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){var e=function(){var e=Object(h.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get("https://radiant-oasis-77477.herokuapp.com/api/users/explore/".concat(S._id,"/").concat(N));case 3:t=e.sent,O([].concat(Object(o.a)(f),Object(o.a)(t.data))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:u(!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[N]),Object(a.useEffect)((function(){var e=function(){var e=Object(h.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get("https://radiant-oasis-77477.herokuapp.com/api/users/explore/".concat(S._id,"/0"));case 3:t=e.sent,O(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:u(!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[S]);return Object(d.jsx)("div",{className:"followfeed",onScroll:function(e){var t=e.target;t.offsetHeight+t.scrollTop>.95*t.scrollHeight&&w(f.length)},onClick:function(){return s(!1)},children:l?Object(d.jsx)(y,{type:"full-screen"}):Object(d.jsx)("div",{className:"followfeed-wrapper",children:f.length>0?Object(d.jsx)(d.Fragment,{children:f.map((function(e){return Object(d.jsx)(ce,{friend:e,handleFollowingStatus:C,sidebarOpen:n},e._id)}))}):Object(d.jsx)("span",{className:"no-explore-message",children:"No one new to see"})})})}function ie(e){var t=e.currentPage,n=e.setCurrentPage,a=e.sidebarOpen,s=e.setSidebarOpen;return Object(d.jsxs)("div",{className:"container",id:"container",children:[Object(d.jsx)(V,{currentPage:t,sidebarOpen:a,setSidebarOpen:s}),Object(d.jsx)(re,{currentPage:t,setCurrentPage:n,sidebarOpen:a,setSidebarOpen:s})]})}n(103);var oe=n(132),le=n(133),ue=n(134),de=n(135),pe=n(136);n(104);function je(e){var t=e.notification,n=e.status,s=e.getNotifications,c=Object(a.useContext)(j).user,r=Object(a.useState)({}),o=Object(i.a)(r,2),l=o[0],u=o[1],p=Object(a.useState)({}),b=Object(i.a)(p,2),f=b[0],O=b[1],v=Object(a.useState)(!0),N=Object(i.a)(v,2),w=N[0],k=N[1],S="http://localhost:3001/";Object(a.useEffect)((function(){var e=function(){var e=Object(h.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("https://radiant-oasis-77477.herokuapp.com/api/users?userId=".concat(t.sender));case 2:n=e.sent,u(n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e();var n=function(){var e=Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout(Object(h.a)(m.a.mark((function e(){var n,a,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"postLike"===t.type?(n=t.postId,a="posts/"):"commentLike"===t.type||"comment"===t.type?(n=t.commentId,a="comments/"):"follow"===t.type&&(n=t.sender,a="users?userId="),e.next=3,g.a.get("https://radiant-oasis-77477.herokuapp.com/api/".concat(a).concat(n));case 3:s=e.sent,O(s.data),k(!1);case 6:case"end":return e.stop()}}),e)}))),1e3);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n()}),[c]);var _=function(){var e=Object(h.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){var e=Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{g.a.put("https://radiant-oasis-77477.herokuapp.com/api/notifications/".concat(t._id))}catch(n){}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=3,n();case 3:s();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(h.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){var e=Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{g.a.delete("https://radiant-oasis-77477.herokuapp.com/api/notifications/".concat(t._id))}catch(n){}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=3,n();case 3:s();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("span",{className:"notification-message",children:["liked your comment ",Object(F.a)(t.createdAt)]}),Object(d.jsx)(L.a,{className:"notification-icon like-icon"})]})},I=function(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("span",{className:"notification-message",children:[" ","liked your post ",Object(F.a)(t.createdAt)]}),Object(d.jsx)(L.a,{className:"notification-icon like-icon"})]})},E=function(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("span",{className:"notification-message",children:[" ","commented on your post ",Object(F.a)(t.createdAt)]}),Object(d.jsx)(oe.a,{className:"notification-icon message-icon"})]})},A=function(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("span",{className:"notification-message",children:[" ","followed you ",Object(F.a)(t.createdAt)]}),Object(d.jsx)(le.a,{className:"notification-icon follow-icon"})]})};return Object(d.jsx)("div",{className:"notification-container",children:w?Object(d.jsx)(y,{type:"notification"}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(x.b,{to:"follow"===t.type?"/profile/".concat(l.username):"/post/".concat(t.postId),className:"notification-link",children:Object(d.jsxs)("div",{className:"notification-wrapper",children:[Object(d.jsxs)("div",{className:"notification-top",children:[Object(d.jsx)(x.b,{to:"/profile/".concat(l.username),children:Object(d.jsx)("img",{className:"notification-avatar",src:l.profilePicture?S+l.profilePicture:S+"assets/noAvatar.png",alt:""})}),Object(d.jsxs)("div",{className:"notification-desc",children:[Object(d.jsx)(x.b,{className:"notification-username-link",to:"/profile/".concat(l.username),children:Object(d.jsx)("span",{className:"notification-username",children:l.username!==c.username?l.username:"You"})}),"commentLike"===t.type&&Object(d.jsx)(P,{}),"postLike"===t.type&&Object(d.jsx)(I,{}),"comment"===t.type&&Object(d.jsx)(E,{}),"follow"===t.type&&Object(d.jsx)(A,{})]})]}),"follow"!==t.type&&Object(d.jsx)("span",{className:"content-body",children:f.body}),"follow"===t.type&&Object(d.jsx)("span",{className:"content-follow",children:"View their profile"})]})}),Object(d.jsxs)("div",{className:"notification-buttons-container",children:[Object(d.jsx)("button",{className:"notification-read-button",onClick:_,children:"new"===n?Object(d.jsx)(ue.a,{className:"button-icon"}):Object(d.jsx)(de.a,{className:"button-icon"})}),Object(d.jsx)("button",{className:"notification-delete-button",onClick:C,children:Object(d.jsx)(pe.a,{className:"button-icon"})})]})]})})}function be(e){var t=e.fetchNotifications,n=e.setCurrentPage,s=e.sidebarOpen,c=e.setSidebarOpen,r=Object(a.useState)(!0),o=Object(i.a)(r,2),l=o[0],u=o[1],p=Object(a.useState)(!0),b=Object(i.a)(p,2),f=b[0],O=b[1],x=Object(a.useState)([]),v=Object(i.a)(x,2),N=v[0],w=v[1],k=Object(a.useState)([]),S=Object(i.a)(k,2),_=S[0],C=S[1],F=Object(a.useContext)(j).user;n("Notifications");var P=function(){var e=Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout(Object(h.a)(m.a.mark((function e(){var n,a,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("https://radiant-oasis-77477.herokuapp.com/api/notifications/".concat(F._id));case 2:n=e.sent,a=n.data.filter((function(e){return!0===e.seen})),w(a.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)}))),s=n.data.filter((function(e){return!1===e.seen})),C(s.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)}))),t(),O(!1);case 9:case"end":return e.stop()}}),e)}))),1e3),u(!1);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){P()}),[F._id]);var I=function(){var e=Object(h.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=function(){var e=Object(h.a)(m.a.mark((function e(){var n,a,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n="seen"===t?N:_,a=function(){var e=Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(n.map(function(){var e=Object(h.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.put("https://radiant-oasis-77477.herokuapp.com/api/notifications/".concat(t._id));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a().then((function(){return s()}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n(),P();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(h.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=function(){var e=Object(h.a)(m.a.mark((function e(){var n,a,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n="seen"===t?N:_,a=function(){var e=Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(n.map(function(){var e=Object(h.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.delete("https://radiant-oasis-77477.herokuapp.com/api/notifications/".concat(t._id));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a().then((function(){return s()}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){return Object(d.jsxs)("div",{className:"notifications-container",onClick:function(){return c(!1)},children:[Object(d.jsx)("div",{className:"notification-type-header",style:s?{pointerEvents:"none"}:{},children:Object(d.jsxs)("div",{className:"notification-type-header-wrapper",children:[Object(d.jsxs)("span",{className:"notification-type-header-title",children:["New ","(",_.length,")"]}),_.length>0&&Object(d.jsxs)("div",{className:"notification-type-button-container",children:[Object(d.jsx)("button",{className:"notification-read-button desktop-button",onClick:function(){return I("new")},children:"Mark all as seen"}),Object(d.jsx)("button",{className:"notification-delete-button desktop-button",onClick:function(){return L("new")},children:"Delete all new"}),Object(d.jsx)("button",{className:"notification-read-button mobile-button",onClick:function(){return I("new")},children:"All seen"}),Object(d.jsx)("button",{className:"notification-delete-button mobile-button",onClick:function(){return L("new")},children:"Delete all"})]})]})}),Object(d.jsx)("div",{className:"notifications-holder",style:s?{pointerEvents:"none"}:{},children:_.length>0?_.map((function(e){return Object(d.jsx)(je,{notification:e,status:"new",getNotifications:P},e._id)})):Object(d.jsx)("div",{className:"full-width-wrapper",children:Object(d.jsx)("span",{className:"no-notifications-message",children:"No new notifications"})})})]})},A=function(){return Object(d.jsxs)("div",{className:"notifications-container",children:[Object(d.jsx)("div",{className:"notification-type-header",children:Object(d.jsxs)("div",{className:"notification-type-header-wrapper",children:[Object(d.jsxs)("span",{className:"notification-type-header-title ",children:["Seen ","(",N.length,")"]}),N.length>0&&Object(d.jsxs)("div",{className:"notification-type-button-container",children:[Object(d.jsx)("button",{className:"notification-read-button desktop-button",onClick:function(){return I("seen")},children:"All new"}),Object(d.jsx)("button",{className:"notification-delete-button desktop-button",onClick:function(){return L("seen")},children:"Delete all"}),Object(d.jsx)("button",{className:"notification-read-button mobile-button",onClick:function(){return I("seen")},children:"All new"}),Object(d.jsx)("button",{className:"notification-delete-button mobile-button",onClick:function(){return L("seen")},children:"Delete all"})]})]})}),Object(d.jsx)("div",{className:"notifications-holder",children:N.length>0?N.map((function(e){return Object(d.jsx)(je,{notification:e,status:"seen",getNotifications:P},e._id)})):Object(d.jsx)("div",{className:"full-width-wrapper",children:Object(d.jsx)("span",{className:"no-notifications-message",children:"No seen notifications"})})})]})};return Object(d.jsx)("div",{className:"notifications-feed-page",children:Object(d.jsx)(d.Fragment,{children:l?Object(d.jsx)(y,{type:"full-screen"}):Object(d.jsx)(d.Fragment,{children:N.length+_.length>0?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(E,{}),Object(d.jsx)(A,{})]}):f?Object(d.jsx)(y,{type:"full-screen"}):Object(d.jsx)("span",{className:"no-notifications-message",children:"No notifications"})})})})}function fe(e){var t=e.currentPage,n=e.setCurrentPage,a=e.fetchNotifications,s=e.notificationsCount,c=e.sidebarOpen,r=e.setSidebarOpen;return Object(d.jsxs)("div",{className:"container",id:"container",children:[Object(d.jsx)(V,{currentPage:t,notificationsCount:s,sidebarOpen:c,setSidebarOpen:r}),Object(d.jsx)(be,{fetchNotifications:a,setCurrentPage:n,sidebarOpen:c,setSidebarOpen:r})]})}n(45);var me=n(137),Oe=n(138),he=n(139),xe=n(140),ve=n(141),Ne=n(142),ge=n(143),we=n(144),ke=n(145),ye=n(146);function Se(){return Object(d.jsx)("svg",{className:"navbar-svg",version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"4000.000000pt",height:"4000.000000pt",viewBox:"0 0 4000.000000 4000.000000",preserveAspectRatio:"xMidYMid meet",children:Object(d.jsx)("g",{transform:"translate(0.000000,4000.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none",className:"navbar-svg-g",children:Object(d.jsx)("path",{d:"M1353 22773 c2 -15060 3 -15886 20 -16028 72 -620 208 -1161 422\r\n-1680 77 -190 265 -569 365 -740 530 -900 1265 -1635 2165 -2165 171 -100 550\r\n-288 740 -366 584 -240 1210 -385 1865 -434 187 -14 25953 -14 26140 0 655 49\r\n1281 194 1865 434 190 78 569 266 740 366 900 530 1635 1265 2165 2165 100\r\n171 288 550 365 740 214 519 350 1060 422 1680 17 142 18 837 21 13150 2 9481\r\n0 13045 -8 13165 -44 644 -192 1286 -434 1875 -78 190 -266 569 -366 740 -530\r\n900 -1265 1635 -2165 2165 -171 100 -550 288 -740 366 -584 240 -1210 385\r\n-1865 434 -89 7 -5493 10 -15928 10 l-15792 0 3 -15877z m24827 9233 c1160\r\n-88 2045 -305 2845 -695 253 -124 381 -196 585 -329 649 -424 1168 -975 1560\r\n-1657 90 -157 268 -524 339 -701 578 -1443 701 -3358 365 -5724 -56 -400 -77\r\n-521 -754 -4360 -357 -2027 -931 -5282 -1275 -7235 -344 -1952 -628 -3562\r\n-631 -3578 l-6 -27 -3359 0 -3359 0 5 22 c3 13 311 1760 685 3883 375 2123\r\n906 5136 1181 6695 514 2912 563 3200 623 3620 169 1182 179 2074 30 2738 -62\r\n276 -130 474 -239 697 -323 657 -884 1063 -1695 1225 -318 64 -584 84 -990 77\r\n-404 -7 -649 -37 -995 -122 -1044 -256 -1873 -874 -2548 -1900 -270 -412 -545\r\n-963 -752 -1510 -311 -818 -555 -1743 -789 -2985 -36 -190 -540 -3040 -1121\r\n-6335 -580 -3294 -1061 -6016 -1067 -6047 l-11 -58 -3358 0 -3359 0 5 23 c3\r\n12 723 4092 1600 9067 877 4975 1810 10265 2073 11755 l478 2710 3357 3 c1846\r\n1 3357 -1 3357 -5 0 -12 -371 -2118 -375 -2130 -3 -9 10 -13 48 -13 l52 1 73\r\n87 c301 356 727 763 1118 1068 940 733 2065 1257 3274 1528 504 112 1019 186\r\n1510 216 96 6 198 12 225 14 137 10 1105 -4 1295 -18z"})})})}function _e(e){var t=e.currentPage,n=e.notificationsCount,s=e.sidebarOpen,c=e.setSidebarOpen,r=Object(a.useContext)(j),i=r.user,o=r.dispatch,l=Object(v.f)(),u=function(){c(!1)};return Object(d.jsx)("div",{className:"sidebar "+(s&&"active"),children:Object(d.jsxs)("div",{className:"sidebar-wrapper",children:[Object(d.jsx)(Se,{}),Object(d.jsx)(x.b,{to:"/",children:Object(d.jsxs)("div",{onClick:function(){return u()},className:"sidebar-link "+("Timeline"===t?"active-nav-link":""),children:["Timeline"===t?Object(d.jsx)(me.a,{className:"sidebar-icon"}):Object(d.jsx)(Oe.a,{className:"sidebar-icon"})," ","Timeline"]})}),Object(d.jsx)(x.b,{to:"/profile/"+i.username,children:Object(d.jsxs)("div",{onClick:function(){return u()},className:"sidebar-link "+("Profile"===t?"active-nav-link":""),children:["Profile"===t?Object(d.jsx)(he.a,{className:"sidebar-icon"}):Object(d.jsx)(xe.a,{className:"sidebar-icon"})," ","Profile"]})}),Object(d.jsx)(x.b,{to:"/notifications/"+i.username,children:Object(d.jsxs)("div",{onClick:function(){return u()},className:"sidebar-link "+("Notifications"===t?"active-nav-link":""),children:["Notifications"===t?Object(d.jsx)(ve.a,{className:"sidebar-icon"}):Object(d.jsx)(Ne.a,{className:"sidebar-icon"})," ","Notifications",n>0&&Object(d.jsx)("div",{className:"notification-badge",children:n})]})}),Object(d.jsx)(x.b,{to:"/".concat(i.username,"/followers"),children:Object(d.jsxs)("div",{onClick:function(){return u()},className:"sidebar-link "+("Followers"===t?"active-nav-link":""),children:["Followers"===t?Object(d.jsx)(H.a,{className:"sidebar-icon"}):Object(d.jsx)(ge.a,{className:"sidebar-icon"})," ","Followers"]})}),Object(d.jsx)(x.b,{to:"/".concat(i.username,"/following"),children:Object(d.jsxs)("div",{onClick:function(){return u()},className:"sidebar-link "+("Following"===t?"active-nav-link":""),children:["Following"===t?Object(d.jsx)(H.a,{className:"sidebar-icon"}):Object(d.jsx)(ge.a,{className:"sidebar-icon"})," ","Following"]})}),Object(d.jsx)(x.b,{to:"/explore/".concat(i._id),children:Object(d.jsxs)("div",{onClick:function(){return u()},className:"sidebar-link "+("Explore"===t?"active-nav-link":""),children:["Explore"===t?Object(d.jsx)(we.a,{className:"sidebar-icon"}):Object(d.jsx)(ke.a,{className:"sidebar-icon"})," ","Explore"]})}),Object(d.jsx)("div",{className:"sidebar-logout",children:Object(d.jsxs)("button",{className:"logout-button",onClick:function(){localStorage.clear(),ne(o),c(!1),l("/login",{replace:!0})},children:[Object(d.jsx)(ye.a,{className:"sidebar-icon"})," Logout"]})})]})})}var Ce=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)("Timeline"),r=Object(i.a)(c,2),o=r[0],l=r[1],u=Object(a.useContext)(j).user,p=Object(a.useState)({}),b=Object(i.a)(p,2),f=b[0],N=b[1],w=Object(a.useState)(0),k=Object(i.a)(w,2),y=k[0],S=k[1],_=Object(a.useState)(!1),C=Object(i.a)(_,2),F=C[0],P=C[1],I=function(){var e=Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout(Object(h.a)(m.a.mark((function e(){var t,n,a,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("https://radiant-oasis-77477.herokuapp.com/api/users?userId=".concat(u._id));case 2:t=e.sent,N(t.data),n=0,a=Object(O.a)(t.data.notifications);try{for(a.s();!(s=a.n()).done;)!1===s.value.seen&&n++}catch(c){a.e(c)}finally{a.f()}if(S(n),!f){e.next=10;break}return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e)}))),300);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){var e=localStorage.getItem("userAuth");s(!!e),u&&I()}),[u]),Object(d.jsx)(x.a,{children:Object(d.jsx)("div",{className:"app",children:u?Object(d.jsxs)("div",{className:"home-container",children:[Object(d.jsx)(_e,{currentPage:o,setCurrentPage:l,notificationsCount:y,sidebarOpen:F,setSidebarOpen:P}),Object(d.jsx)("div",{className:"left-container",children:Object(d.jsxs)(v.c,{children:[Object(d.jsx)(v.a,{exact:!0,path:"/",element:Object(d.jsx)(Y,{currentPage:o,setCurrentPage:l,fetchNotifications:I,sidebarOpen:F,setSidebarOpen:P})}),Object(d.jsx)(v.a,{path:"/profile/:username",element:Object(d.jsx)(q,{currentPage:o,setCurrentPage:l,fetchNotifications:I,sidebarOpen:F,setSidebarOpen:P})}),Object(d.jsx)(v.a,{path:"/notifications/:username",element:Object(d.jsx)(fe,{currentPage:o,setCurrentPage:l,fetchNotifications:I,notificationsCount:y,sidebarOpen:F,setSidebarOpen:P})}),Object(d.jsx)(v.a,{exact:!0,path:"/:id/followers",element:Object(d.jsx)(Q,{currentPage:o,setCurrentPage:l,follow:"Followers",sidebarOpen:F,setSidebarOpen:P})}),Object(d.jsx)(v.a,{exact:!0,path:"/:id/following",element:Object(d.jsx)(Q,{currentPage:o,setCurrentPage:l,follow:"Following",sidebarOpen:F,setSidebarOpen:P})}),Object(d.jsx)(v.a,{exact:!0,path:"/explore/:userId",element:Object(d.jsx)(ie,{currentPage:o,setCurrentPage:l,sidebarOpen:F,setSidebarOpen:P})}),Object(d.jsx)(v.a,{exact:!0,path:"/post/:postId",element:Object(d.jsx)(Z,{user:u,currentPage:o,setCurrentPage:l,fetchNotifications:I,sidebarOpen:F,setSidebarOpen:P})}),Object(d.jsx)(v.a,{exact:!0,path:"/:id/update",element:Object(d.jsx)(se,{user:u,currentPage:o,setCurrentPage:l,updateType:"user",sidebarOpen:F,setSidebarOpen:P})}),Object(d.jsx)(v.a,{exact:!0,path:"/login",element:Object(d.jsx)(Y,{currentPage:o,setCurrentPage:l})}),Object(d.jsx)(v.a,{exact:!0,path:"/signup",element:Object(d.jsx)(te,{userAuth:n,setUserAuth:s})})]})})]}):Object(d.jsxs)(v.c,{children:[Object(d.jsx)(v.a,{exact:!0,path:"/login",element:Object(d.jsx)(ee,{})}),Object(d.jsx)(v.a,{exact:!0,path:"/signup",element:Object(d.jsx)(te,{userAuth:n,setUserAuth:s})})]})})})};r.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(b,{children:Object(d.jsx)(Ce,{})})}),document.getElementById("root"))},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},58:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){},97:function(e,t,n){},98:function(e,t,n){},99:function(e,t,n){}},[[105,1,2]]]);
//# sourceMappingURL=main.6d4f36f7.chunk.js.map