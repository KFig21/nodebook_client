(this.webpackJsonpnodebook_client=this.webpackJsonpnodebook_client||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){},102:function(e,t,a){},103:function(e,t,a){},104:function(e,t,a){},105:function(e,t,a){},106:function(e,t,a){},107:function(e,t,a){},108:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),c=a(30),r=a.n(c),i=a(3),o=a(11),l=a(19),u=function(e,t){switch(t.type){case"LOGIN_START":return{user:null,isFetching:!0,error:!1};case"LOGIN_SUCCESS":return{user:t.payload,isFetching:!1,error:!1};case"LOGIN_FAILURE":return{user:null,isFetching:!1,error:!0};case"LOGOUT":return localStorage.clear(),{user:null,isFetching:!1,error:!1};case"FOLLOW":return Object(l.a)(Object(l.a)({},e),{},{user:Object(l.a)(Object(l.a)({},e.user),{},{followings:[].concat(Object(o.a)(e.user.followings),[t.payload])})});case"UNFOLLOW":return Object(l.a)(Object(l.a)({},e),{},{user:Object(l.a)(Object(l.a)({},e.user),{},{followings:e.user.followings.filter((function(e){return e!==t.payload}))})});default:return e}},d=a(0),j={user:JSON.parse(localStorage.getItem("user"))||null,isFetching:!1,error:!1},p=Object(n.createContext)(j),b=function(e){var t=e.children,a=Object(n.useReducer)(u,j),s=Object(i.a)(a,2),c=s[0],r=s[1];return Object(n.useEffect)((function(){localStorage.setItem("user",JSON.stringify(c.user))}),[c.user]),Object(d.jsx)(p.Provider,{value:{user:c.user,isFetching:c.isFetching,error:c.error,dispatch:r},children:t})},m=(a(60),a(2)),f=a.n(m),O=a(22),h=a(4),x=a(7),v=a(8),g=(a(62),a(5)),N=a.n(g),A=(a(81),a(82),a(48)),w=a.n(A);function k(e){var t=e.type;return Object(d.jsx)("div",{className:"loader-"+t,children:Object(d.jsx)(w.a,{type:"bars",color:"#4bb44b"})})}var y=a(123),S=a(124),Q="data:image/png;base64,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";a(83);function B(){var e=Object(n.useContext)(p).user,t=Object(n.useRef)(),a=Object(n.useState)(null),s=Object(i.a)(a,2),c=s[0],r=s[1],o=Object(n.useState)(""),l=Object(i.a)(o,2),u=l[0],j=l[1],b=""===u,m=Object(n.useState)({}),O=Object(i.a)(m,2),x=O[0],v=O[1],g=Object(n.useState)(!1),A=Object(i.a)(g,2),w=A[0],k=A[1];Object(n.useEffect)((function(){var t=function(){var t=Object(h.a)(f.a.mark((function t(){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.a.get("https://radiant-oasis-77477.herokuapp.com/api/users?username=".concat(e.username));case 2:a=t.sent,v(a.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e]);var B=function(){var e=Object(h.a)(f.a.mark((function e(a){var n,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),n={userId:x._id,body:t.current.value},!c){e.next=18;break}return(s=new FormData).append("file",c),s.append("userId",x._id),s.append("body",t.current.value),e.prev=7,e.next=10,N.a.post("https://radiant-oasis-77477.herokuapp.com/api/posts/image",s);case 10:window.location.reload(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(7),k(!0);case 16:e.next=27;break;case 18:return e.prev=18,e.next=21,N.a.post("https://radiant-oasis-77477.herokuapp.com/api/posts",n);case 21:window.location.reload(),e.next=27;break;case 24:e.prev=24,e.t1=e.catch(18),k(!0);case 27:case"end":return e.stop()}}),e,null,[[7,13],[18,24]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsx)("div",{className:"share",children:Object(d.jsxs)("div",{className:"share-wrapper",children:[Object(d.jsxs)("div",{className:"share-top",children:[Object(d.jsx)("img",{className:"share-avatar",src:x.avatar?"https://nodebook-images.s3.amazonaws.com/"+x.avatar:Q,alt:""}),Object(d.jsx)("textarea",{placeholder:"What's up "+x.username+"?",className:"share-input",onChange:function(e){return j(e.target.value)},ref:t,maxLength:500})]}),Object(d.jsx)("hr",{className:"share-hr"}),c&&Object(d.jsxs)("div",{className:"share-img-container",children:[Object(d.jsx)("img",{className:"share-img",src:URL.createObjectURL(c),alt:""}),Object(d.jsx)(y.a,{className:"share-cancel-img",onClick:function(){return r(null)}})]}),Object(d.jsxs)("form",{className:"share-bottom",onSubmit:B,encType:"multipart/form-data",children:[Object(d.jsx)("div",{className:"share-options",children:Object(d.jsxs)("label",{htmlFor:"file",className:"share-option",children:[Object(d.jsx)(S.a,{className:"share-icon"}),Object(d.jsx)("span",{className:"share-option-text",children:"Add an image"}),Object(d.jsx)("input",{style:{display:"none"},type:"file",id:"file",name:"file",accept:".png,.jpeg,.jpg",onChange:function(e){return r(e.target.files[0])}})]})}),Object(d.jsx)("button",{type:"submit",className:b?"share-button invalid-share-button":"share-button",disabled:b,children:"Share"})]}),w&&Object(d.jsx)("div",{className:"error-div",children:Object(d.jsxs)("span",{className:"error-message",children:[Object(d.jsx)("strong",{children:"Error:"})," File too large or incorrect type"]})})]})})}var C=a(13),I=a(125),E=a(126),D=a(127);a(88);function P(e){var t=e.comment,a=e.fetchNotifications,s=e.showDeletePost,c=Object(n.useState)(t.likes.length),r=Object(i.a)(c,2),o=r[0],l=r[1],u=Object(n.useState)(!1),j=Object(i.a)(u,2),b=j[0],m=j[1],O=Object(n.useContext)(p).user,v=Object(n.useState)({}),g=Object(i.a)(v,2),A=g[0],w=g[1],k=Object(n.useState)(!1),y=Object(i.a)(k,2),S=y[0],B=y[1],P=Object(n.useState)(!1),F=Object(i.a)(P,2),M=F[0],L=F[1],H=Object(n.useState)(!1),W=Object(i.a)(H,2),Y=W[0],G=W[1],R=Object(n.useRef)(),V=Object(n.useState)(""),T=Object(i.a)(V,2),z=T[0],U=T[1],J=""===z||z===t.body;Object(n.useEffect)((function(){m(t.likerIds.includes(O._id))}),[O._id,t.likes]),Object(n.useEffect)((function(){var e=function(){var e=Object(h.a)(f.a.mark((function e(){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("https://radiant-oasis-77477.herokuapp.com/api/users?userId=".concat(t.userId));case 2:a=e.sent,w(a.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t.userId]);var X=function(e){try{N.a.put("https://radiant-oasis-77477.herokuapp.com/api/comments/".concat(t._id,"/like"),{userId:O._id})}catch(n){}if(l(b?o-1:o+1),m(!b),b){if(b)try{N.a.delete("https://radiant-oasis-77477.herokuapp.com/api/notifications/",{data:{sender:O._id,recipient:A._id,commentId:t._id,postId:t.postId,type:"commentLike"}})}catch(n){}}else try{N.a.post("https://radiant-oasis-77477.herokuapp.com/api/notifications/",{sender:O._id,recipient:A._id,commentId:t._id,postId:t.postId,type:"commentLike",seen:!1})}catch(n){}a()},Z=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.delete("https://radiant-oasis-77477.herokuapp.com/api/comments/".concat(t._id,"/"),{data:{userId:O._id}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),alert(e.t0);case 8:B(!S),L(!M),a(),window.location.reload();case 12:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(h.a)(f.a.mark((function e(a){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n={userId:O._id,body:R.current.value,edited:!0,editedtimestamp:Date.now()},e.prev=2,e.next=5,N.a.put("https://radiant-oasis-77477.herokuapp.com/api/comments/".concat(t._id,"/"),n);case 5:window.location.reload(),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(2);case 10:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),_=function(){G(!1),B(!1),L(!1)};return Object(n.useEffect)((function(){s&&_()}),[s]),Object(d.jsxs)("div",{className:"comment-container",children:[Object(d.jsx)("div",{className:"comment-avatar-container",children:A.username?Object(d.jsx)(x.b,{to:"/profile/".concat(A.username),children:Object(d.jsx)("img",{className:"comment-avatar",src:A.avatar?"https://nodebook-images.s3.amazonaws.com/"+A.avatar:Q,alt:""})}):Object(d.jsx)("div",{className:"not-a-link",children:Object(d.jsx)("img",{className:"comment-avatar",src:A.avatar?"https://nodebook-images.s3.amazonaws.com/"+A.avatar:Q,alt:""})})}),Object(d.jsxs)("div",{className:"comment-right",children:[Object(d.jsxs)("div",{className:"comment-body-container",children:[Object(d.jsxs)("div",{className:"commenter-info-container",children:[Object(d.jsxs)("div",{className:"comment-info-left",children:[A.username?Object(d.jsx)(x.b,{to:"/profile/".concat(A.username),children:Object(d.jsx)("span",{className:"comment-username",children:A.username})}):Object(d.jsx)("div",{className:"not-a-link",children:Object(d.jsx)("span",{className:"comment-username",children:"Loading"})}),Object(d.jsx)("span",{className:"comment-date",children:Object(C.a)(t.createdAt)})]}),(A.username===O.username||O.isAdmin)&&Object(d.jsxs)("div",{className:"comment-info-right",children:[Object(d.jsx)(I.a,{className:"comment-options-icon",onClick:function(){return B(!S),void(M&&L(!M))}}),S&&Object(d.jsxs)("div",{className:"comment-options-div",children:[Object(d.jsx)("button",{className:"comment-options-delete",onClick:function(){return L(!M)},children:"delete"}),Object(d.jsx)("button",{className:"comment-options-edit",onClick:function(){return G(!Y)},children:"edit"})]})]})]}),Object(d.jsx)("div",{className:"comment-body",children:t.body}),t.edited&&Object(d.jsxs)("span",{className:"comment-edit",children:["edit: ",Object(C.a)(t.editedtimestamp)]}),Y&&Object(d.jsx)("div",{children:Object(d.jsxs)("form",{onSubmit:q,children:[Object(d.jsx)("textarea",{className:"edit-input",type:"text",maxLength:500,ref:R,onChange:function(e){return U(e.target.value)},defaultValue:t.body?t.body:null}),Object(d.jsxs)("div",{className:"edit-option-buttons-div",children:[Object(d.jsx)("button",{disabled:J,type:"submit",className:"edit-options-button "+(J?"invalid":"edit-options-submit "),children:"edit"}),Object(d.jsx)("button",{className:"edit-options-cancel edit-options-button",onClick:function(){return _()},children:"cancel"})]})]})}),M&&Object(d.jsxs)("div",{className:"delete-comment-container",children:[Object(d.jsx)("span",{children:"Are you sure you want to delete this comment?"}),Object(d.jsxs)("div",{className:"delete-comment-button-container",children:[Object(d.jsx)("button",{className:"delete-button",onClick:function(){return Z()},children:"DELETE"}),Object(d.jsx)("button",{className:"cancel-button",onClick:function(){return L(!M)},children:"Cancel"})]})]})]}),Object(d.jsxs)("div",{className:"comment-like-container",children:[b?Object(d.jsx)(E.a,{className:"like-icon liked",onClick:X}):Object(d.jsx)(D.a,{className:"like-icon",onClick:X}),Object(d.jsx)(x.b,{to:"/comment/".concat(t._id,"/likes"),children:1===o?b?Object(d.jsx)("span",{className:"comment-like-counter",children:"You like this"}):Object(d.jsx)("span",{className:"comment-like-counter",children:"1 person likes this"}):o>1?b?2===o?Object(d.jsxs)("span",{className:"comment-like-counter",children:["You and ",o-1," other person like this"]}):Object(d.jsxs)("span",{className:"comment-like-counter",children:["You and ",o-1," other people like this"]}):Object(d.jsxs)("span",{className:"comment-like-counter",children:[o," people like this"]}):Object(d.jsx)("span",{className:"comment-like-counter",children:"Be the first to like this"})})]})]})]})}a(44);function F(e){var t=e.post,a=e.page,s=e.fetchNotifications,c=e.sidebarOpen,r=Object(n.useState)(t.likerIds.length),o=Object(i.a)(r,2),l=o[0],u=o[1],j=Object(n.useState)(!1),b=Object(i.a)(j,2),m=b[0],O=b[1],g=Object(n.useState)([]),A=Object(i.a)(g,2),w=A[0],k=A[1],y=Object(n.useState)({}),S=Object(i.a)(y,2),B=S[0],F=S[1],M=Object(n.useContext)(p).user,L=Object(n.useRef)(),H=Object(n.useRef)(),W=Object(v.f)(),Y=Object(n.useState)(!1),G=Object(i.a)(Y,2),R=G[0],V=G[1],T=Object(n.useState)(!1),z=Object(i.a)(T,2),U=z[0],J=z[1],X=Object(n.useState)(!1),Z=Object(i.a)(X,2),q=Z[0],_=Z[1],K=Object(n.useState)(""),$=Object(i.a)(K,2),ee=$[0],te=$[1],ae=""===ee||ee===t.body,ne=Object(n.useState)(""),se=Object(i.a)(ne,2),ce=se[0],re=se[1],ie=""===ce;Object(n.useEffect)((function(){O(t.likerIds.includes(M._id))}),[M._id,t.likerIds]),Object(n.useEffect)((function(){var e=function(){var e=Object(h.a)(f.a.mark((function e(){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("https://radiant-oasis-77477.herokuapp.com/api/users?userId=".concat(t.userId));case 2:a=e.sent,F(a.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t.userId]),Object(n.useEffect)((function(){var e=function(){var e=Object(h.a)(f.a.mark((function e(){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("https://radiant-oasis-77477.herokuapp.com/api/posts/".concat(t._id,"/comments/0"));case 2:a=e.sent,k(a.data.sort((function(e,t){return new Date(e.createdAt)-new Date(t.createdAt)})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t.comments&&e()}),[B]);var oe=function(){try{N.a.put("https://radiant-oasis-77477.herokuapp.com/api/posts/".concat(t._id,"/like"),{userId:M._id,postId:t._id})}catch(e){}if(u(m?l-1:l+1),O(!m),m){if(m)try{N.a.delete("https://radiant-oasis-77477.herokuapp.com/api/notifications/",{data:{sender:M._id,recipient:B._id,postId:t._id,commentId:null,type:"postLike"}})}catch(e){}}else try{N.a.post("https://radiant-oasis-77477.herokuapp.com/api/notifications/",{sender:M._id,recipient:B._id,postId:t._id,commentId:null,type:"postLike",seen:!1})}catch(e){}s()},le=function(){var e=Object(h.a)(f.a.mark((function e(a){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n={userId:M._id,body:L.current.value,postId:t._id,sender:M._id,recipient:B._id,type:"comment",seen:!1},e.prev=2,e.next=5,N.a.post("https://radiant-oasis-77477.herokuapp.com/api/posts/".concat(t._id,"/comment"),n);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:window.location.reload(),s();case 11:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=Object(h.a)(f.a.mark((function e(a){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n={userId:M._id,body:H.current.value,edited:!0,editedtimestamp:Date.now()},e.prev=2,e.next=5,N.a.put("https://radiant-oasis-77477.herokuapp.com/api/posts/".concat(t._id),n);case 5:window.location.reload(),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(2);case 10:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.delete("https://radiant-oasis-77477.herokuapp.com/api/posts/".concat(t._id,"/"),{data:{userId:M._id}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),alert(e.t0);case 8:V(!R),J(!U),s(),W("/",{replace:!0}),window.location.reload();case 13:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),je=function(){_(!1),V(!1),J(!1)};return Object(d.jsxs)("div",{className:"post",children:[U&&Object(d.jsxs)("div",{className:"delete-post-container",children:[Object(d.jsx)("span",{className:"delete-post-message",children:"Are you sure you want to delete this post?"}),Object(d.jsxs)("div",{className:"delete-post-button-container",children:[Object(d.jsx)("button",{className:"delete-button",onClick:function(){return de()},children:"DELETE"}),Object(d.jsx)("button",{className:"cancel-button",onClick:function(){return je()},children:"Cancel"})]})]}),Object(d.jsxs)("div",{className:"post-wrapper",style:c?{pointerEvents:"none"}:{},children:[Object(d.jsxs)("div",{className:"post-upper",children:[Object(d.jsxs)("div",{className:"post-top",children:[B.username?Object(d.jsx)(x.b,{to:"/profile/".concat(B.username),children:Object(d.jsx)("img",{className:"post-avatar",src:B.avatar?"https://nodebook-images.s3.amazonaws.com/"+B.avatar:Q,alt:""})}):Object(d.jsx)("div",{className:"not-a-link",children:Object(d.jsx)("img",{className:"post-avatar",src:B.avatar?"https://nodebook-images.s3.amazonaws.com/"+B.avatar:Q,alt:""})}),Object(d.jsxs)("div",{className:"post-top-center",children:[Object(d.jsxs)("div",{className:"post-info",children:[B.username?Object(d.jsx)(x.b,{to:"/profile/".concat(B.username),children:Object(d.jsx)("span",{className:"post-username",children:B.username})}):Object(d.jsx)("div",{className:"not-a-link",children:Object(d.jsx)("span",{className:"post-username",children:"Loading"})}),Object(d.jsx)("span",{className:"post-date",children:Object(C.a)(t.createdAt)})]}),Object(d.jsx)("span",{className:"post-body",children:null===t||void 0===t?void 0:t.body}),q&&Object(d.jsx)("div",{className:"post-edit-wrapper",children:Object(d.jsx)("div",{className:"post-edit-form-container",children:Object(d.jsxs)("form",{onSubmit:ue,children:[Object(d.jsx)("textarea",{className:"edit-input",type:"text",maxLength:500,ref:H,onChange:function(e){return te(e.target.value)},defaultValue:(null===t||void 0===t?void 0:t.body)?null===t||void 0===t?void 0:t.body:null}),Object(d.jsxs)("div",{className:"edit-form-buttons-container",children:[Object(d.jsx)("button",{disabled:ae,type:"submit",className:ae?"invalid":"edit-options-submit",children:"edit"}),Object(d.jsx)("button",{className:"edit-options-cancel",onClick:function(){return je()},children:"cancel"})]})]})})}),t.img&&Object(d.jsx)("div",{className:"post-img-wrapper",children:Object(d.jsx)("div",{className:"post-img-container",children:Object(d.jsx)("img",{className:"post-img",src:"https://nodebook-images.s3.amazonaws.com/"+t.img,alt:""})})}),t.edited&&Object(d.jsxs)("span",{className:"post-edit",children:["edit: ",Object(C.a)(t.editedtimestamp)]})]}),(B.username===M.username||M.isAdmin)&&Object(d.jsxs)("div",{className:"post-top-right",children:[Object(d.jsx)(I.a,{className:"post-options-icon",onClick:function(){return V(!R),q&&_(!q),void(U&&_(!U))}}),R&&!U&&!q&&Object(d.jsxs)("div",{className:"post-options-div",children:[Object(d.jsx)("button",{className:"post-options-delete",onClick:function(){return J(!U)},children:"delete post"}),Object(d.jsx)("button",{className:"post-options-edit",onClick:function(){return _(!q)},children:"edit post"})]})]})]}),Object(d.jsx)("div",{className:"post-bottom",children:Object(d.jsxs)("div",{className:"post-bottom-left",children:[m?Object(d.jsx)(E.a,{className:"like-icon liked",onClick:oe}):Object(d.jsx)(D.a,{className:"like-icon",onClick:oe}),Object(d.jsx)(x.b,{to:"/post/".concat(t._id,"/likes"),children:1===l?m?Object(d.jsx)("span",{className:"post-like-counter",children:"You like this"}):Object(d.jsx)("span",{className:"post-like-counter",children:"1 person likes this"}):l>1?m?2===l?Object(d.jsxs)("span",{className:"post-like-counter",children:["You and ",l-1," other person like this"]}):Object(d.jsxs)("span",{className:"post-like-counter",children:["You and ",l-1," other people like this"]}):Object(d.jsxs)("span",{className:"post-like-counter",children:[l," people like this"]}):Object(d.jsx)("span",{className:"post-like-counter",children:"Be the first to like this"})})]})})]}),Object(d.jsxs)("div",{className:"post-comments-container",children:[Object(d.jsxs)("div",{className:"post-comment-input-container",children:[Object(d.jsx)("textarea",{className:"comment-input",type:"text",ref:L,onChange:function(e){return re(e.target.value)},placeholder:"add a comment!",maxLength:500}),Object(d.jsx)("form",{onSubmit:le,className:"post-comment-button-container",children:Object(d.jsx)("button",{type:"submit",disabled:ie,className:ie?"invalid-comment-button comment-button":"comment-button",children:"comment"})})]}),w&&w.length>0&&"postPage"===a&&Object(d.jsx)("div",{className:"post-comments",children:w.map((function(e){return Object(d.jsx)(P,{comment:e,fetchNotifications:s,showDeletePost:U})}))}),w&&w.length>0&&w.length<3&&"timeline"===a&&Object(d.jsx)("div",{className:"post-comments",children:w.map((function(e){return Object(d.jsx)(P,{comment:e,fetchNotifications:s,showDeletePost:U})}))}),w&&w.length>2&&"timeline"===a&&Object(d.jsxs)("div",{className:"post-comments",children:[Object(d.jsx)(P,{comment:w[0],fetchNotifications:s,showDeletePost:U}),Object(d.jsx)("button",{className:"view-more-comments-button",style:c?{pointerEvents:"none"}:{},children:Object(d.jsxs)(x.b,{to:"/post/"+t._id,children:["View more comments ","("+t.comments.length+")"]})})]})]})]})]})}function M(e){var t=e.fetchNotifications,a=e.setSidebarOpen,s=e.setCurrentPage,c=Object(n.useState)(!0),r=Object(i.a)(c,2),l=r[0],u=r[1],j=Object(n.useState)([]),b=Object(i.a)(j,2),m=b[0],O=b[1],x=Object(n.useState)(0),v=Object(i.a)(x,2),g=v[0],A=v[1],w=Object(n.useContext)(p).user;Object(n.useEffect)((function(){s("Timeline")}));var y=w.username;Object(n.useEffect)((function(){var e=function(){var e=Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("https://radiant-oasis-77477.herokuapp.com/api/posts/timeline/".concat(w._id,"/").concat(g));case 2:t=e.sent,O([].concat(Object(o.a)(m),Object(o.a)(t.data))),setTimeout(Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(!1);case 1:case"end":return e.stop()}}),e)}))),500);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();y&&e()}),[y,w._id,g]);var S=function(e){var t=e.target;t.offsetHeight+t.scrollTop>.85*t.scrollHeight&&A(m.length)};return Object(d.jsx)("div",{className:"timeline",onScroll:S,onClick:function(){return a(!1)},children:Object(d.jsx)(d.Fragment,{children:l?Object(d.jsx)(k,{type:"full-screen"}):Object(d.jsx)("div",{onScroll:S,children:Object(d.jsxs)("div",{className:"timeline-wrapper",children:[(!y||y===w.username)&&Object(d.jsx)("div",{className:"share-desktop-container",children:Object(d.jsx)(B,{})}),m.map((function(e){return Object(d.jsx)(F,{post:e,page:"timeline",fetchNotifications:t},e._id)}))]})})})})}a(89);var L=a(128),H=a(129),W=a(18),Y=a.n(W);function G(e){var t=e.profileUser,a=e.currentPage,s=e.post,c=e.likesUser,r=e.postUser,o=e.comment,l=e.notificationsCount,u=e.sidebarOpen,j=e.setSidebarOpen,b=Object(v.g)().username,m=Object(n.useState)(!1),O=Object(i.a)(m,2),x=O[0],g=O[1],A=Object(n.useContext)(p),w=A.user,k=A.dispatch;Object(n.useEffect)((function(){var e=function(){var e=Object(h.a)(f.a.mark((function e(){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.followings.includes(null===t||void 0===t?void 0:t._id);case 2:a=e.sent,g(a);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}));var y=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("followed",x),e.prev=1,!x){e.next=9;break}return e.next=5,N.a.put("https://radiant-oasis-77477.herokuapp.com/api/users/".concat(t._id,"/unfollow"),{userId:w._id});case 5:k({type:"UNFOLLOW",payload:t._id});try{N.a.delete("https://radiant-oasis-77477.herokuapp.com/api/notifications/",{data:{sender:w._id,recipient:t._id,postId:null,commentId:null,type:"follow"}})}catch(a){}e.next=13;break;case 9:return e.next=11,N.a.put("https://radiant-oasis-77477.herokuapp.com/api/users/".concat(t._id,"/follow"),{userId:w._id});case 11:k({type:"FOLLOW",payload:t._id});try{N.a.post("https://radiant-oasis-77477.herokuapp.com/api/notifications/",{sender:w._id,recipient:t._id,postId:null,commentId:null,type:"follow",seen:!1})}catch(a){}case 13:g(!x),e.next=18;break;case 16:e.prev=16,e.t0=e.catch(1);case 18:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(){return e.apply(this,arguments)}}(),S=function(){return Object(d.jsx)("div",{className:"navbar",children:Object(d.jsxs)("div",{className:"navbar-container",children:[Object(d.jsx)("div",{className:"mobile-menu-button-container",children:Object(d.jsx)("div",{className:"hamburger",onClick:function(){return j(!u)},children:Object(d.jsx)(Y.a,{className:u?"hamburger-icon active":"hamburger-icon"})})}),Object(d.jsx)("span",{className:"nav-title",children:a})]})})},Q=function(){return Object(d.jsx)("div",{className:"navbar",children:Object(d.jsxs)("div",{className:"navbar-container",children:[Object(d.jsx)("div",{className:"mobile-menu-button-container",children:Object(d.jsx)("div",{className:"hamburger",onClick:function(){return j(!u)},children:Object(d.jsx)(Y.a,{className:u?"hamburger-icon active":"hamburger-icon"})})}),Object(d.jsxs)("span",{className:"nav-title",children:["Followers"===a&&Object(d.jsxs)(d.Fragment,{children:[a," "," (",w.followers.length,") "]}),"Following"===a&&Object(d.jsxs)(d.Fragment,{children:[a," "," (",w.followings.length,") "]})]})]})})},B=function(){return Object(d.jsx)("div",{className:"navbar",children:Object(d.jsxs)("div",{className:"navbar-container",children:[Object(d.jsx)("div",{className:"mobile-menu-button-container",children:Object(d.jsx)("div",{className:"hamburger",onClick:function(){return j(!u)},children:Object(d.jsx)(Y.a,{className:u?"hamburger-icon active":"hamburger-icon"})})}),t?Object(d.jsxs)("div",{className:"nav-info-container",children:[Object(d.jsx)("span",{className:"nav-title",children:t.username}),b!==w.username&&Object(d.jsxs)("button",{className:"follow-button",onClick:y,children:[x?"Unfollow":"Follow",x?Object(d.jsx)(L.a,{}):Object(d.jsx)(H.a,{})]})]}):Object(d.jsx)("span",{className:"nav-title",children:"Loading..."})]})})},C=function(){return Object(d.jsx)("div",{className:"navbar",children:Object(d.jsxs)("div",{className:"navbar-container",children:[Object(d.jsx)("div",{className:"mobile-menu-button-container",children:Object(d.jsx)("div",{className:"hamburger",onClick:function(){return j(!u)},children:Object(d.jsx)(Y.a,{className:u?"hamburger-icon active":"hamburger-icon"})})}),w?Object(d.jsx)("div",{className:"nav-info-container",children:Object(d.jsxs)("span",{className:"nav-title",children:[w.username," - update profile"]})}):Object(d.jsx)("span",{className:"nav-title",children:"Loading..."})]})})},I=function(){return Object(d.jsx)("div",{className:"navbar",children:Object(d.jsxs)("div",{className:"navbar-container",children:[Object(d.jsx)("div",{className:"mobile-menu-button-container",children:Object(d.jsx)("div",{className:"hamburger",onClick:function(){return j(!u)},children:Object(d.jsx)(Y.a,{className:u?"hamburger-icon active":"hamburger-icon"})})}),w?Object(d.jsx)("div",{className:"nav-info-container",children:Object(d.jsxs)("span",{className:"nav-title",children:["Notifications ","("+l+")"]})}):Object(d.jsx)("span",{className:"nav-title",children:"Loading..."})]})})},E=function(){return Object(d.jsx)("div",{className:"navbar",children:Object(d.jsxs)("div",{className:"navbar-container",children:[Object(d.jsx)("div",{className:"mobile-menu-button-container",children:Object(d.jsx)("div",{className:"hamburger",onClick:function(){return j(!u)},children:Object(d.jsx)(Y.a,{className:u?"hamburger-icon active":"hamburger-icon"})})}),w&&s?Object(d.jsx)("div",{className:"nav-info-container",children:Object(d.jsx)("span",{className:"nav-title",children:1===s.comments.length?Object(d.jsxs)(d.Fragment,{children:[r.username," -"," ","("+s.comments.length+" reply)"]}):Object(d.jsxs)(d.Fragment,{children:[r.username," -"," ","("+s.comments.length+" replies)"]})})}):Object(d.jsx)("span",{className:"nav-title",children:"Loading..."})]})})},D=function(){return Object(d.jsx)("div",{className:"navbar",children:Object(d.jsxs)("div",{className:"navbar-container",children:[Object(d.jsx)("div",{className:"mobile-menu-button-container",children:Object(d.jsx)("div",{className:"hamburger",onClick:function(){return j(!u)},children:Object(d.jsx)(Y.a,{className:u?"hamburger-icon active":"hamburger-icon"})})}),w&&o?Object(d.jsx)("div",{className:"nav-info-container",children:Object(d.jsx)("span",{className:"nav-title",children:1===o.likes.length?Object(d.jsxs)(d.Fragment,{children:[c.username," -"," ","("+o.likes.length+"  like)"]}):Object(d.jsxs)(d.Fragment,{children:[c.username," -"," ","("+o.likes.length+" likes)"]})})}):Object(d.jsx)("span",{className:"nav-title",children:"Loading..."})]})})},P=function(){return Object(d.jsx)("div",{className:"navbar",children:Object(d.jsxs)("div",{className:"navbar-container",children:[Object(d.jsx)("div",{className:"mobile-menu-button-container",children:Object(d.jsx)("div",{className:"hamburger",onClick:function(){return j(!u)},children:Object(d.jsx)(Y.a,{className:u?"hamburger-icon active":"hamburger-icon"})})}),w&&s?Object(d.jsx)("div",{className:"nav-info-container",children:Object(d.jsx)("span",{className:"nav-title",children:1===s.likes.length?Object(d.jsxs)(d.Fragment,{children:[c.username," - ","("+s.likes.length+" like)"]}):Object(d.jsxs)(d.Fragment,{children:[c.username," - ","("+s.likes.length+" likes)"]})})}):Object(d.jsx)("span",{className:"nav-title",children:"Loading..."})]})})};return Object(d.jsxs)(d.Fragment,{children:["Timeline"===a&&Object(d.jsx)(S,{}),"Profile"===a&&Object(d.jsx)(B,{}),"NotUsersProfile"===a&&Object(d.jsx)(B,{}),"Update"===a&&Object(d.jsx)(C,{}),"Followers"===a&&Object(d.jsx)(Q,{}),"Following"===a&&Object(d.jsx)(Q,{}),"Notifications"===a&&Object(d.jsx)(I,{}),"Post"===a&&Object(d.jsx)(E,{}),"CommentLikes"===a&&Object(d.jsx)(D,{}),"Explore"===a&&Object(d.jsx)(S,{}),"Share"===a&&Object(d.jsx)(S,{}),"PostLikes"===a&&Object(d.jsx)(P,{})]})}function R(e){var t=e.currentPage,a=e.setCurrentPage,n=e.fetchNotifications,s=e.sidebarOpen,c=e.setSidebarOpen;return Object(d.jsxs)("div",{className:"container",id:"container",children:[Object(d.jsx)(G,{currentPage:t,sidebarOpen:s,setSidebarOpen:c}),Object(d.jsx)(M,{setCurrentPage:a,fetchNotifications:n,setSidebarOpen:c})]})}a(94);var V=a(131),T=a(132),z=a(133),U=a(134),J=a(135),X=a(130);a(95);function Z(e){var t=e.image,a=(e.fetchNotifications,Object(n.useState)({})),s=Object(i.a)(a,2),c=s[0],r=s[1],o=(Object(n.useContext)(p).user,function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout(Object(h.a)(f.a.mark((function e(){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("https://radiant-oasis-77477.herokuapp.com/api/images/".concat(t._id));case 2:a=e.sent,r(a.data);case 4:case"end":return e.stop()}}),e)}))),500);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return Object(n.useEffect)((function(){o()}),[t]),Object(d.jsxs)("div",{className:"image-wrapper",children:[Object(d.jsx)("div",{className:"image-data-container",children:Object(d.jsxs)("div",{className:"image-data",children:[c.comments&&Object(d.jsxs)("div",{className:"image-data-noti-container",children:[c.comments.length," ",Object(d.jsx)(X.a,{className:"image-data-icon"})]}),c.likerIds&&Object(d.jsxs)("div",{className:"image-data-noti-container",children:[c.likerIds.length," ",Object(d.jsx)(E.a,{className:"image-data-icon"})]})]})}),c.img?Object(d.jsx)("img",{src:c.img?"https://nodebook-images.s3.amazonaws.com/"+c.img:Q,className:"profile-images-img",alt:""}):Object(d.jsx)(k,{type:" profile-image"})]})}a(96);function q(e){var t=e.friend,a=e.handleFollowingStatus,s=e.sidebarOpen,c=e.loadNewUser,r=Object(n.useContext)(p).user,o=Object(n.useState)(""),l=Object(i.a)(o,2),u=l[0],j=l[1],b=Object(n.useState)(!0),m=Object(i.a)(b,2),O=m[0],v=m[1];return Object(n.useEffect)((function(){var e=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout(Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t._id,e.next=3,r._id;case 3:if(e.t1=e.sent,e.t0!==e.t1){e.next=8;break}j("you"),e.next=9;break;case 8:!0===t.followingStatus&&!0===t.followerStatus?j("mutual following"):!1===t.followingStatus&&!0===t.followerStatus?j("follows you"):!0===t.followingStatus&&!1===t.followerStatus&&j("doesn't follow you");case 9:v(!1);case 10:case"end":return e.stop()}}),e)}))),1e3);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()})),Object(d.jsx)("div",{className:"you"!==u?"follow-container":"follow-container current-user-container",children:O?Object(d.jsx)(k,{type:"follower"}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(x.b,{to:"/profile/"+t.username,style:{textDecoration:"none"},onClick:function(){return c(t.username)},children:Object(d.jsxs)("div",{className:"follow-container-left",children:[Object(d.jsx)("img",{src:t.avatar?"https://nodebook-images.s3.amazonaws.com/"+t.avatar:Q,alt:"",className:"follow-img"}),Object(d.jsxs)("div",{className:"follow-user-info",children:[Object(d.jsx)("span",{className:"follow-username",children:t.username}),Object(d.jsxs)("span",{className:"follow-name",children:[t.firstname," ",t.lastname]})]})]})}),"you"!==u&&Object(d.jsxs)("div",{className:"follow-container-right",children:[Object(d.jsx)("span",{className:"follow-status-span",children:u}),Object(d.jsxs)("button",{disabled:s,className:"follow-button",onClick:function(){return a(t.followingStatus,t)},children:[t.followingStatus?"Unfollow ":"Follow ",t.followingStatus?Object(d.jsx)(L.a,{}):Object(d.jsx)(H.a,{})]})]})]})},t._id)}function _(e){var t=e.profileUser,a=e.feed,s=e.fetchNotifications,c=e.loading,r=e.posts,i=e.images,o=e.friends,l=e.handleFollowingStatus,u=e.sidebarOpen,j=e.loadNewUser,b=e.getInitialPosts,m=e.getInitialFollows,f=e.getInitialImages,O=e.setToInfo,h=Object(n.useContext)(p).user;return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"profile-feed",children:[Object(d.jsx)("div",{className:"profile-header",children:Object(d.jsx)("div",{className:"profile-header-wrapper",children:Object(d.jsxs)("div",{className:"profile-info",children:[Object(d.jsx)("h4",{className:"profile-info-username",children:t.username}),Object(d.jsxs)("span",{className:"profile-info-name",children:[t.firstname," ",t.lastname]})]})})}),Object(d.jsx)("div",{className:"profile-header-buttons-container",style:u?{pointerEvents:"none"}:{},children:Object(d.jsxs)("div",{className:"profile-header-buttons-wrapper",children:[Object(d.jsxs)("div",{onClick:function(){return O()},className:"profile-info-clickable "+("info"===a?"pic-active":""),children:[Object(d.jsx)("span",{className:"button-name",children:"info"}),Object(d.jsx)(V.a,{className:"profile-info-icon"})]}),Object(d.jsxs)("div",{onClick:function(){return b()},className:"profile-info-clickable "+("posts"===a?"pic-active":""),children:[Object(d.jsx)("span",{className:"count",children:t.posts?t.posts.length:"0"}),Object(d.jsx)("span",{className:"button-name",children:"posts"}),Object(d.jsx)(T.a,{className:"profile-info-icon"})]}),Object(d.jsxs)("div",{onClick:function(){return f()},className:"profile-info-clickable "+("images"===a?"pic-active":""),children:[Object(d.jsx)("span",{className:"count",children:t.images?t.images.length:"0"}),Object(d.jsx)("span",{className:"button-name",children:"images"}),Object(d.jsx)(z.a,{className:"profile-info-icon"})]}),Object(d.jsxs)("div",{onClick:function(){return m("followers")},className:"profile-info-clickable "+("followers"===a?"pic-active":""),children:[Object(d.jsx)("span",{className:"count",children:t.followers?t.followers.length:"0"}),Object(d.jsx)("span",{className:"button-name",children:"followers"}),Object(d.jsx)(U.a,{className:"profile-info-icon"})]}),Object(d.jsxs)("div",{onClick:function(){return m("following")},className:"profile-info-clickable "+("following"===a?"pic-active":""),children:[Object(d.jsx)("span",{className:"count",children:t.followings?t.followings.length:"0"}),Object(d.jsx)("span",{className:"button-name",children:"following"}),Object(d.jsx)(U.a,{className:"profile-info-icon"})]})]})}),c?Object(d.jsx)(k,{type:"center-feed"}):Object(d.jsxs)("div",{className:"feed",children:["info"===a&&Object(d.jsx)("div",{className:"feed-wrapper",children:Object(d.jsxs)("div",{className:"profileInfo-container",children:[h._id===t._id&&Object(d.jsx)(x.b,{to:"/".concat(h._id,"/update"),children:Object(d.jsx)("div",{title:"update user info",children:Object(d.jsx)(J.a,{className:"edit-icon"})})}),Object(d.jsxs)("div",{className:"profile-info-div",children:[Object(d.jsx)("div",{className:"profile-info-strong",children:"Name:"})," ",Object(d.jsxs)("div",{className:"profile-info-content",children:[t.firstname," ",t.lastname]})]}),Object(d.jsxs)("div",{className:"profile-info-div",children:[" ",Object(d.jsx)("div",{className:"profile-info-strong",children:"Bio:"})," ",Object(d.jsx)("div",{className:"profile-info-content",children:t.about})]}),Object(d.jsxs)("div",{className:"profile-info-div",children:[Object(d.jsx)("div",{className:"profile-info-strong",children:"Birthday:"})," ",Object(d.jsx)("div",{className:"profile-info-content",children:t.birthday?function(e){var t=e.split("-");return t[1]+"/"+t[2]+"/"+t[0]}(t.birthday):"private"})]}),Object(d.jsxs)("div",{className:"profile-info-div",children:[Object(d.jsx)("div",{className:"profile-info-strong",children:"Location:"})," ",Object(d.jsx)("div",{className:"profile-info-content",children:t.location?t.location:"private"})]}),Object(d.jsxs)("div",{className:"profile-info-div",children:[Object(d.jsx)("div",{className:"profile-info-strong",children:"Website:"})," ",Object(d.jsx)("div",{className:"profile-info-content",children:t.website?Object(d.jsx)("a",{href:t.website,target:"_blank",rel:"noopener noreferrer",className:"profile-website-a",children:t.website}):"private"})]})]})}),"posts"===a&&Object(d.jsxs)("div",{className:"feed-wrapper",children:[(!t.username||t.username===h.username)&&Object(d.jsx)("div",{className:"share-desktop-container",children:Object(d.jsx)(B,{})}),r.length>0&&!1===c?Object(d.jsx)("div",{className:"profile-posts-feed",children:r.map((function(e){return Object(d.jsx)(F,{post:e,page:"timeline",fetchNotifications:s},e._id)}))}):Object(d.jsx)("span",{className:"no-content-message",children:"No posts yet \u2639"})]}),"images"===a&&Object(d.jsx)("div",{className:"feed-wrapper",children:i.length>0&&!1===c?Object(d.jsx)("div",{className:"profile-images-feed",children:i.map((function(e){return Object(d.jsx)(Z,{image:e,page:"timeline",fetchNotifications:s},e._id)}))}):Object(d.jsx)("span",{className:"no-content-message",children:"No images yet \u2639"})}),"followers"===a&&Object(d.jsx)("div",{className:"feed-wrapper",children:o.length>0?Object(d.jsx)("div",{className:"profile-follows-feed",children:o.map((function(e){return Object(d.jsx)(q,{friend:e,loadNewUser:j,handleFollowingStatus:l})}))}):Object(d.jsx)("span",{className:"no-content-message",children:"Nothing to see here \u2639"})}),"following"===a&&Object(d.jsx)("div",{className:"feed-wrapper",children:o.length>0?Object(d.jsx)("div",{className:"profile-follows-feed",children:o.map((function(e){return Object(d.jsx)(q,{friend:e,loadNewUser:j,handleFollowingStatus:l})}))}):Object(d.jsx)("span",{className:"no-content-message",children:"Nothing to see here \u2639"})})]})]})})}var K=a.p+"static/media/cover.cfc827b9.png",$=a.p+"static/media/avatarCropper.4a059494.png",ee=a.p+"static/media/coverCropper.99f10cfc.png";a(97);function te(e){var t=e.currentPage,a=e.setCurrentPage,s=e.fetchNotifications,c=e.sidebarOpen,r=e.setSidebarOpen,l=Object(n.useState)({}),u=Object(i.a)(l,2),j=u[0],b=u[1],m=Object(v.g)().username,O=Object(n.useState)(!1),x=Object(i.a)(O,2),g=x[0],A=x[1],w=Object(n.useState)("posts"),B=Object(i.a)(w,2),C=B[0],I=B[1],E=Object(n.useContext)(p),D=E.user,P=E.dispatch,F=Object(n.useState)(0),M=Object(i.a)(F,2),L=M[0],H=M[1],W=Object(n.useState)(!0),Y=Object(i.a)(W,2),R=Y[0],V=Y[1],T=Object(n.useState)([]),z=Object(i.a)(T,2),U=z[0],X=z[1],Z=Object(n.useState)([]),q=Object(i.a)(Z,2),te=q[0],ae=q[1],ne=Object(n.useState)([]),se=Object(i.a)(ne,2),ce=se[0],re=se[1],ie=Object(n.useState)(!1),oe=Object(i.a)(ie,2),le=oe[0],ue=oe[1],de=Object(n.useState)(!1),je=Object(i.a)(de,2),pe=je[0],be=je[1],me=Object(n.useState)(null),fe=Object(i.a)(me,2),Oe=fe[0],he=fe[1],xe=""===Oe||null===Oe,ve=Object(n.useState)(!1),ge=Object(i.a)(ve,2),Ne=ge[0],Ae=ge[1];Object(n.useEffect)((function(){var e=function(){var e=Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.followings.includes(null===j||void 0===j?void 0:j._id);case 2:t=e.sent,A(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(e(),g)return null}));var we=function(){var e=Object(h.a)(f.a.mark((function e(t){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=function(){var e=Object(h.a)(f.a.mark((function e(){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("https://radiant-oasis-77477.herokuapp.com/api/users?username=".concat(t));case 2:a=e.sent,b(a.data),I("posts"),n(a.data.username);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n=function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout(Object(h.a)(f.a.mark((function e(){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("https://radiant-oasis-77477.herokuapp.com/api/posts/profile/".concat(t,"/0"));case 2:a=e.sent,X(a.data),V(!1);case 5:case"end":return e.stop()}}),e)}))),1e3);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V(!0),a();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:V(!0),X([]),ae([]),re([]),H(0),I("posts"),setTimeout(Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("https://radiant-oasis-77477.herokuapp.com/api/posts/profile/".concat(j.username,"/0"));case 2:t=e.sent,X(t.data),V(!1);case 5:case"end":return e.stop()}}),e)}))),1e3);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ye=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:V(!0),X([]),ae([]),re([]),H(0),I("images"),setTimeout(Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("https://radiant-oasis-77477.herokuapp.com/api/posts/profile/".concat(j.username,"/images/0"));case 2:t=e.sent,ae(t.data),V(!1);case 5:case"end":return e.stop()}}),e)}))),500);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Se=function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:V(!0),I(t),X([]),ae([]),re([]),H(0),setTimeout(Object(h.a)(f.a.mark((function e(){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.get("https://radiant-oasis-77477.herokuapp.com/api/users/".concat(j._id,"/").concat(t,"-profile/").concat(D._id,"/0"));case 3:a=e.sent,re(a.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:V(!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])}))),300);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qe=function(){var e=Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("https://radiant-oasis-77477.herokuapp.com/api/posts/profile/".concat(j.username,"/").concat(L));case 2:t=e.sent,X([].concat(Object(o.a)(U),Object(o.a)(t.data))),V(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Be=function(){var e=Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.get("https://radiant-oasis-77477.herokuapp.com/api/users/".concat(j._id,"/").concat(C,"-profile/").concat(D._id,"/").concat(L));case 3:t=e.sent,re([].concat(Object(o.a)(ce),Object(o.a)(t.data))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.get("https://radiant-oasis-77477.herokuapp.com/api/posts/profile/".concat(j.username,"/images/").concat(L));case 3:t=e.sent,ae([].concat(Object(o.a)(te),Object(o.a)(t.data))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I("info");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){we(m),m===D.username?a("Profile"):a("NotUsersProfile")}),[m]),Object(n.useEffect)((function(){"posts"===C&&j.username&&L>0&&Qe(),"followers"!==C&&"following"!==C||Be(),"images"===C&&Ce()}),[L]);var Ee=function(){var e=Object(h.a)(f.a.mark((function e(t,a){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=8;break}return e.next=4,N.a.put("https://radiant-oasis-77477.herokuapp.com/api/users/".concat(a._id,"/unfollow"),{userId:D._id});case 4:P({type:"UNFOLLOW",payload:a._id});try{N.a.delete("https://radiant-oasis-77477.herokuapp.com/api/notifications/",{data:{sender:D._id,recipient:a._id,postId:null,commentId:null,type:"follow"}})}catch(n){}e.next=12;break;case 8:return e.next=10,N.a.put("https://radiant-oasis-77477.herokuapp.com/api/users/".concat(a._id,"/follow"),{userId:D._id});case 10:P({type:"FOLLOW",payload:a._id});try{N.a.post("https://radiant-oasis-77477.herokuapp.com/api/notifications/",{sender:D._id,recipient:a._id,postId:null,commentId:null,type:"follow",seen:!1})}catch(n){}case 12:e.next=16;break;case 14:e.prev=14,e.t0=e.catch(0);case 16:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),n();case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),De=function(){var e=Object(h.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),Ae(!0),!Oe){e.next=14;break}return(a=new FormData).append("file",Oe),a.append("userId",D._id),e.prev=6,e.next=9,N.a.put("https://radiant-oasis-77477.herokuapp.com/api/users/avatar",a);case 9:window.location.reload(),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(6);case 14:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}(),Pe=function(){var e=Object(h.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),Ae(!0),!Oe){e.next=14;break}return(a=new FormData).append("file",Oe),a.append("userId",D._id),e.prev=6,e.next=9,N.a.put("https://radiant-oasis-77477.herokuapp.com/api/users/cover",a);case 9:window.location.reload(),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(6);case 14:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("div",{className:"container",id:"container",children:Object(d.jsxs)("div",{className:"profile-right",children:[Object(d.jsx)(G,{user:D,profileUser:j,currentPage:t,sidebarOpen:c,setSidebarOpen:r}),Object(d.jsxs)("div",{className:"profile-right-content",onClick:function(){return r(!1)},onScroll:function(e){var t=e.target;t.offsetHeight+t.scrollTop>.85*t.scrollHeight&&("posts"===C&&U.length>L+4?H(U.length):"posts"!==C&&ce.length>L+9?H(ce.length):"images"===C&&te.length>L+8&&H(te.length))},children:[le&&(Ne?Object(d.jsxs)("div",{className:"avatar-modal-wrapper",children:[Object(d.jsx)("div",{className:"avatar-modal-container",children:Object(d.jsx)(k,{})}),Object(d.jsx)("div",{className:"modal-background"})]}):Object(d.jsxs)("div",{className:"avatar-modal-wrapper",children:[Object(d.jsxs)("div",{className:"avatar-modal-container",children:[Oe&&Object(d.jsxs)("div",{className:"avatar-modal-img-container",children:[Object(d.jsx)("img",{className:"avatar-modal-cropper",src:$,alt:""}),Object(d.jsx)("img",{className:"avatar-modal-img",src:URL.createObjectURL(Oe),alt:""}),Object(d.jsx)(y.a,{className:"avatar-modal-cancel-img",onClick:function(){return he("")}})]}),Object(d.jsx)("div",{className:"avatar-modal-bottom-container",children:Object(d.jsxs)("form",{className:"avatar-modal-bottom",onSubmit:De,encType:"multipart/form-data",children:[Object(d.jsx)("div",{className:"avatar-modal-options",children:Object(d.jsxs)("label",{htmlFor:"file",className:"avatar-modal-option",children:[Object(d.jsx)(S.a,{className:"file-icon"}),Object(d.jsx)("span",{className:"avatar-modal-option-text",children:"Select a new avatar"}),Object(d.jsx)("input",{style:{display:"none"},type:"file",id:"file",name:"file",accept:".png,.jpeg,.jpg",onChange:function(e){return he(e.target.files[0])}})]})}),Object(d.jsx)("button",{type:"submit",className:xe?"save-button invalid-save-button":"save-button",disabled:xe,children:"save"})]})})]}),Ne?Object(d.jsx)("div",{className:"modal-background"}):Object(d.jsx)("div",{className:"modal-background",onClick:function(){return ue(!1)}})]})),pe&&(Ne?Object(d.jsxs)("div",{className:"avatar-modal-wrapper",children:[Object(d.jsx)("div",{className:"avatar-modal-container",children:Object(d.jsx)(k,{})}),Object(d.jsx)("div",{className:"modal-background"})]}):Object(d.jsxs)("div",{className:"avatar-modal-wrapper",children:[Object(d.jsxs)("div",{className:"avatar-modal-container",children:[Oe&&Object(d.jsxs)("div",{className:"cover-modal-img-container",children:[Object(d.jsx)("img",{className:"cover-modal-cropper",src:ee,alt:""}),Object(d.jsx)("img",{className:"cover-modal-img",src:URL.createObjectURL(Oe),alt:""}),Object(d.jsx)(y.a,{className:"cover-modal-cancel-img",onClick:function(){return he("")}})]}),Object(d.jsx)("div",{className:"avatar-modal-bottom-container",children:Object(d.jsxs)("form",{className:"avatar-modal-bottom",onSubmit:Pe,encType:"multipart/form-data",children:[Object(d.jsx)("div",{className:"avatar-modal-options",children:Object(d.jsxs)("label",{htmlFor:"file",className:"avatar-modal-option",children:[Object(d.jsx)(S.a,{className:"file-icon"}),Object(d.jsx)("span",{className:"avatar-modal-option-text",children:"Select a new cover"}),Object(d.jsx)("input",{style:{display:"none"},type:"file",id:"file",name:"file",accept:".png,.jpeg,.jpg",onChange:function(e){return he(e.target.files[0])}})]})}),Object(d.jsx)("button",{type:"submit",className:xe?"save-button invalid-save-button":"save-button",disabled:xe,children:"save"})]})})]}),Ne?Object(d.jsx)("div",{className:"modal-background"}):Object(d.jsx)("div",{className:"modal-background",onClick:function(){return be(!1)}})]})),Object(d.jsx)("div",{className:"profile-right-top",children:Object(d.jsxs)("div",{className:"profile-cover",children:[Object(d.jsxs)("div",{className:"cover-img-container",children:[Object(d.jsx)("img",{className:"profile-cover-img",src:j.cover?"https://nodebook-images.s3.amazonaws.com/"+j.cover:K,alt:""}),m===D.username&&Object(d.jsx)("div",{className:"edit-icon-container",title:"update cover image",onClick:function(){return be(!0)},children:Object(d.jsx)(J.a,{className:"edit-icon"})})]}),m===D.username?Object(d.jsxs)("div",{className:"profile-img-container",onClick:function(){return ue(!0)},children:[Object(d.jsx)("div",{className:"plus-sign-container",title:"update avatar",children:Object(d.jsx)("img",{className:"profile-avatar-plus",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANYAAADWCAYAAACt43wuAAAACXBIWXMAAC4jAAAuIwF4pT92AAAGWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDggNzkuMTY0MDM2LCAyMDE5LzA4LzEzLTAxOjA2OjU3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjEuMSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIxLTA3LTA1VDExOjI0OjQxLTA0OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMS0wNy0wNVQxMTozOTowNS0wNDowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMS0wNy0wNVQxMTozOTowNS0wNDowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozNGFkMDdhYS1jYzBiLTM5NDItYjAzYy1hMTFmODFjN2ZkYTUiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDoyNWNiZTk3ZC1hODIxLTViNGItYWExOC03NzBiYmYyZGU1NmYiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDphYmIxZmUyZi1lNWFhLThlNDMtYjRlNi01OTI0MWNlNDVjZDMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmFiYjFmZTJmLWU1YWEtOGU0My1iNGU2LTU5MjQxY2U0NWNkMyIgc3RFdnQ6d2hlbj0iMjAyMS0wNy0wNVQxMToyNDo0MS0wNDowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjEgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjb252ZXJ0ZWQiIHN0RXZ0OnBhcmFtZXRlcnM9ImZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjM0YWQwN2FhLWNjMGItMzk0Mi1iMDNjLWExMWY4MWM3ZmRhNSIgc3RFdnQ6d2hlbj0iMjAyMS0wNy0wNVQxMTozOTowNS0wNDowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjEgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqD0V30AAAqISURBVHic7d3tcdvGGobhW2fyP3AHVAd0BaIriFxBqAoiVWC7AskViK7ASgWhKzA7EDswUoHOj6WOlROLInb3xYd5XzMezZDE7isLD3exBIGTh4cHJNX1n6ELkH5GBksKYLCkAAZLCmCw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",alt:""})}),Object(d.jsx)("img",{className:"profile-avatar",src:j.avatar?"https://nodebook-images.s3.amazonaws.com/"+j.avatar:Q,alt:""})]}):Object(d.jsx)("div",{className:"profile-img-container",children:Object(d.jsx)("img",{className:"profile-avatar",src:j.avatar?"https://nodebook-images.s3.amazonaws.com/"+j.avatar:Q,alt:""})})]})}),Object(d.jsx)("div",{className:"profile-right-bottom",children:Object(d.jsx)(_,{profileUser:j,feed:C,fetchNotifications:s,loading:R,posts:U,images:te,friends:ce,handleFollowingStatus:Ee,sidebarOpen:c,loadNewUser:we,getInitialPosts:ke,getInitialFollows:Se,getInitialImages:ye,setToInfo:Ie})})]})]})})})}a(29),a(98);function ae(e){var t=e.currentPage,a=e.setCurrentPage,s=e.follow,c=e.sidebarOpen,r=e.setSidebarOpen,l=Object(n.useState)(!0),u=Object(i.a)(l,2),j=u[0],b=u[1],m=Object(n.useState)([]),O=Object(i.a)(m,2),x=O[0],v=O[1],g=Object(n.useState)(0),A=Object(i.a)(g,2),w=A[0],y=A[1],S=Object(n.useContext)(p),Q=S.user,B=S.dispatch;Object(n.useEffect)((function(){a(s)}));var C=function(){var e=Object(h.a)(f.a.mark((function e(t,a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=8;break}return e.next=4,N.a.put("https://radiant-oasis-77477.herokuapp.com/api/users/".concat(a._id,"/unfollow"),{userId:Q._id});case 4:B({type:"UNFOLLOW",payload:a._id});try{N.a.delete("https://radiant-oasis-77477.herokuapp.com/api/notifications/",{data:{sender:Q._id,recipient:a._id,postId:null,commentId:null,type:"follow"}})}catch(n){}e.next=12;break;case 8:return e.next=10,N.a.put("https://radiant-oasis-77477.herokuapp.com/api/users/".concat(a._id,"/follow"),{userId:Q._id});case 10:B({type:"FOLLOW",payload:a._id});try{N.a.post("https://radiant-oasis-77477.herokuapp.com/api/notifications/",{sender:Q._id,recipient:a._id,postId:null,commentId:null,type:"follow",seen:!1})}catch(n){}case 12:e.next=16;break;case 14:e.prev=14,e.t0=e.catch(0);case 16:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,a){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){var e=function(){var e=Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.get("https://radiant-oasis-77477.herokuapp.com/api/users/".concat(Q._id,"/").concat(s,"/").concat(w));case 3:t=e.sent,v([].concat(Object(o.a)(x),Object(o.a)(t.data))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:b(!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[w]),Object(n.useEffect)((function(){var e=function(){var e=Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.get("https://radiant-oasis-77477.herokuapp.com/api/users/".concat(Q._id,"/").concat(s,"/0"));case 3:t=e.sent,v(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:b(!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[Q,t]);return Object(d.jsx)("div",{className:"followfeed",onScroll:function(e){var t=e.target;t.offsetHeight+t.scrollTop>.9*t.scrollHeight&&y(x.length)},onClick:function(){return r(!1)},children:j?Object(d.jsx)(k,{type:"full-screen"}):Object(d.jsx)("div",{className:"followfeed-wrapper",children:x.length>0?Object(d.jsx)(d.Fragment,{children:x.map((function(e){return Object(d.jsx)(q,{friend:e,handleFollowingStatus:C,sidebarOpen:c})}))}):Object(d.jsx)(d.Fragment,{children:"Following"===s?Object(d.jsx)("span",{className:"no-explore-message",children:"Find users to follow in the Explore tab!"}):Object(d.jsx)("span",{className:"no-explore-message",children:"No followers yet!"})})})})}function ne(e){var t=e.currentPage,a=e.setCurrentPage,n=e.follow,s=e.sidebarOpen,c=e.setSidebarOpen;return Object(d.jsxs)("div",{className:"container",id:"container",children:[Object(d.jsx)(G,{currentPage:t,sidebarOpen:s,setSidebarOpen:c}),Object(d.jsx)(ae,{follow:n,currentPage:t,setCurrentPage:a,setSidebarOpen:c,sidebarOpen:s})]})}function se(e){var t=e.post,a=e.comments,s=e.page,c=e.fetchNotifications,r=e.sidebarOpen,o=e.user,l=Object(n.useState)(t.likerIds.length),u=Object(i.a)(l,2),j=u[0],b=u[1],m=Object(n.useState)(!1),O=Object(i.a)(m,2),g=O[0],A=O[1],w=Object(n.useContext)(p).user,k=Object(n.useRef)(),y=Object(n.useRef)(),S=Object(v.f)(),B=Object(n.useState)(!1),F=Object(i.a)(B,2),M=F[0],L=F[1],H=Object(n.useState)(!1),W=Object(i.a)(H,2),Y=W[0],G=W[1],R=Object(n.useState)(!1),V=Object(i.a)(R,2),T=V[0],z=V[1],U=Object(n.useState)(""),J=Object(i.a)(U,2),X=J[0],Z=J[1],q=""===X||X===t.body,_=Object(n.useState)(""),K=Object(i.a)(_,2),$=K[0],ee=K[1],te=""===$;Object(n.useEffect)((function(){A(t.likerIds.includes(w._id))}),[w._id,t.likerIds]);var ae=function(){try{N.a.put("https://radiant-oasis-77477.herokuapp.com/api/posts/".concat(t._id,"/like"),{userId:w._id,postId:t._id})}catch(e){}if(b(g?j-1:j+1),A(!g),g){if(g)try{N.a.delete("https://radiant-oasis-77477.herokuapp.com/api/notifications/",{data:{sender:w._id,recipient:o._id,postId:t._id,commentId:null,type:"postLike"}})}catch(e){}}else try{N.a.post("https://radiant-oasis-77477.herokuapp.com/api/notifications/",{sender:w._id,recipient:o._id,postId:t._id,commentId:null,type:"postLike",seen:!1})}catch(e){}c()},ne=function(){var e=Object(h.a)(f.a.mark((function e(a){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n={userId:w._id,body:k.current.value,postId:t._id,sender:w._id,recipient:o._id,type:"comment",seen:!1},e.prev=2,e.next=5,N.a.post("https://radiant-oasis-77477.herokuapp.com/api/posts/".concat(t._id,"/comment"),n);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:window.location.reload(),c();case 11:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=Object(h.a)(f.a.mark((function e(a){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n={userId:w._id,body:y.current.value,edited:!0,editedtimestamp:Date.now()},e.prev=2,e.next=5,N.a.put("https://radiant-oasis-77477.herokuapp.com/api/posts/".concat(t._id),n);case 5:window.location.reload(),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(2);case 10:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.delete("https://radiant-oasis-77477.herokuapp.com/api/posts/".concat(t._id,"/"),{data:{userId:w._id}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),alert(e.t0);case 8:L(!M),G(!Y),c(),S("/",{replace:!0}),window.location.reload();case 13:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),re=function(){z(!1),L(!1),G(!1)};return Object(d.jsxs)("div",{className:"post",children:[Y&&Object(d.jsxs)("div",{className:"delete-post-container",children:[Object(d.jsx)("span",{className:"delete-post-message",children:"Are you sure you want to delete this post?"}),Object(d.jsxs)("div",{className:"delete-post-button-container",children:[Object(d.jsx)("button",{className:"delete-button",onClick:function(){return ce()},children:"DELETE"}),Object(d.jsx)("button",{className:"cancel-button",onClick:function(){return re()},children:"Cancel"})]})]}),Object(d.jsxs)("div",{className:"post-wrapper",style:r?{pointerEvents:"none"}:{},children:[Object(d.jsxs)("div",{className:"post-upper",children:[Object(d.jsxs)("div",{className:"post-top",children:[Object(d.jsx)(x.b,{to:"/profile/".concat(o.username),children:Object(d.jsx)("img",{className:"post-avatar",src:o.avatar?"https://nodebook-images.s3.amazonaws.com/"+o.avatar:Q,alt:""})}),Object(d.jsxs)("div",{className:"post-top-center",children:[Object(d.jsxs)("div",{className:"post-info",children:[Object(d.jsx)(x.b,{to:"/profile/".concat(o.username),children:Object(d.jsx)("span",{className:"post-username",children:o.username})}),Object(d.jsx)("span",{className:"post-date",children:Object(C.a)(t.createdAt)})]}),Object(d.jsx)("span",{className:"post-body",children:null===t||void 0===t?void 0:t.body}),T&&Object(d.jsx)("div",{className:"post-edit-wrapper",children:Object(d.jsx)("div",{className:"post-edit-form-container",children:Object(d.jsxs)("form",{onSubmit:se,children:[Object(d.jsx)("textarea",{className:"edit-input",type:"text",maxLength:500,ref:y,onChange:function(e){return Z(e.target.value)},defaultValue:(null===t||void 0===t?void 0:t.body)?null===t||void 0===t?void 0:t.body:null}),Object(d.jsxs)("div",{className:"edit-form-buttons-container",children:[Object(d.jsx)("button",{disabled:q,type:"submit",className:q?"invalid":"edit-options-submit",children:"edit"}),Object(d.jsx)("button",{className:"edit-options-cancel",onClick:function(){return re()},children:"cancel"})]})]})})}),t.img&&Object(d.jsx)("div",{className:"post-img-wrapper",children:Object(d.jsx)("div",{className:"post-img-container",children:Object(d.jsx)("img",{className:"post-img",src:"https://nodebook-images.s3.amazonaws.com/"+t.img,alt:""})})}),t.edited&&Object(d.jsxs)("span",{className:"post-edit",children:["edit: ",Object(C.a)(t.editedtimestamp)]})]}),(o.username===w.username||w.isAdmin)&&Object(d.jsxs)("div",{className:"post-top-right",children:[Object(d.jsx)(I.a,{className:"post-options-icon",onClick:function(){return L(!M),T&&z(!T),void(Y&&z(!Y))}}),M&&!Y&&!T&&Object(d.jsxs)("div",{className:"post-options-div",children:[Object(d.jsx)("button",{className:"post-options-delete",onClick:function(){return G(!Y)},children:"delete post"}),Object(d.jsx)("button",{className:"post-options-edit",onClick:function(){return z(!T)},children:"edit post"})]})]})]}),Object(d.jsx)("div",{className:"post-bottom",children:Object(d.jsxs)("div",{className:"post-bottom-left",children:[g?Object(d.jsx)(E.a,{className:"like-icon liked",onClick:ae}):Object(d.jsx)(D.a,{className:"like-icon",onClick:ae}),Object(d.jsx)(x.b,{to:"/".concat(t._id,"/likes"),children:1===j?g?Object(d.jsx)("span",{className:"post-like-counter",children:"You like this"}):Object(d.jsx)("span",{className:"post-like-counter",children:"1 person likes this"}):j>1?g?2===j?Object(d.jsxs)("span",{className:"post-like-counter",children:["You and ",j-1," other person like this"]}):Object(d.jsxs)("span",{className:"post-like-counter",children:["You and ",j-1," other people like this"]}):Object(d.jsxs)("span",{className:"post-like-counter",children:[j," people like this"]}):Object(d.jsx)("span",{className:"post-like-counter",children:"Be the first to like this"})})]})})]}),Object(d.jsxs)("div",{className:"post-comments-container",children:[Object(d.jsxs)("div",{className:"post-comment-input-container",children:[Object(d.jsx)("textarea",{className:"comment-input",type:"text",ref:k,onChange:function(e){return ee(e.target.value)},placeholder:"add a comment!",maxLength:500}),Object(d.jsx)("form",{onSubmit:ne,className:"post-comment-button-container",children:Object(d.jsx)("button",{type:"submit",disabled:te,className:te?"invalid-comment-button comment-button":"comment-button",children:"comment"})})]}),a&&a.length>0&&"postPage"===s&&Object(d.jsx)("div",{className:"post-comments",children:a.map((function(e){return Object(d.jsx)(P,{comment:e,fetchNotifications:c,showDeletePost:Y})}))}),a&&a.length>0&&a.length<3&&"timeline"===s&&Object(d.jsx)("div",{className:"post-comments",children:a.map((function(e){return Object(d.jsx)(P,{comment:e,fetchNotifications:c,showDeletePost:Y})}))}),a&&a.length>2&&"timeline"===s&&Object(d.jsxs)("div",{className:"post-comments",children:[Object(d.jsx)(P,{comment:a[0],fetchNotifications:c,showDeletePost:Y}),Object(d.jsx)("button",{className:"view-more-comments-button",style:r?{pointerEvents:"none"}:{},children:Object(d.jsxs)(x.b,{to:"/post/"+t._id,children:["View more comments ","("+t.comments.length+")"]})})]})]})]})]})}function ce(e){var t=e.post,a=e.fetchNotifications,s=e.sidebarOpen,c=e.setSidebarOpen,r=Object(n.useState)(!0),l=Object(i.a)(r,2),u=l[0],j=l[1],p=Object(n.useState)(0),b=Object(i.a)(p,2),m=b[0],O=b[1],x=Object(n.useState)([]),v=Object(i.a)(x,2),g=v[0],A=v[1],w=Object(n.useState)({}),y=Object(i.a)(w,2),S=y[0],Q=y[1];Object(n.useEffect)((function(){t&&C()}),[t]);var B=function(){var e=Object(h.a)(f.a.mark((function e(){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=function(){var e=Object(h.a)(f.a.mark((function e(){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(0),e.next=3,N.a.get("https://radiant-oasis-77477.herokuapp.com/api/posts/".concat(t._id,"/comments/0"));case 3:a=e.sent,A(a.data.sort((function(e,t){return new Date(e.createdAt)-new Date(t.createdAt)}))),setTimeout(Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j(!1);case 1:case"end":return e.stop()}}),e)}))),1e3);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.comments&&t._id&&a();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(h.a)(f.a.mark((function e(){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("https://radiant-oasis-77477.herokuapp.com/api/users?userId=".concat(t.userId));case 2:a=e.sent,Q(a.data),B();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(h.a)(f.a.mark((function e(){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("https://radiant-oasis-77477.herokuapp.com/api/posts/".concat(t._id,"/comments/").concat(m));case 2:a=e.sent,A([].concat(Object(o.a)(g),Object(o.a)(a.data))),j(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){I()}),[m]),Object(d.jsx)("div",{className:"timeline",onClick:function(){c(!1)},onScroll:function(e){var t=e.target;t.offsetHeight+t.scrollTop>.85*t.scrollHeight&&O(g.length)},children:Object(d.jsx)(d.Fragment,{children:u?Object(d.jsx)(k,{type:"full-screen"}):Object(d.jsx)("div",{children:Object(d.jsx)("div",{className:"timeline-wrapper",children:Object(d.jsx)(se,{post:t,user:S,comments:g,page:"postPage",fetchNotifications:a,sidebarOpen:s,getInitialComments:B},t._id)})})})})}a(99);function re(e){var t=e.currentPage,a=e.setCurrentPage,s=e.fetchNotifications,c=e.sidebarOpen,r=e.setSidebarOpen,o=Object(v.g)().postId,l=Object(n.useState)(""),u=Object(i.a)(l,2),j=u[0],p=u[1],b=Object(n.useState)({}),m=Object(i.a)(b,2),O=m[0],x=m[1];a("Post");var g=function(){var e=Object(h.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("https://radiant-oasis-77477.herokuapp.com/api/posts/".concat(o));case 2:return t=e.sent,p(t.data),e.next=6,N.a.get("https://radiant-oasis-77477.herokuapp.com/api/users?userId=".concat(t.data.userId));case 6:a=e.sent,x(a.data);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){g()}),[o]),Object(d.jsxs)("div",{className:"container",id:"container",children:[Object(d.jsx)(G,{postUser:O,post:j,currentPage:t,setSidebarOpen:r,sidebarOpen:c}),Object(d.jsx)(ce,{post:j,fetchNotifications:s,setSidebarOpen:r,sidebarOpen:c})]})}a(45);var ie=a(136),oe=a.p+"static/media/wordmark.eff11fb7.png";function le(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(!1),r=Object(i.a)(c,2),o=r[0],l=r[1],u=Object(v.f)(),j=Object(n.useRef)(),b=Object(n.useRef)(),m=Object(n.useContext)(p),O=m.isFetching,g=m.dispatch,A=function(){var e=Object(h.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),l(!0),e.prev=2,g({type:"LOGIN_START"}),e.prev=4,e.next=7,N.a.post("https://radiant-oasis-77477.herokuapp.com/api/auth/login",{usermail:j.current.value,password:b.current.value});case 7:a=e.sent,g({type:"LOGIN_SUCCESS",payload:a.data}),l(!1),u("/",{replace:!0}),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(4),s(!0),g({type:"LOGIN_FAILURE",payload:e.t0}),l(!1);case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(2),console.log(e.t1);case 23:case"end":return e.stop()}}),e,null,[[2,20],[4,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsx)(d.Fragment,{children:o?Object(d.jsx)(k,{type:"full-screen"}):Object(d.jsxs)("div",{className:"login-container",children:[Object(d.jsxs)("div",{className:"login-left",children:[Object(d.jsx)("div",{className:"glow"}),Object(d.jsx)("img",{className:"wordmark",src:oe,alt:""})]}),Object(d.jsxs)("div",{className:"login-right",children:[Object(d.jsx)("div",{className:"login-form",children:Object(d.jsxs)("form",{onSubmit:A,children:[Object(d.jsx)("div",{children:Object(d.jsx)("input",{className:"form-input",type:"text",placeholder:"Username or email",ref:j,required:!0})}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{className:"form-input",placeholder:"Password",type:"password",ref:b,required:!0})}),Object(d.jsx)("button",{type:"submit",disabled:O,children:O?Object(d.jsx)(ie.a,{color:"white",size:"20px"}):"Login"})]})}),Object(d.jsxs)("div",{className:"login-sub-container",children:[Object(d.jsxs)("p",{className:"dont-have-an-account",children:["Don't have an account?",Object(d.jsx)(x.b,{to:"/signup",children:" Sign-up"})]}),a&&Object(d.jsx)("span",{className:"error-span",children:"Username or password incorrect"})]})]})]})})}function ue(e){e.setUserAuth;var t=Object(v.f)(),a=Object(n.useRef)(),s=Object(n.useRef)(),c=Object(n.useRef)(),r=Object(n.useRef)(),i=Object(n.useRef)(),o=Object(n.useRef)(),l=function(){var e=Object(h.a)(f.a.mark((function e(n){var l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),o.current.value===i.current.value){e.next=5;break}o.current.setCustomValidity("Passwords don't match!"),e.next=15;break;case 5:return l={firstname:a.current.value,lastname:s.current.value,username:c.current.value,email:r.current.value,password:i.current.value},e.prev=6,e.next=9,N.a.post("https://radiant-oasis-77477.herokuapp.com/api/auth/register",l);case 9:t("/login",{replace:!0}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"login-container",children:[Object(d.jsxs)("div",{className:"login-left",children:[Object(d.jsx)("div",{className:"glow"}),Object(d.jsx)("img",{className:"wordmark",src:oe,alt:""})]}),Object(d.jsxs)("div",{className:"login-right",children:[Object(d.jsx)("div",{className:"login-form",children:Object(d.jsxs)("form",{onSubmit:l,children:[Object(d.jsx)("div",{children:Object(d.jsx)("input",{className:"form-input",type:"text",placeholder:"First name",ref:a})}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{className:"form-input",type:"text",placeholder:"Last name",ref:s})}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{className:"form-input",type:"text",placeholder:"Username",ref:c})}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{className:"form-input",type:"email",placeholder:"Email address",ref:r})}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{className:"form-input",placeholder:"Password",type:"password",ref:i})}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{className:"form-input",placeholder:"Confirm password",type:"password",ref:o})}),Object(d.jsx)("button",{type:"submit",children:"Sign up"})]})}),Object(d.jsx)("div",{className:"login-sub-container",children:Object(d.jsxs)("p",{className:"dont-have-an-account",children:["Already have an account?",Object(d.jsx)(x.b,{to:"/login",children:" Login"})]})})]})]})}a(100);var de=function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"LOGOUT",payload:null});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function je(){var e=Object(n.useRef)(),t=Object(n.useRef)(),a=Object(n.useRef)(),s=Object(n.useRef)(),c=Object(n.useRef)(),r=Object(n.useRef)(),o=Object(n.useRef)(),l=Object(n.useRef)(),u=Object(v.f)(),j=Object(n.useContext)(p),b=j.user,m=j.dispatch,O=Object(n.useState)(""),x=Object(i.a)(O,2),g=x[0],A=x[1],w=Object(n.useState)(!1),k=Object(i.a)(w,2),y=k[0],S=k[1],Q=Object(n.useState)(""),B=Object(i.a)(Q,2),C=B[0],I=B[1];Object(n.useEffect)((function(){var e=function(){var e=Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.get("https://radiant-oasis-77477.herokuapp.com/api/users?username=".concat(b.username));case 3:t=e.sent,A(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var E=function(){var n=Object(h.a)(f.a.mark((function n(i){var d;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i.preventDefault(),d={firstname:e.current.value,lastname:t.current.value,username:a.current.value,email:s.current.value,about:c.current.value,location:r.current.value,website:o.current.value,birthday:l.current.value,userId:g._id},n.prev=2,n.next=5,N.a.put("https://radiant-oasis-77477.herokuapp.com/api/users/".concat(g._id),d);case 5:S(!1),I(""),b.username===a.current.value?u("/",{replace:!0}):(alert("You're new username is ".concat(a.current.value)),localStorage.clear(),de(m),u("/login",{replace:!0})),n.next=15;break;case 10:n.prev=10,n.t0=n.catch(2),console.log(n.t0.response.data.msg),S(!0),I(n.t0.response.data.msg);case 15:case"end":return n.stop()}}),n,null,[[2,10]])})));return function(e){return n.apply(this,arguments)}}();return Object(d.jsx)("div",{className:"update-user-page",children:Object(d.jsx)("div",{className:"update-form",children:Object(d.jsxs)("form",{onSubmit:E,children:[Object(d.jsxs)("div",{className:"update-item-div",children:[Object(d.jsx)("label",{htmlFor:"firstname",className:"update-label",children:"First name:"}),Object(d.jsx)("input",{className:"update-form-input",type:"text",placeholder:"First name",ref:e,defaultValue:g.firstname?g.firstname:null})]}),Object(d.jsxs)("div",{className:"update-item-div",children:[Object(d.jsx)("label",{htmlFor:"lastname",className:"update-label",children:"Last name:"}),Object(d.jsx)("input",{className:"update-form-input",type:"text",placeholder:"Last name",ref:t,defaultValue:g.lastname?g.lastname:null})]}),Object(d.jsxs)("div",{className:"update-item-div",children:[Object(d.jsx)("label",{htmlFor:"username",className:"update-label",children:"Username:"}),Object(d.jsx)("input",{className:"update-form-input",type:"text",placeholder:"Username",ref:a,defaultValue:g.username?g.username:null})]}),Object(d.jsxs)("div",{className:"update-item-div",children:[Object(d.jsx)("label",{htmlFor:"email",className:"update-label",children:"Email:"}),Object(d.jsx)("input",{className:"update-form-input",type:"email",placeholder:"Email address",ref:s,defaultValue:g.email?g.email:null})]}),Object(d.jsxs)("div",{className:"update-item-div",children:[Object(d.jsx)("label",{htmlFor:"bio",className:"update-label",children:"Bio:"}),Object(d.jsx)("textarea",{className:"update-form-textarea",placeholder:"About",type:"text",ref:c,defaultValue:g.about?g.about:null})]}),Object(d.jsxs)("div",{className:"update-item-div",children:[Object(d.jsx)("label",{htmlFor:"location",className:"update-label",children:"Location:"}),Object(d.jsx)("input",{className:"update-form-input",placeholder:"Location",type:"text",ref:r,defaultValue:g.location?g.location:null})]}),Object(d.jsxs)("div",{className:"update-item-div",children:[Object(d.jsx)("label",{htmlFor:"website",className:"update-label",children:"Website:"}),Object(d.jsx)("input",{className:"update-form-input",placeholder:"Website",type:"text",ref:o,defaultValue:g.website?g.website:null})]}),Object(d.jsxs)("div",{className:"update-item-div",children:[Object(d.jsx)("label",{htmlFor:"birthday",className:"update-label",children:"Birthday:"}),Object(d.jsx)("input",{className:"update-form-input",placeholder:"Website",type:"date",ref:l,defaultValue:g.birthday?g.birthday:null})]}),Object(d.jsx)("div",{className:"message-before-update-button",children:Object(d.jsxs)("span",{children:[Object(d.jsx)("span",{className:"info-icon",children:"\u24d8"})," If you are changing your username you will be logged out after updating"]})}),y&&Object(d.jsx)("div",{className:"error-msg",children:Object(d.jsx)("span",{children:C})}),Object(d.jsx)("button",{type:"submit",children:"Update"})]})})})}function pe(e){var t=e.user,a=e.currentPage,n=e.setCurrentPage,s=e.updateType;return n("Update"),Object(d.jsxs)("div",{className:"container",id:"container",children:[Object(d.jsx)(G,{user:t,currentPage:a}),"user"===s&&Object(d.jsx)(je,{user:t})]})}a(101);function be(e){var t=e.liker,a=e.handleFollowingStatus,s=e.sidebarOpen,c=Object(n.useContext)(p).user,r=Object(n.useState)(""),o=Object(i.a)(r,2),l=o[0],u=o[1],j=Object(n.useState)(!0),b=Object(i.a)(j,2),m=b[0],O=b[1];return Object(n.useEffect)((function(){var e=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout(Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t._id,e.next=3,c._id;case 3:if(e.t1=e.sent,e.t0!==e.t1){e.next=8;break}u("you"),e.next=9;break;case 8:!0===t.followingStatus&&!0===t.followerStatus?u("mutual following"):!1===t.followingStatus&&!0===t.followerStatus?u("follows you"):!0===t.followingStatus&&!1===t.followerStatus&&u("doesn't follow you");case 9:O(!1);case 10:case"end":return e.stop()}}),e)}))),1e3);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()})),Object(d.jsx)("div",{className:"you"!==l?"follow-container":"follow-container current-user-container",children:m?Object(d.jsx)(k,{type:"follower"}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(x.b,{to:"/profile/"+t.username,style:{textDecoration:"none"},children:Object(d.jsxs)("div",{className:"follow-container-left",children:[Object(d.jsx)("img",{src:t.avatar?"https://nodebook-images.s3.amazonaws.com/"+t.avatar:Q,alt:"",className:"follow-img"}),Object(d.jsxs)("div",{className:"follow-user-info",children:[Object(d.jsx)("span",{className:"follow-username",children:t.username}),Object(d.jsxs)("span",{className:"follow-name",children:[t.firstname," ",t.lastname]})]})]})}),"you"!==l&&Object(d.jsxs)("div",{className:"follow-container-right",children:[Object(d.jsx)("span",{className:"follow-status-span",children:l}),Object(d.jsxs)("button",{disabled:s,className:"follow-button",onClick:function(){return a(t.followingStatus,t)},children:[t.followingStatus?"Unfollow":"Follow",t.followingStatus?Object(d.jsx)(L.a,{}):Object(d.jsx)(H.a,{})]})]})]})},t._id)}a(46);function me(e){var t=e.setCurrentPage,a=e.sidebarOpen,s=e.setSidebarOpen,c=e.post,r=e.user,l=Object(n.useState)(!0),u=Object(i.a)(l,2),j=u[0],b=u[1],m=Object(n.useState)([]),O=Object(i.a)(m,2),v=O[0],g=O[1],A=Object(n.useState)(0),w=Object(i.a)(A,2),y=w[0],S=w[1],B=Object(n.useContext)(p),I=B.user,E=B.dispatch;t("PostLikes");var D=function(){var e=Object(h.a)(f.a.mark((function e(t,a){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=8;break}return e.next=4,N.a.put("https://radiant-oasis-77477.herokuapp.com/api/users/".concat(a._id,"/unfollow"),{userId:I._id});case 4:E({type:"UNFOLLOW",payload:a._id});try{N.a.delete("https://radiant-oasis-77477.herokuapp.com/api/notifications/",{data:{sender:I._id,recipient:a._id,postId:null,commentId:null,type:"follow"}})}catch(n){}e.next=12;break;case 8:return e.next=10,N.a.put("https://radiant-oasis-77477.herokuapp.com/api/users/".concat(a._id,"/follow"),{userId:I._id});case 10:E({type:"FOLLOW",payload:a._id});try{N.a.post("https://radiant-oasis-77477.herokuapp.com/api/notifications/",{sender:I._id,recipient:a._id,postId:null,commentId:null,type:"follow",seen:!1})}catch(n){}case 12:e.next=16;break;case 14:e.prev=14,e.t0=e.catch(0);case 16:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),n();case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),P=function(){var e=Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.get("https://radiant-oasis-77477.herokuapp.com/api/posts/".concat(c._id,"/likers/0/").concat(I._id));case 3:t=e.sent,g(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:b(!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.get("https://radiant-oasis-77477.herokuapp.com/api/posts/".concat(c._id,"/likers/").concat(y,"/").concat(I._id));case 3:t=e.sent,g([].concat(Object(o.a)(v),Object(o.a)(t.data))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:b(!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){c&&F()}),[y]),Object(n.useEffect)((function(){c&&P()}),[I,c]);return Object(d.jsx)("div",{className:"followfeed",onScroll:function(e){var t=e.target;t.offsetHeight+t.scrollTop>.95*t.scrollHeight&&S(v.length)},onClick:function(){return s(!1)},children:j?Object(d.jsx)(k,{type:"full-screen"}):Object(d.jsxs)("div",{className:"likers-feed",children:[Object(d.jsx)("div",{className:"likesFeed-post-container",children:Object(d.jsx)("div",{className:"likesFeed-post-upper",children:Object(d.jsxs)("div",{className:"likesFeed-post-top",children:[Object(d.jsx)(x.b,{to:"/profile/".concat(r.username),children:Object(d.jsx)("img",{className:"likesFeed-post-avatar",src:r.avatar?"https://nodebook-images.s3.amazonaws.com/"+r.avatar:Q,alt:""})}),Object(d.jsxs)("div",{className:"likesFeed-post-top-center",children:[Object(d.jsxs)("div",{className:"likesFeed-post-info",children:[Object(d.jsx)(x.b,{to:"/profile/".concat(r.username),children:Object(d.jsx)("span",{className:"likesFeed-post-username",children:r.username})}),Object(d.jsx)("span",{className:"likesFeed-post-date",children:Object(C.a)(c.createdAt)})]}),Object(d.jsx)("span",{className:"likesFeed-post-body",children:null===c||void 0===c?void 0:c.body}),c.img&&Object(d.jsx)("div",{className:"likesFeed-post-img-wrapper",children:Object(d.jsx)("div",{className:"likesFeed-post-img-container",children:Object(d.jsx)("img",{className:"likesFeed-post-img",src:"https://nodebook-images.s3.amazonaws.com/"+c.img,alt:""})})}),c.edited&&Object(d.jsxs)("span",{className:"likesFeed-post-edit",children:["edit: ",Object(C.a)(c.editedtimestamp)]})]})]})})}),Object(d.jsx)("div",{className:"likesFeed-wrapper",children:v.length>0?Object(d.jsx)(d.Fragment,{children:v.map((function(e){return Object(d.jsx)(be,{liker:e,handleFollowingStatus:D,sidebarOpen:a},e._id)}))}):Object(d.jsx)("span",{className:"no-likes-message",children:"No likes yet"})})]})})}function fe(e){var t=e.currentPage,a=e.setCurrentPage,s=e.sidebarOpen,c=e.setSidebarOpen,r=Object(v.g)().postId,o=Object(n.useState)(""),l=Object(i.a)(o,2),u=l[0],j=l[1],p=Object(n.useState)({}),b=Object(i.a)(p,2),m=b[0],O=b[1],x=function(){var e=Object(h.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("https://radiant-oasis-77477.herokuapp.com/api/posts/".concat(r));case 2:return t=e.sent,j(t.data),e.next=6,N.a.get("https://radiant-oasis-77477.herokuapp.com/api/users?userId=".concat(t.data.userId));case 6:a=e.sent,O(a.data);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){x()}),[r]),Object(d.jsxs)("div",{className:"container",id:"container",children:[Object(d.jsx)(G,{currentPage:t,sidebarOpen:s,setSidebarOpen:c,post:u,likesUser:m}),Object(d.jsx)(me,{setCurrentPage:a,sidebarOpen:s,setSidebarOpen:c,post:u,user:m})]})}function Oe(e){var t=e.setCurrentPage,a=e.sidebarOpen,s=e.setSidebarOpen,c=e.comment,r=e.user,l=Object(n.useState)(!0),u=Object(i.a)(l,2),j=u[0],b=u[1],m=Object(n.useState)([]),O=Object(i.a)(m,2),v=O[0],g=O[1],A=Object(n.useState)(0),w=Object(i.a)(A,2),y=w[0],S=w[1],B=Object(n.useContext)(p),I=B.user,E=B.dispatch;t("CommentLikes");var D=function(){var e=Object(h.a)(f.a.mark((function e(t,a){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=8;break}return e.next=4,N.a.put("https://radiant-oasis-77477.herokuapp.com/api/users/".concat(a._id,"/unfollow"),{userId:I._id});case 4:E({type:"UNFOLLOW",payload:a._id});try{N.a.delete("https://radiant-oasis-77477.herokuapp.com/api/notifications/",{data:{sender:I._id,recipient:a._id,postId:null,commentId:null,type:"follow"}})}catch(n){}e.next=12;break;case 8:return e.next=10,N.a.put("https://radiant-oasis-77477.herokuapp.com/api/users/".concat(a._id,"/follow"),{userId:I._id});case 10:E({type:"FOLLOW",payload:a._id});try{N.a.post("https://radiant-oasis-77477.herokuapp.com/api/notifications/",{sender:I._id,recipient:a._id,postId:null,commentId:null,type:"follow",seen:!1})}catch(n){}case 12:e.next=16;break;case 14:e.prev=14,e.t0=e.catch(0);case 16:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),n();case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),P=function(){var e=Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.get("https://radiant-oasis-77477.herokuapp.com/api/comments/".concat(c._id,"/likers/0/").concat(I._id));case 3:t=e.sent,g(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:b(!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.get("https://radiant-oasis-77477.herokuapp.com/api/comments/".concat(c._id,"/likers/").concat(y,"/").concat(I._id));case 3:t=e.sent,g([].concat(Object(o.a)(v),Object(o.a)(t.data))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:b(!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){c&&F()}),[y]),Object(n.useEffect)((function(){c&&P()}),[I,c]);return Object(d.jsx)("div",{className:"followfeed",onScroll:function(e){var t=e.target;t.offsetHeight+t.scrollTop>.95*t.scrollHeight&&S(v.length)},onClick:function(){return s(!1)},children:j?Object(d.jsx)(k,{type:"full-screen"}):Object(d.jsxs)("div",{className:"likers-feed",children:[Object(d.jsx)("div",{className:"likesFeed-post-container",children:Object(d.jsx)("div",{className:"likesFeed-post-upper",children:Object(d.jsxs)("div",{className:"likesFeed-post-top",children:[Object(d.jsx)(x.b,{to:"/profile/".concat(r.username),children:Object(d.jsx)("img",{className:"likesFeed-post-avatar",src:r.avatar?"https://nodebook-images.s3.amazonaws.com/"+r.avatar:Q,alt:""})}),Object(d.jsxs)("div",{className:"likesFeed-post-top-center",children:[Object(d.jsxs)("div",{className:"likesFeed-post-info",children:[Object(d.jsx)(x.b,{to:"/profile/".concat(r.username),children:Object(d.jsx)("span",{className:"likesFeed-post-username",children:r.username})}),Object(d.jsx)("span",{className:"likesFeed-post-date",children:Object(C.a)(c.createdAt)})]}),Object(d.jsx)("span",{className:"likesFeed-post-body",children:null===c||void 0===c?void 0:c.body}),c.edited&&Object(d.jsxs)("span",{className:"likesFeed-post-edit",children:["edit: ",Object(C.a)(c.editedtimestamp)]})]})]})})}),Object(d.jsx)("div",{className:"likesFeed-wrapper",children:v.length>0?Object(d.jsx)(d.Fragment,{children:v.map((function(e){return Object(d.jsx)(be,{liker:e,handleFollowingStatus:D,sidebarOpen:a},e._id)}))}):Object(d.jsx)("span",{className:"no-likes-message",children:"No likes yet"})})]})})}function he(e){var t=e.currentPage,a=e.setCurrentPage,s=e.sidebarOpen,c=e.setSidebarOpen,r=Object(v.g)().commentId,o=Object(n.useState)(""),l=Object(i.a)(o,2),u=l[0],j=l[1],p=Object(n.useState)({}),b=Object(i.a)(p,2),m=b[0],O=b[1],x=function(){var e=Object(h.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("https://radiant-oasis-77477.herokuapp.com/api/comments/".concat(r));case 2:return t=e.sent,j(t.data),e.next=6,N.a.get("https://radiant-oasis-77477.herokuapp.com/api/users?userId=".concat(t.data.userId));case 6:a=e.sent,O(a.data);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){x()}),[r]),Object(d.jsxs)("div",{className:"container",id:"container",children:[Object(d.jsx)(G,{currentPage:t,sidebarOpen:s,setSidebarOpen:c,comment:u,likesUser:m}),Object(d.jsx)(Oe,{setCurrentPage:a,sidebarOpen:s,setSidebarOpen:c,comment:u,user:m})]})}a(102);function xe(e){var t=e.friend,a=e.handleFollowingStatus,s=e.sidebarOpen,c=Object(n.useContext)(p).user,r=Object(n.useState)(""),o=Object(i.a)(r,2),l=o[0],u=o[1],j=Object(n.useState)(!0),b=Object(i.a)(j,2),m=b[0],O=b[1];return Object(n.useEffect)((function(){var e=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout(Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t._id,e.next=3,c._id;case 3:if(e.t1=e.sent,e.t0!==e.t1){e.next=8;break}u("you"),e.next=9;break;case 8:!0===t.followingStatus&&!0===t.followerStatus?u("mutual following"):!1===t.followingStatus&&!0===t.followerStatus?u("follows you"):!0===t.followingStatus&&!1===t.followerStatus&&u("doesn't follow you");case 9:O(!1);case 10:case"end":return e.stop()}}),e)}))),1e3);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()})),Object(d.jsx)("div",{className:"follow-container",children:m?Object(d.jsx)(k,{type:"follower"}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(x.b,{to:"/profile/"+t.username,style:{textDecoration:"none"},children:Object(d.jsxs)("div",{className:"follow-container-left",children:[Object(d.jsx)("img",{src:t.avatar?"https://nodebook-images.s3.amazonaws.com/"+t.avatar:Q,alt:"",className:"follow-img"}),Object(d.jsxs)("div",{className:"follow-user-info",children:[Object(d.jsx)("span",{className:"follow-username",children:t.username}),Object(d.jsxs)("span",{className:"follow-name",children:[t.firstname," ",t.lastname]})]})]})}),"you"!==l&&Object(d.jsxs)("div",{className:"follow-container-right",children:[Object(d.jsx)("span",{className:"follow-status-span",children:l}),Object(d.jsxs)("button",{disabled:s,className:"follow-button",onClick:function(){return a(t.followingStatus,t)},children:[t.followingStatus?"Unfollow":"Follow",t.followingStatus?Object(d.jsx)(L.a,{}):Object(d.jsx)(H.a,{})]})]})]})},t._id)}a(103);function ve(e){var t=e.setCurrentPage,a=e.sidebarOpen,s=e.setSidebarOpen,c=Object(n.useState)(!0),r=Object(i.a)(c,2),l=r[0],u=r[1],j=Object(n.useState)([]),b=Object(i.a)(j,2),m=b[0],O=b[1],x=Object(n.useState)(0),v=Object(i.a)(x,2),g=v[0],A=v[1],w=Object(n.useContext)(p),y=w.user,S=w.dispatch;Object(n.useEffect)((function(){t("Explore")}));var Q=function(){var e=Object(h.a)(f.a.mark((function e(t,a){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=8;break}return e.next=4,N.a.put("https://radiant-oasis-77477.herokuapp.com/api/users/".concat(a._id,"/unfollow"),{userId:y._id});case 4:S({type:"UNFOLLOW",payload:a._id});try{N.a.delete("https://radiant-oasis-77477.herokuapp.com/api/notifications/",{data:{sender:y._id,recipient:a._id,postId:null,commentId:null,type:"follow"}})}catch(n){}e.next=12;break;case 8:return e.next=10,N.a.put("https://radiant-oasis-77477.herokuapp.com/api/users/".concat(a._id,"/follow"),{userId:y._id});case 10:S({type:"FOLLOW",payload:a._id});try{N.a.post("https://radiant-oasis-77477.herokuapp.com/api/notifications/",{sender:y._id,recipient:a._id,postId:null,commentId:null,type:"follow",seen:!1})}catch(n){}case 12:e.next=16;break;case 14:e.prev=14,e.t0=e.catch(0);case 16:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),n();case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){var e=function(){var e=Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.get("https://radiant-oasis-77477.herokuapp.com/api/users/explore/".concat(y._id,"/").concat(g));case 3:t=e.sent,O([].concat(Object(o.a)(m),Object(o.a)(t.data))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:u(!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[g]),Object(n.useEffect)((function(){var e=function(){var e=Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.get("https://radiant-oasis-77477.herokuapp.com/api/users/explore/".concat(y._id,"/0"));case 3:t=e.sent,O(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:u(!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[y]);return Object(d.jsx)("div",{className:"followfeed",onScroll:function(e){var t=e.target;t.offsetHeight+t.scrollTop>.95*t.scrollHeight&&A(m.length)},onClick:function(){return s(!1)},children:l?Object(d.jsx)(k,{type:"full-screen"}):Object(d.jsx)("div",{className:"followfeed-wrapper",children:m.length>0?Object(d.jsx)(d.Fragment,{children:m.map((function(e){return Object(d.jsx)(xe,{friend:e,handleFollowingStatus:Q,sidebarOpen:a},e._id)}))}):Object(d.jsx)("span",{className:"no-explore-message",children:"No one new to see"})})})}function ge(e){var t=e.currentPage,a=e.setCurrentPage,n=e.sidebarOpen,s=e.setSidebarOpen;return Object(d.jsxs)("div",{className:"container",id:"container",children:[Object(d.jsx)(G,{currentPage:t,sidebarOpen:n,setSidebarOpen:s}),Object(d.jsx)(ve,{currentPage:t,setCurrentPage:a,sidebarOpen:n,setSidebarOpen:s})]})}a(104);var Ne=a(137),Ae=a(138),we=a(139),ke=a(140),ye=a(141);a(105);function Se(e){var t=e.notification,a=e.status,s=e.getNotifications,c=Object(n.useContext)(p).user,r=Object(n.useState)({}),o=Object(i.a)(r,2),l=o[0],u=o[1],j=Object(n.useState)({}),b=Object(i.a)(j,2),m=b[0],O=b[1],v=Object(n.useState)(!0),g=Object(i.a)(v,2),A=g[0],w=g[1];Object(n.useEffect)((function(){var e=function(){var e=Object(h.a)(f.a.mark((function e(){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("https://radiant-oasis-77477.herokuapp.com/api/users?userId=".concat(t.sender));case 2:a=e.sent,u(a.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e();var a=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout(Object(h.a)(f.a.mark((function e(){var a,n,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"postLike"===t.type?(a=t.postId,n="posts/"):"commentLike"===t.type||"comment"===t.type?(a=t.commentId,n="comments/"):"follow"===t.type&&(a=t.sender,n="users?userId="),e.next=3,N.a.get("https://radiant-oasis-77477.herokuapp.com/api/".concat(n).concat(a));case 3:s=e.sent,O(s.data),w(!1);case 6:case"end":return e.stop()}}),e)}))),1e3);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();a()}),[c]);var y=function(){var e=Object(h.a)(f.a.mark((function e(){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{N.a.put("https://radiant-oasis-77477.herokuapp.com/api/notifications/".concat(t._id))}catch(a){}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=3,a();case 3:s();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(h.a)(f.a.mark((function e(){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{N.a.delete("https://radiant-oasis-77477.herokuapp.com/api/notifications/".concat(t._id))}catch(a){}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=3,a();case 3:s();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("span",{className:"notification-message",children:["liked your comment ",Object(C.a)(t.createdAt)]}),Object(d.jsx)(D.a,{className:"notification-icon like-icon"})]})},I=function(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("span",{className:"notification-message",children:[" ","liked your post ",Object(C.a)(t.createdAt)]}),Object(d.jsx)(D.a,{className:"notification-icon like-icon"})]})},E=function(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("span",{className:"notification-message",children:[" ","commented on your post ",Object(C.a)(t.createdAt)]}),Object(d.jsx)(Ne.a,{className:"notification-icon message-icon"})]})},P=function(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("span",{className:"notification-message",children:[" ","followed you ",Object(C.a)(t.createdAt)]}),Object(d.jsx)(Ae.a,{className:"notification-icon follow-icon"})]})};return Object(d.jsx)("div",{className:"notification-container",children:A?Object(d.jsx)(k,{type:"notification"}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(x.b,{to:"follow"===t.type?"/profile/".concat(l.username):"/post/".concat(t.postId),className:"notification-link",children:Object(d.jsxs)("div",{className:"notification-wrapper",children:[Object(d.jsxs)("div",{className:"notification-top",children:[Object(d.jsx)(x.b,{to:"/profile/".concat(l.username),children:Object(d.jsx)("img",{className:"notification-avatar",src:l.avatar?"https://nodebook-images.s3.amazonaws.com/"+l.avatar:Q,alt:""})}),Object(d.jsxs)("div",{className:"notification-desc",children:[Object(d.jsx)(x.b,{className:"notification-username-link",to:"/profile/".concat(l.username),children:Object(d.jsx)("span",{className:"notification-username",children:l.username!==c.username?l.username:"You"})}),"commentLike"===t.type&&Object(d.jsx)(B,{}),"postLike"===t.type&&Object(d.jsx)(I,{}),"comment"===t.type&&Object(d.jsx)(E,{}),"follow"===t.type&&Object(d.jsx)(P,{})]})]}),"follow"!==t.type&&Object(d.jsxs)("div",{className:"content-body",children:[Object(d.jsx)("span",{children:m.body}),m.img&&Object(d.jsx)("img",{className:"notification-img",src:"https://nodebook-images.s3.amazonaws.com/"+m.img,alt:""})]}),"follow"===t.type&&Object(d.jsx)("span",{className:"content-follow",children:"View their profile"})]})}),Object(d.jsxs)("div",{className:"notification-buttons-container",children:[Object(d.jsx)("button",{className:"notification-read-button",onClick:y,children:"new"===a?Object(d.jsx)(we.a,{className:"button-icon"}):Object(d.jsx)(ke.a,{className:"button-icon"})}),Object(d.jsx)("button",{className:"notification-delete-button",onClick:S,children:Object(d.jsx)(ye.a,{className:"button-icon"})})]})]})})}function Qe(e){var t=e.fetchNotifications,a=e.setCurrentPage,s=e.sidebarOpen,c=e.setSidebarOpen,r=Object(n.useState)(!0),o=Object(i.a)(r,2),l=o[0],u=o[1],j=Object(n.useState)(!0),b=Object(i.a)(j,2),m=b[0],x=b[1],v=Object(n.useState)([]),g=Object(i.a)(v,2),A=g[0],w=g[1],y=Object(n.useState)([]),S=Object(i.a)(y,2),Q=S[0],B=S[1],C=Object(n.useContext)(p).user;Object(n.useEffect)((function(){a("Notifications")}));var I=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout(Object(h.a)(f.a.mark((function e(){var a,n,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("https://radiant-oasis-77477.herokuapp.com/api/notifications/".concat(C._id));case 2:a=e.sent,n=a.data.filter((function(e){return!0===e.seen})),w(n.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)}))),s=a.data.filter((function(e){return!1===e.seen})),B(s.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)}))),t(),x(!1);case 9:case"end":return e.stop()}}),e)}))),1e3),u(!1);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){I()}),[C._id]);var E=function(){var e=Object(h.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=function(){var e=Object(h.a)(f.a.mark((function e(){var a,n,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="seen"===t?A:Q,n=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(a.map(function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.put("https://radiant-oasis-77477.herokuapp.com/api/notifications/".concat(t._id));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n().then((function(){return s()}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a(),I();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(h.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=function(){var e=Object(h.a)(f.a.mark((function e(){var a,n,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="seen"===t?A:Q,n=function(){var e=Object(h.a)(f.a.mark((function e(){var t,n,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object(O.a)(a),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=9;break}return s=n.value,e.next=7,N.a.delete("https://radiant-oasis-77477.herokuapp.com/api/notifications/".concat(s._id));case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n().then((function(){return s()}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){return Object(d.jsxs)("div",{className:"notifications-container",onClick:function(){return c(!1)},children:[Object(d.jsx)("div",{className:"notification-type-header",style:s?{pointerEvents:"none"}:{},children:Object(d.jsxs)("div",{className:"notification-type-header-wrapper",children:[Object(d.jsxs)("span",{className:"notification-type-header-title",children:["New ","(",Q.length,")"]}),Q.length>0&&Object(d.jsxs)("div",{className:"notification-type-button-container",children:[Object(d.jsx)("button",{className:"notification-read-button desktop-button",onClick:function(){return E("new")},children:"Mark all as seen"}),Object(d.jsx)("button",{className:"notification-delete-button desktop-button",onClick:function(){return D("new")},children:"Delete all new"}),Object(d.jsx)("button",{className:"notification-read-button mobile-button",onClick:function(){return E("new")},children:"All seen"}),Object(d.jsx)("button",{className:"notification-delete-button mobile-button",onClick:function(){return D("new")},children:"Delete all"})]})]})}),Object(d.jsx)("div",{className:"notifications-holder",style:s?{pointerEvents:"none"}:{},children:Q.length>0?Q.map((function(e){return Object(d.jsx)(Se,{notification:e,status:"new",getNotifications:I},e._id)})):Object(d.jsx)("div",{className:"full-width-wrapper",children:Object(d.jsx)("span",{className:"no-notifications-message",children:"No new notifications"})})})]})},F=function(){return Object(d.jsxs)("div",{className:"notifications-container",children:[Object(d.jsx)("div",{className:"notification-type-header",children:Object(d.jsxs)("div",{className:"notification-type-header-wrapper",children:[Object(d.jsxs)("span",{className:"notification-type-header-title ",children:["Seen ","(",A.length,")"]}),A.length>0&&Object(d.jsxs)("div",{className:"notification-type-button-container",children:[Object(d.jsx)("button",{className:"notification-read-button desktop-button",onClick:function(){return E("seen")},children:"Mark all as new"}),Object(d.jsx)("button",{className:"notification-delete-button desktop-button",onClick:function(){return D("seen")},children:"Delete all seen"}),Object(d.jsx)("button",{className:"notification-read-button mobile-button",onClick:function(){return E("seen")},children:"All new"}),Object(d.jsx)("button",{className:"notification-delete-button mobile-button",onClick:function(){return D("seen")},children:"Delete all"})]})]})}),Object(d.jsx)("div",{className:"notifications-holder",children:A.length>0?A.map((function(e){return Object(d.jsx)(Se,{notification:e,status:"seen",getNotifications:I},e._id)})):Object(d.jsx)("div",{className:"full-width-wrapper",children:Object(d.jsx)("span",{className:"no-notifications-message",children:"No seen notifications"})})})]})};return Object(d.jsx)("div",{className:"notifications-feed-page",children:Object(d.jsx)(d.Fragment,{children:l?Object(d.jsx)(k,{type:"full-screen"}):Object(d.jsx)(d.Fragment,{children:A.length+Q.length>0?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(P,{}),Object(d.jsx)(F,{})]}):m?Object(d.jsx)(k,{type:"full-screen"}):Object(d.jsx)("div",{className:"full-width-wrapper",children:Object(d.jsx)("span",{className:"no-notifications-message",children:"No notifications"})})})})})}function Be(e){var t=e.currentPage,a=e.setCurrentPage,n=e.fetchNotifications,s=e.notificationsCount,c=e.sidebarOpen,r=e.setSidebarOpen;return Object(d.jsxs)("div",{className:"container",id:"container",children:[Object(d.jsx)(G,{currentPage:t,notificationsCount:s,sidebarOpen:c,setSidebarOpen:r}),Object(d.jsx)(Qe,{fetchNotifications:n,setCurrentPage:a,sidebarOpen:c,setSidebarOpen:r})]})}a(47);var Ce=a(142),Ie=a(143),Ee=a(144),De=a(145),Pe=a(146),Fe=a(147),Me=a(148),Le=a(149),He=a(150),We=a(151),Ye=a(152),Ge=a(153),Re=a(154);function Ve(){return Object(d.jsx)("svg",{className:"navbar-svg",version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"4000.000000pt",height:"4000.000000pt",viewBox:"0 0 4000.000000 4000.000000",preserveAspectRatio:"xMidYMid meet",children:Object(d.jsx)("g",{transform:"translate(0.000000,4000.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none",className:"navbar-svg-g",children:Object(d.jsx)("path",{d:"M1353 22773 c2 -15060 3 -15886 20 -16028 72 -620 208 -1161 422\r\n-1680 77 -190 265 -569 365 -740 530 -900 1265 -1635 2165 -2165 171 -100 550\r\n-288 740 -366 584 -240 1210 -385 1865 -434 187 -14 25953 -14 26140 0 655 49\r\n1281 194 1865 434 190 78 569 266 740 366 900 530 1635 1265 2165 2165 100\r\n171 288 550 365 740 214 519 350 1060 422 1680 17 142 18 837 21 13150 2 9481\r\n0 13045 -8 13165 -44 644 -192 1286 -434 1875 -78 190 -266 569 -366 740 -530\r\n900 -1265 1635 -2165 2165 -171 100 -550 288 -740 366 -584 240 -1210 385\r\n-1865 434 -89 7 -5493 10 -15928 10 l-15792 0 3 -15877z m24827 9233 c1160\r\n-88 2045 -305 2845 -695 253 -124 381 -196 585 -329 649 -424 1168 -975 1560\r\n-1657 90 -157 268 -524 339 -701 578 -1443 701 -3358 365 -5724 -56 -400 -77\r\n-521 -754 -4360 -357 -2027 -931 -5282 -1275 -7235 -344 -1952 -628 -3562\r\n-631 -3578 l-6 -27 -3359 0 -3359 0 5 22 c3 13 311 1760 685 3883 375 2123\r\n906 5136 1181 6695 514 2912 563 3200 623 3620 169 1182 179 2074 30 2738 -62\r\n276 -130 474 -239 697 -323 657 -884 1063 -1695 1225 -318 64 -584 84 -990 77\r\n-404 -7 -649 -37 -995 -122 -1044 -256 -1873 -874 -2548 -1900 -270 -412 -545\r\n-963 -752 -1510 -311 -818 -555 -1743 -789 -2985 -36 -190 -540 -3040 -1121\r\n-6335 -580 -3294 -1061 -6016 -1067 -6047 l-11 -58 -3358 0 -3359 0 5 23 c3\r\n12 723 4092 1600 9067 877 4975 1810 10265 2073 11755 l478 2710 3357 3 c1846\r\n1 3357 -1 3357 -5 0 -12 -371 -2118 -375 -2130 -3 -9 10 -13 48 -13 l52 1 73\r\n87 c301 356 727 763 1118 1068 940 733 2065 1257 3274 1528 504 112 1019 186\r\n1510 216 96 6 198 12 225 14 137 10 1105 -4 1295 -18z"})})})}function Te(){return Object(d.jsx)("svg",{className:"sidebar-kf",version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"655.000000pt",height:"657.000000pt",viewBox:"0 0 655.000000 657.000000",preserveAspectRatio:"xMidYMid meet",children:Object(d.jsx)("g",{transform:"translate(0.000000,657.000000) scale(0.100000,-0.100000)",fill:"#151515",stroke:"none",className:"sidebar-kf-g",children:Object(d.jsx)("path",{d:"M1 4978 c1 -995 5 -1546 10 -1468 22 311 102 661 224 970 46 118 204\r\n440 216 440 5 0 9 4 9 9 0 16 120 213 144 236 6 6 29 37 51 70 22 33 47 66 55\r\n75 8 8 44 50 79 93 35 43 72 84 82 90 11 7 19 16 19 22 0 14 133 145 147 145\r\n6 0 13 6 16 14 5 12 128 119 224 194 l43 34 0 -2606 c0 -1433 -4 -2606 -8\r\n-2606 -5 0 -31 19 -59 43 -28 23 -85 70 -127 105 -42 34 -76 67 -76 72 0 6 -6\r\n10 -13 10 -14 0 -147 130 -147 144 0 5 -18 25 -40 44 -23 19 -39 37 -36 40 3\r\n2 -6 13 -19 24 -14 11 -23 24 -20 29 4 5 2 9 -3 9 -12 0 -112 121 -111 134 0\r\n5 -5 12 -11 16 -6 4 -19 18 -28 32 -9 14 -40 59 -68 100 -28 41 -62 95 -75\r\n119 -13 24 -27 46 -31 49 -15 11 -169 332 -211 440 -123 313 -205 668 -226\r\n975 -5 81 -9 -468 -10 -1472 l-1 -1603 3275 0 3275 0 0 3285 0 3285 -3275 0\r\n-3275 0 1 -1592z m3474 1562 c150 -11 292 -32 455 -67 138 -29 360 -93 360\r\n-103 0 -4 -488 -495 -1085 -1092 l-1085 -1085 0 1073 0 1072 108 36 c437 143\r\n834 196 1247 166z m1623 -567 c92 -58 360 -276 369 -299 3 -8 10 -14 16 -14\r\n14 0 147 -131 147 -145 0 -6 8 -15 19 -22 10 -6 47 -47 82 -90 35 -43 71 -85\r\n79 -93 8 -9 33 -42 55 -75 22 -32 48 -67 58 -77 9 -10 17 -24 17 -31 0 -12\r\n-2639 -2658 -2657 -2664 -4 -2 -204 193 -443 432 l-435 435 1330 1330 c731\r\n732 1331 1330 1333 1330 1 0 15 -8 30 -17z m1250 -1660 c6 -21 24 -85 41 -143\r\n38 -129 55 -204 86 -385 92 -546 26 -1130 -192 -1685 -42 -108 -196 -429 -211\r\n-440 -4 -3 -18 -25 -31 -49 -13 -24 -47 -78 -75 -119 -28 -41 -59 -86 -68\r\n-100 -9 -14 -22 -28 -28 -32 -6 -4 -10 -10 -8 -13 5 -8 -102 -137 -114 -137\r\n-5 0 -7 -4 -3 -9 3 -5 -6 -18 -20 -29 -13 -11 -22 -22 -19 -24 3 -3 -13 -21\r\n-36 -40 -22 -19 -40 -39 -40 -44 0 -12 -132 -144 -145 -144 -6 0 -15 -8 -22\r\n-18 -14 -23 -178 -158 -278 -228 l-72 -52 -629 629 -629 629 1235 1235 c679\r\n679 1238 1235 1241 1235 4 0 11 -17 17 -37z m-2003 -4085 c-23 -13 -263 -85\r\n-360 -108 -245 -58 -469 -84 -725 -84 -379 0 -658 50 -1107 197 l-33 10 0\r\n1116 0 1116 1120 -1120 c820 -820 1116 -1122 1105 -1127z"})})})}function ze(e){var t=e.currentPage,a=e.notificationsCount,s=e.sidebarOpen,c=e.setSidebarOpen,r=Object(n.useContext)(p),i=r.user,o=r.dispatch,l=Object(v.f)(),u=function(){c(!1)};return Object(d.jsxs)("div",{className:s?"sidebar active":"sidebar",children:[Object(d.jsxs)("div",{className:"sidebar-wrapper",children:[Object(d.jsx)("div",{className:"sidebar-logo-container",children:Object(d.jsx)(Ve,{})}),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(x.b,{to:"/",children:Object(d.jsxs)("div",{onClick:function(){return u()},className:"sidebar-link "+("Timeline"===t?"active-nav-link":""),children:["Timeline"===t?Object(d.jsx)(Ce.a,{className:"sidebar-icon"}):Object(d.jsx)(Ie.a,{className:"sidebar-icon"})," ",Object(d.jsx)("span",{className:"sidebar-link-text",children:"Timeline"})]})}),Object(d.jsx)(x.b,{to:"/profile/"+i.username,children:Object(d.jsxs)("div",{onClick:function(){return u()},className:"sidebar-link "+("Profile"===t?"active-nav-link":""),children:["Profile"===t?Object(d.jsx)(Ee.a,{className:"sidebar-icon"}):Object(d.jsx)(De.a,{className:"sidebar-icon"})," ",Object(d.jsx)("span",{className:"sidebar-link-text",children:"Profile"})]})}),Object(d.jsx)(x.b,{to:"/notifications/"+i.username,children:Object(d.jsxs)("div",{onClick:function(){return u()},className:"sidebar-link "+("Notifications"===t?"active-nav-link":""),children:["Notifications"===t?Object(d.jsx)(Pe.a,{className:"sidebar-icon"}):Object(d.jsx)(Fe.a,{className:"sidebar-icon"})," ",Object(d.jsx)("span",{className:"sidebar-link-text",children:"Notifications"}),a>0&&Object(d.jsx)("div",{className:"notification-badge-container",children:Object(d.jsx)("div",{className:"notification-badge",children:Object(d.jsx)("span",{className:"badge-count",children:a})})})]})}),Object(d.jsx)(x.b,{to:"/".concat(i.username,"/followers"),children:Object(d.jsxs)("div",{onClick:function(){return u()},className:"sidebar-link "+("Followers"===t?"active-nav-link":""),children:["Followers"===t?Object(d.jsx)(U.a,{className:"sidebar-icon"}):Object(d.jsx)(Me.a,{className:"sidebar-icon"})," ",Object(d.jsx)("span",{className:"sidebar-link-text",children:"Followers"})]})}),Object(d.jsx)(x.b,{to:"/".concat(i.username,"/following"),children:Object(d.jsxs)("div",{onClick:function(){return u()},className:"sidebar-link "+("Following"===t?"active-nav-link":""),children:["Following"===t?Object(d.jsx)(U.a,{className:"sidebar-icon"}):Object(d.jsx)(Me.a,{className:"sidebar-icon"})," ",Object(d.jsx)("span",{className:"sidebar-link-text",children:"Following"})]})}),Object(d.jsx)(x.b,{to:"/explore/".concat(i._id),children:Object(d.jsxs)("div",{onClick:function(){return u()},className:"sidebar-link "+("Explore"===t?"active-nav-link":""),children:["Explore"===t?Object(d.jsx)(Le.a,{className:"sidebar-icon"}):Object(d.jsx)(He.a,{className:"sidebar-icon"})," ",Object(d.jsx)("span",{className:"sidebar-link-text",children:"Explore"})]})}),Object(d.jsx)(x.b,{to:"/share",children:Object(d.jsxs)("div",{onClick:function(){return u()},className:"sidebar-link share-link"+("Share"===t?" active-share-link":""),children:["Share"===t?Object(d.jsx)(We.a,{className:"sidebar-icon"}):Object(d.jsx)(Ye.a,{className:"sidebar-icon"})," ",Object(d.jsx)("span",{className:"sidebar-link-text",children:"Share"})]})}),Object(d.jsx)("div",{className:"sidebar-logout",children:Object(d.jsxs)("button",{className:"logout-button",onClick:function(){localStorage.clear(),de(o),c(!1),l("/login",{replace:!0})},children:[Object(d.jsx)(Ge.a,{className:"sidebar-icon"})," ",Object(d.jsx)("span",{className:"sidebar-link-text",children:"Logout"})]})})]})]}),Object(d.jsxs)("div",{className:"sidebar-personal-info-container",children:[Object(d.jsx)("a",{href:"https://kfig21.github.io/portfolio_2021/",target:"_blank",rel:"noopener noreferrer",children:Object(d.jsx)(Te,{})}),Object(d.jsx)("span",{className:"made-by",children:"Made by KFig21"}),Object(d.jsx)("a",{href:"https://github.com/KFig21/nodebook_client",target:"_blank",rel:"noopener noreferrer",children:Object(d.jsx)(Re.a,{className:"sidebar-icon"})})]})]})}a(106);function Ue(e){var t=e.currentPage,a=e.notificationsCount,s=e.sidebarOpen,c=(e.setSidebarOpen,Object(n.useContext)(p).user);return Object(d.jsx)("div",{className:"mobile-nav-footer",style:s?{pointerEvents:"none"}:{},children:Object(d.jsxs)("div",{className:"nav-footer-button-container",children:[Object(d.jsx)(x.b,{to:"/profile/"+c.username,children:Object(d.jsx)("div",{className:"footer-link "+("Profile"===t?"active-nav-link":""),children:"Profile"===t?Object(d.jsx)(Ee.a,{className:"footer-icon"}):Object(d.jsx)(De.a,{className:"footer-icon"})})}),Object(d.jsx)(x.b,{to:"/",children:Object(d.jsx)("div",{className:"footer-link "+("Timeline"===t?"active-nav-link":""),children:"Timeline"===t?Object(d.jsx)(Ce.a,{className:"footer-icon"}):Object(d.jsx)(Ie.a,{className:"footer-icon"})})}),Object(d.jsx)(x.b,{to:"/notifications/"+c.username,children:Object(d.jsx)("div",{className:"footer-link "+("Notifications"===t?"active-nav-link":""),children:"Notifications"===t?Object(d.jsxs)("div",{className:"notifications-icon-container",children:[Object(d.jsx)(Pe.a,{className:"footer-icon"}),a>0&&Object(d.jsx)("div",{className:"footer-notification-badge-container",children:Object(d.jsx)("div",{className:"footer-notification-badge",children:Object(d.jsx)("span",{className:"footer-badge-count",children:a})})})]}):Object(d.jsxs)("div",{className:"notifications-icon-container",children:[Object(d.jsx)(Fe.a,{className:"footer-icon"}),a>0&&Object(d.jsx)("div",{className:"footer-notification-badge-container",children:Object(d.jsx)("div",{className:"footer-notification-badge",children:Object(d.jsx)("span",{className:"footer-badge-count",children:a})})})]})})}),Object(d.jsx)(x.b,{to:"/share",children:Object(d.jsx)("div",{className:"footer-link "+("Share"===t?"active-nav-link":""),children:"Share"===t?Object(d.jsx)(We.a,{className:"footer-icon"}):Object(d.jsx)(Ye.a,{className:"footer-icon"})})})]})})}a(107);function Je(e){var t=e.currentPage,a=e.setCurrentPage,s=(e.fetchNotifications,e.sidebarOpen),c=e.setSidebarOpen,r=Object(n.useContext)(p).user,o=Object(n.useRef)(),l=Object(n.useState)(null),u=Object(i.a)(l,2),j=u[0],b=u[1],m=Object(v.f)(),O=Object(n.useState)(""),x=Object(i.a)(O,2),g=x[0],A=x[1],w=""===g,k=Object(n.useState)({}),B=Object(i.a)(k,2),C=B[0],I=B[1],E=Object(n.useState)(!1),D=Object(i.a)(E,2),P=D[0],F=D[1];Object(n.useEffect)((function(){var e=function(){var e=Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("https://radiant-oasis-77477.herokuapp.com/api/users?username=".concat(r.username));case 2:t=e.sent,I(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[r]),Object(n.useEffect)((function(){a("Share")}));var M=function(){var e=Object(h.a)(f.a.mark((function e(t){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a={userId:C._id,body:o.current.value},!j){e.next=19;break}return(n=new FormData).append("file",j),n.append("userId",C._id),n.append("body",o.current.value),e.prev=7,e.next=10,N.a.post("https://radiant-oasis-77477.herokuapp.com/api/posts/image",n);case 10:m("/",{replace:!0}),window.location.reload(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(7),F(!0);case 17:e.next=29;break;case 19:return e.prev=19,e.next=22,N.a.post("https://radiant-oasis-77477.herokuapp.com/api/posts",a);case 22:m("/",{replace:!0}),window.location.reload(),e.next=29;break;case 26:e.prev=26,e.t1=e.catch(19),F(!0);case 29:case"end":return e.stop()}}),e,null,[[7,14],[19,26]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)(G,{currentPage:t,sidebarOpen:s,setSidebarOpen:c}),Object(d.jsx)("div",{className:"share-page",onClick:function(){return c(!1)},children:Object(d.jsx)("div",{className:"share-container",children:Object(d.jsx)("div",{className:"share",children:Object(d.jsxs)("div",{className:"share-wrapper",children:[Object(d.jsxs)("div",{className:"share-top",children:[Object(d.jsx)("img",{className:"share-avatar",src:C.avatar?"https://nodebook-images.s3.amazonaws.com/"+C.avatar:Q,alt:""}),Object(d.jsx)("textarea",{placeholder:"What's up "+C.username+"?",className:"share-input-desktop",onChange:function(e){return A(e.target.value)},ref:o,maxLength:500})]}),Object(d.jsx)("hr",{className:"share-hr"}),j&&Object(d.jsxs)("div",{className:"share-img-container",children:[Object(d.jsx)("img",{className:"share-img",src:URL.createObjectURL(j),alt:""}),Object(d.jsx)(y.a,{className:"share-cancel-img",onClick:function(){return b(null)}})]}),Object(d.jsxs)("form",{className:"share-bottom",onSubmit:M,children:[Object(d.jsx)("div",{className:"share-options",children:Object(d.jsxs)("label",{htmlFor:"file",className:"share-option",children:[Object(d.jsx)(S.a,{className:"share-icon"}),Object(d.jsx)("span",{className:"share-option-text",children:"Add an image"}),Object(d.jsx)("input",{style:{display:"none"},type:"file",id:"file",accept:".png,.jpeg,.jpg",onChange:function(e){return b(e.target.files[0])}})]})}),Object(d.jsx)("button",{type:"submit",className:w?"share-button invalid-share-button":"share-button",disabled:w,children:"Share"})]}),P&&Object(d.jsx)("div",{className:"error-div",children:Object(d.jsxs)("span",{className:"error-message",children:[Object(d.jsx)("strong",{children:"Error:"})," File too large or incorrect type"]})})]})})})})]})}var Xe=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)("Timeline"),r=Object(i.a)(c,2),o=r[0],l=r[1],u=Object(n.useContext)(p).user,j=Object(n.useState)({}),b=Object(i.a)(j,2),m=b[0],g=b[1],A=Object(n.useState)(0),w=Object(i.a)(A,2),k=w[0],y=w[1],S=Object(n.useState)(!1),Q=Object(i.a)(S,2),B=Q[0],C=Q[1],I=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout(Object(h.a)(f.a.mark((function e(){var t,a,n,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("https://radiant-oasis-77477.herokuapp.com/api/users/notifications?userId=".concat(u._id));case 2:t=e.sent,g(t.data),a=0,n=Object(O.a)(t.data.notifications);try{for(n.s();!(s=n.n()).done;)!1===s.value.seen&&a++}catch(c){n.e(c)}finally{n.f()}if(y(a),!m){e.next=10;break}return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e)}))),300);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e=localStorage.getItem("userAuth");s(!!e),u&&I()}),[u]),Object(d.jsx)(x.a,{basename:"/",children:Object(d.jsx)("div",{className:"app",children:Object(d.jsxs)("div",{className:"home-container",children:[u&&Object(d.jsx)(ze,{currentPage:o,notificationsCount:k,sidebarOpen:B,setSidebarOpen:C}),Object(d.jsx)("div",{className:"left-container",children:Object(d.jsxs)(v.c,{children:[Object(d.jsx)(v.a,{exact:!0,path:"/",element:u?Object(d.jsx)(R,{currentPage:o,setCurrentPage:l,fetchNotifications:I,sidebarOpen:B,setSidebarOpen:C}):Object(d.jsx)(le,{})}),Object(d.jsx)(v.a,{path:"/profile/:username",element:u?Object(d.jsx)(te,{currentPage:o,setCurrentPage:l,fetchNotifications:I,sidebarOpen:B,setSidebarOpen:C}):Object(d.jsx)(le,{})}),Object(d.jsx)(v.a,{path:"/notifications/:username",element:u?Object(d.jsx)(Be,{currentPage:o,setCurrentPage:l,fetchNotifications:I,notificationsCount:k,sidebarOpen:B,setSidebarOpen:C}):Object(d.jsx)(le,{})}),Object(d.jsx)(v.a,{exact:!0,path:"/:id/followers",element:u?Object(d.jsx)(ne,{currentPage:o,setCurrentPage:l,follow:"Followers",sidebarOpen:B,setSidebarOpen:C}):Object(d.jsx)(le,{})}),Object(d.jsx)(v.a,{exact:!0,path:"/:id/following",element:u?Object(d.jsx)(ne,{currentPage:o,setCurrentPage:l,follow:"Following",sidebarOpen:B,setSidebarOpen:C}):Object(d.jsx)(le,{})}),Object(d.jsx)(v.a,{exact:!0,path:"/post/:postId/likes",element:u?Object(d.jsx)(fe,{currentPage:o,setCurrentPage:l,sidebarOpen:B,setSidebarOpen:C}):Object(d.jsx)(le,{})}),Object(d.jsx)(v.a,{exact:!0,path:"/comment/:commentId/likes",element:u?Object(d.jsx)(he,{currentPage:o,setCurrentPage:l,sidebarOpen:B,setSidebarOpen:C}):Object(d.jsx)(le,{})}),Object(d.jsx)(v.a,{exact:!0,path:"/explore/:userId",element:u?Object(d.jsx)(ge,{currentPage:o,setCurrentPage:l,sidebarOpen:B,setSidebarOpen:C}):Object(d.jsx)(le,{})}),Object(d.jsx)(v.a,{exact:!0,path:"/post/:postId",element:u?Object(d.jsx)(re,{currentPage:o,setCurrentPage:l,fetchNotifications:I,sidebarOpen:B,setSidebarOpen:C}):Object(d.jsx)(le,{})}),Object(d.jsx)(v.a,{exact:!0,path:"/share",element:u?Object(d.jsx)(Je,{user:u,currentPage:o,setCurrentPage:l,fetchNotifications:I,sidebarOpen:B,setSidebarOpen:C}):Object(d.jsx)(le,{})}),Object(d.jsx)(v.a,{exact:!0,path:"/:id/update",element:u?Object(d.jsx)(pe,{user:u,currentPage:o,setCurrentPage:l,updateType:"user",sidebarOpen:B,setSidebarOpen:C}):Object(d.jsx)(le,{})}),Object(d.jsx)(v.a,{exact:!0,path:"/login",element:u?Object(d.jsx)(R,{currentPage:o,setCurrentPage:l,fetchNotifications:I,sidebarOpen:B,setSidebarOpen:C}):Object(d.jsx)(le,{})}),Object(d.jsx)(v.a,{exact:!0,path:"/signup",element:u?Object(d.jsx)(R,{currentPage:o,setCurrentPage:l,fetchNotifications:I,sidebarOpen:B,setSidebarOpen:C}):Object(d.jsx)(ue,{userAuth:a,setUserAuth:s})})]})}),u&&Object(d.jsx)(Ue,{currentPage:o,notificationsCount:k,sidebarOpen:B,setSidebarOpen:C})]})})})};r.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(b,{children:Object(d.jsx)(Xe,{})})}),document.getElementById("root"))},29:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},60:function(e,t,a){},62:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){},98:function(e,t,a){},99:function(e,t,a){}},[[108,1,2]]]);
//# sourceMappingURL=main.8527f00b.chunk.js.map