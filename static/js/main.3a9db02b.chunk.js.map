{"version":3,"sources":["context/AuthReducer.js","context/AuthContext.js","components/loader/Loader.js","components/share/Share.js","components/post/comment/Comment.js","components/post/Post.js","components/timeline/Timeline.js","components/nav/Nav.js","pages/home/Home.js","components/follower/Follower.js","components/centerFeed/CenterFeed.js","pages/profile/Profile.js","components/followFeed/FollowFeed.js","pages/follows/Follows.js","components/postPage/PostPage.js","pages/post/Post.js","pages/login/Login.js","pages/login/Signup.js","apiCalls.js","components/updateUser/UpdateUser.js","pages/update/Update.js","components/exploreFeed/exploreUser/ExploreUser.js","components/exploreFeed/ExploreFeed.js","pages/explore/Explore.js","components/notificationsFeed/notification/Notification.js","components/notificationsFeed/NotificationsFeed.js","pages/notifications/Notifications.js","components/sidebar/Logo.js","components/sidebar/Sidebar.js","App.js","index.js"],"names":["AuthReducer","state","action","type","user","isFetching","error","payload","localStorage","clear","followings","filter","following","INITIAL_STATE","JSON","parse","getItem","AuthContext","createContext","AuthContextProvider","children","useReducer","dispatch","useEffect","setItem","stringify","Provider","value","Loader","className","color","Share","useContext","PF","process","body","useRef","useState","file","setFile","disableButton","setDisableButton","isInvalid","submitHandler","e","a","preventDefault","newPost","userId","_id","current","data","FormData","fileName","Date","now","name","append","img","console","log","axios","post","window","location","reload","src","profilePicture","alt","placeholder","username","onChange","target","ref","URL","createObjectURL","Cancel","onClick","onSubmit","htmlFor","PermMedia","style","display","id","accept","files","disabled","Comment","comment","fetchNotifications","likes","length","like","setLike","isLiked","setIsLiked","currentUser","setUser","showOptions","setShowOptions","showDelete","setShowDelete","showEdit","setShowEdit","editBody","includes","fetchUser","get","res","likeHandler","put","err","delete","sender","recipient","commentId","postId","seen","handleDeleteComment","alert","handleEditComment","updatedComment","edited","editedtimestamp","to","format","createdAt","isAdmin","MoreVert","maxlength","defaultValue","Favorite","FavoriteBorder","Post","page","sidebarOpen","comments","setComments","commentRef","navigate","useNavigate","disableComment","setDisableComment","commentButtonIsInvalid","fetchComments","sort","p1","p2","submitComment","newComment","handleEditPost","updatedPost","handleDeletePost","replace","handleCancelAllOptions","pointerEvents","map","Timeline","setSidebarOpen","loading","setLoading","posts","setPosts","skip","setSkip","fetchPosts","handleScroll","offsetHeight","scrollTop","scrollHeight","onScroll","Nav","profileUser","currentPage","notificationsCount","useParams","followed","setFollowed","postUser","setPostUser","checkFollowing","check","fetchPost","postData","handleClick","TimelineNav","FollowsNav","followers","ProfileNav","Remove","Add","UpdateNav","NotificationsNav","PostNav","Home","setCurrentPage","Follower","friend","handleFollowingStatus","handleChangeFeed","followStatus","setFollowStatus","checkFollowStatus","setTimeout","followingStatus","followerStatus","textDecoration","firstname","lastname","CenterFeed","feed","friends","AccountBox","Chat","Group","title","Edit","about","birthday","date","arr","split","formatBday","website","href","rel","p","Profile","setProfileUser","setFeed","setFriends","userInQuestion","updateFollow","getFollows","followsList","coverPicture","newFeed","FollowFeed","follow","friendsList","Followers","PostPage","setPost","Login","loginErr","setLoginErr","usermail","password","required","CircularProgress","size","Signup","setUserAuth","email","confirmPassword","setCustomValidity","logoutCall","UpdateUser","setError","errorMsg","setErrorMsg","getUser","updatedUser","response","msg","Update","updateType","ExploreFeed","exploreList","Notification","notification","status","getNotifications","content","setContent","contentId","apiRoute","handleMarkAsRead","getReadStatus","handleDelete","deleteNotification","CommentLikeMsg","PostLikeMsg","CommentMsg","MessageOutlined","FollowMsg","PersonAddOutlined","Check","AddAlertOutlined","DeleteForeverOutlined","NotificationsFeed","waitingOnLoad","setWaitingOnLoad","seenNotifications","setSeenNotifications","newNotifications","setNewNotifications","seenFilter","noti","newFilter","handleSeenStatus","updateNotis","updateNotifications","Promise","all","notificationToUpdate","refreshNotifications","then","handleDeleteBatch","deleteBatch","deleteNotis","deleteNotifcations","notificationToDelete","NewNotificationsFeed","SeenNotificationsFeed","Notifications","Logo","version","xmlns","width","height","viewBox","preserveAspectRatio","transform","fill","stroke","d","Sidebar","handleOptionClick","HomeRounded","HomeOutlined","Person","PersonOutlineRounded","NotificationsOutlined","GroupOutlined","Public","Language","ExitToApp","App","userAuth","userData","setUserData","setNotificationsCount","count","notifications","userCheck","basename","exact","path","element","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.3a9db02b.chunk.js","sourcesContent":["const AuthReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case \"LOGIN_START\":\r\n      return {\r\n        user: null,\r\n        isFetching: true,\r\n        error: false,\r\n      };\r\n    case \"LOGIN_SUCCESS\":\r\n      return {\r\n        user: action.payload,\r\n        isFetching: false,\r\n        error: false,\r\n      };\r\n    case \"LOGIN_FAILURE\":\r\n      return {\r\n        user: null,\r\n        isFetching: false,\r\n        error: true,\r\n      };\r\n    case \"LOGOUT\":\r\n      localStorage.clear();\r\n      return {\r\n        user: null,\r\n        isFetching: false,\r\n        error: false,\r\n      };\r\n    case \"FOLLOW\":\r\n      return {\r\n        ...state,\r\n        user: {\r\n          ...state.user,\r\n          followings: [...state.user.followings, action.payload],\r\n        },\r\n      };\r\n    case \"UNFOLLOW\":\r\n      return {\r\n        ...state,\r\n        user: {\r\n          ...state.user,\r\n          followings: state.user.followings.filter(\r\n            (following) => following !== action.payload\r\n          ),\r\n        },\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default AuthReducer;\r\n","import { createContext, useEffect, useReducer } from \"react\";\r\nimport AuthReducer from \"./AuthReducer\";\r\n\r\nconst INITIAL_STATE = {\r\n  user: JSON.parse(localStorage.getItem(\"user\")) || null,\r\n  isFetching: false,\r\n  error: false,\r\n};\r\n\r\nexport const AuthContext = createContext(INITIAL_STATE);\r\n\r\nexport const AuthContextProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(AuthReducer, INITIAL_STATE);\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem(\"user\", JSON.stringify(state.user));\r\n  }, [state.user]);\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        user: state.user,\r\n        isFetching: state.isFetching,\r\n        error: state.error,\r\n        dispatch,\r\n      }}\r\n    >\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport ReactLoading from \"react-loading\";\r\n\r\nexport default function Loader({ type }) {\r\n  return (\r\n    <div className={\"loader-\" + type}>\r\n      <ReactLoading type={\"bars\"} color={\"#4bb44b\"} />\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext, useRef, useState } from \"react\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\nimport axios from \"axios\";\r\nimport \"./Share.scss\";\r\nimport { PermMedia, Cancel } from \"@material-ui/icons\";\r\n\r\nexport default function Share() {\r\n  const { user } = useContext(AuthContext);\r\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n  const body = useRef();\r\n  const [file, setFile] = useState(null);\r\n  const [disableButton, setDisableButton] = useState(\"\");\r\n  const isInvalid = disableButton === \"\";\r\n\r\n  const submitHandler = async (e) => {\r\n    e.preventDefault();\r\n    const newPost = {\r\n      userId: user._id,\r\n      body: body.current.value,\r\n    };\r\n    if (file) {\r\n      const data = new FormData();\r\n      const fileName = Date.now() + file.name;\r\n      data.append(\"name\", fileName);\r\n      data.append(\"file\", file);\r\n      newPost.img = fileName;\r\n      console.log(newPost);\r\n      // not working\r\n      try {\r\n        await axios.post(\r\n          \"https://radiant-oasis-77477.herokuapp.com/api/upload\",\r\n          data\r\n        );\r\n      } catch (err) {}\r\n    }\r\n    try {\r\n      await axios.post(\r\n        \"https://radiant-oasis-77477.herokuapp.com/api/posts\",\r\n        newPost\r\n      );\r\n      window.location.reload();\r\n    } catch (err) {}\r\n  };\r\n\r\n  return (\r\n    <div className=\"share\">\r\n      <div className=\"share-wrapper\">\r\n        <div className=\"share-top\">\r\n          <img\r\n            className=\"share-avatar\"\r\n            src={\r\n              user.profilePicture\r\n                ? PF + user.profilePicture\r\n                : PF + \"assets/noAvatar.png\"\r\n            }\r\n            alt=\"\"\r\n          />\r\n          <input\r\n            placeholder={\"What's on your mind \" + user.username + \"?\"}\r\n            className=\"share-input\"\r\n            onChange={(e) => setDisableButton(e.target.value)}\r\n            ref={body}\r\n          />\r\n        </div>\r\n        <hr className=\"share-hr\" />\r\n        {file && (\r\n          <div className=\"share-img-container\">\r\n            <img className=\"share-img\" src={URL.createObjectURL(file)} alt=\"\" />\r\n            <Cancel\r\n              className=\"share-cancel-img\"\r\n              onClick={() => setFile(null)}\r\n            />\r\n          </div>\r\n        )}\r\n        <form className=\"share-bottom\" onSubmit={submitHandler}>\r\n          <div className=\"share-options\">\r\n            <label htmlFor=\"file\" className=\"share-option\">\r\n              <PermMedia className=\"share-icon\" />\r\n              <span className=\"share-option-text\">Photo or Video</span>\r\n              <input\r\n                style={{ display: \"none\" }}\r\n                type=\"file\"\r\n                id=\"file\"\r\n                accept=\".png,.jpeg,.jpg\"\r\n                onChange={(e) => setFile(e.target.files[0])}\r\n              />\r\n            </label>\r\n          </div>\r\n          <button type=\"submit\" className=\"share-button\" disabled={isInvalid}>\r\n            Share\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useContext, useEffect, useRef } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { AuthContext } from \"../../../context/AuthContext\";\r\nimport axios from \"axios\";\r\nimport { format } from \"timeago.js\";\r\nimport { Favorite, FavoriteBorder, MoreVert } from \"@material-ui/icons\";\r\nimport \"./Comment.scss\";\r\n\r\nexport default function Comment({ comment, fetchNotifications }) {\r\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n  const [like, setLike] = useState(comment.likes.length);\r\n  const [isLiked, setIsLiked] = useState(false);\r\n  const { user: currentUser } = useContext(AuthContext);\r\n  const [user, setUser] = useState({});\r\n  const [showOptions, setShowOptions] = useState(false);\r\n  const [showDelete, setShowDelete] = useState(false);\r\n  const [showEdit, setShowEdit] = useState(false);\r\n  const editBody = useRef();\r\n  const [disableButton, setDisableButton] = useState(\"\");\r\n  const isInvalid = disableButton === \"\" || disableButton === comment.body;\r\n\r\n  // set user like status on comment\r\n  useEffect(() => {\r\n    setIsLiked(comment.likes.includes(currentUser._id));\r\n  }, [currentUser._id, comment.likes]);\r\n\r\n  // fetch user on load\r\n  useEffect(() => {\r\n    const fetchUser = async () => {\r\n      const res = await axios.get(\r\n        `https://radiant-oasis-77477.herokuapp.com/api/users?userId=${comment.userId}`\r\n      );\r\n      setUser(res.data);\r\n    };\r\n    fetchUser();\r\n  }, [comment.userId]);\r\n\r\n  // toggle likes\r\n  const likeHandler = (type) => {\r\n    try {\r\n      axios.put(\r\n        \"https://radiant-oasis-77477.herokuapp.com/api/comments/\" +\r\n          comment._id +\r\n          \"/like\",\r\n        { userId: currentUser._id }\r\n      );\r\n    } catch (err) {}\r\n    setLike(isLiked ? like - 1 : like + 1);\r\n    setIsLiked(!isLiked);\r\n\r\n    if (!isLiked) {\r\n      // send like notification\r\n      try {\r\n        axios.post(\r\n          \"https://radiant-oasis-77477.herokuapp.com/api/notifications/\",\r\n          // \"http://localhost:3000/api/notifications/\",\r\n          {\r\n            sender: currentUser._id,\r\n            recipient: user._id,\r\n            commentId: comment._id,\r\n            postId: comment.postId,\r\n            type: \"commentLike\",\r\n            seen: false,\r\n          }\r\n        );\r\n      } catch (err) {}\r\n    } else if (isLiked) {\r\n      // delete like notification\r\n      try {\r\n        axios.delete(\r\n          \"https://radiant-oasis-77477.herokuapp.com/api/notifications/\",\r\n          // \"http://localhost:3000/api/notifications/\",\r\n          {\r\n            data: {\r\n              sender: currentUser._id,\r\n              recipient: user._id,\r\n              commentId: comment._id,\r\n              postId: comment.postId,\r\n              type: \"commentLike\",\r\n            },\r\n          }\r\n        );\r\n      } catch (err) {}\r\n    }\r\n    fetchNotifications();\r\n  };\r\n\r\n  // delete comment\r\n  const handleDeleteComment = async () => {\r\n    try {\r\n      await axios.delete(\r\n        `https://radiant-oasis-77477.herokuapp.com/api/comments/${comment._id}/`,\r\n        // `http://localhost:3000/api/comments/${comment._id}/`,\r\n        {\r\n          data: {\r\n            userId: currentUser._id,\r\n          },\r\n        }\r\n      );\r\n    } catch (err) {\r\n      alert(err);\r\n    }\r\n    setShowOptions(!showOptions);\r\n    setShowDelete(!showDelete);\r\n    fetchNotifications();\r\n    window.location.reload();\r\n  };\r\n\r\n  // edit comment\r\n  const handleEditComment = async (e) => {\r\n    e.preventDefault();\r\n    const updatedComment = {\r\n      userId: currentUser._id,\r\n      body: editBody.current.value,\r\n      edited: true,\r\n      editedtimestamp: Date.now(),\r\n    };\r\n    try {\r\n      await axios.put(\r\n        `https://radiant-oasis-77477.herokuapp.com/api/comments/${comment._id}/`,\r\n        // `http://localhost:3000/api/comments/${comment._id}/`,\r\n        updatedComment\r\n      );\r\n      window.location.reload();\r\n    } catch (err) {}\r\n  };\r\n\r\n  // open options functionality\r\n  const handleOptions = () => {\r\n    setShowOptions(!showOptions);\r\n    if (showDelete) {\r\n      setShowDelete(!showDelete);\r\n    }\r\n  };\r\n\r\n  // close all options functionality\r\n  const handleCancelAllOptions = () => {\r\n    setShowEdit(false);\r\n    setShowOptions(false);\r\n    setShowDelete(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"comment-container\">\r\n      <Link to={`/profile/${user.username}`}>\r\n        <img\r\n          className=\"comment-avatar\"\r\n          src={PF + \"assets/noAvatar.png\"}\r\n          alt=\"\"\r\n        />\r\n      </Link>\r\n      <div className=\"comment-right\">\r\n        <div className=\"comment-body-container\">\r\n          <div className=\"commenter-info-container\">\r\n            <div className=\"comment-info-left\">\r\n              <Link to={`/profile/${user.username}`}>\r\n                <span className=\"comment-username\">{user.username}</span>\r\n              </Link>\r\n              <span className=\"comment-date\">{format(comment.createdAt)}</span>\r\n            </div>\r\n\r\n            {/* comment options */}\r\n            {(user.username === currentUser.username ||\r\n              currentUser.isAdmin) && (\r\n              <div className=\"comment-info-right\">\r\n                <MoreVert\r\n                  className=\"comment-options-icon\"\r\n                  onClick={() => handleOptions()}\r\n                />\r\n                {showOptions && (\r\n                  <div className=\"comment-options-div\">\r\n                    <button\r\n                      className=\"comment-options-delete\"\r\n                      onClick={() => setShowDelete(!showDelete)}\r\n                    >\r\n                      delete\r\n                    </button>\r\n                    <button\r\n                      className=\"comment-options-edit\"\r\n                      onClick={() => setShowEdit(!showEdit)}\r\n                    >\r\n                      edit\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* comment body */}\r\n          <div className=\"comment-body\">{comment.body}</div>\r\n          {comment.edited && (\r\n            <span className=\"comment-edit\">\r\n              edit: {format(comment.editedtimestamp)}\r\n            </span>\r\n          )}\r\n          {/* edit input container */}\r\n          {showEdit && (\r\n            <div>\r\n              <form onSubmit={handleEditComment}>\r\n                <textarea\r\n                  className=\"edit-input\"\r\n                  type=\"text\"\r\n                  maxlength=\"500\"\r\n                  ref={editBody}\r\n                  onChange={(e) => setDisableButton(e.target.value)}\r\n                  defaultValue={comment.body ? comment.body : null}\r\n                />\r\n                <div className=\"edit-option-buttons-div\">\r\n                  <button\r\n                    disabled={isInvalid}\r\n                    type=\"submit\"\r\n                    className={\r\n                      \"edit-options-button \" +\r\n                      (isInvalid ? \"invalid\" : \"edit-options-submit \")\r\n                    }\r\n                  >\r\n                    edit\r\n                  </button>\r\n                  <button\r\n                    className=\"edit-options-cancel edit-options-button\"\r\n                    onClick={() => handleCancelAllOptions()}\r\n                  >\r\n                    cancel\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          )}\r\n          {/* delete comment options container */}\r\n          {showDelete && (\r\n            <div className=\"delete-comment-container\">\r\n              <span>Are you sure you want to delete this comment?</span>\r\n              <div className=\"delete-comment-button-container\">\r\n                <button\r\n                  className=\"delete-button\"\r\n                  onClick={() => handleDeleteComment()}\r\n                >\r\n                  DELETE\r\n                </button>\r\n                <button\r\n                  className=\"cancel-button\"\r\n                  onClick={() => setShowDelete(!showDelete)}\r\n                >\r\n                  Cancel\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div className=\"comment-like-container\">\r\n          {isLiked ? (\r\n            <Favorite className=\"like-icon\" onClick={likeHandler} />\r\n          ) : (\r\n            <FavoriteBorder className=\"like-icon\" onClick={likeHandler} />\r\n          )}\r\n          {like === 1 ? (\r\n            isLiked ? (\r\n              <span className=\"post-like-counter\">You like this</span>\r\n            ) : (\r\n              <span className=\"post-like-counter\">1 person likes this</span>\r\n            )\r\n          ) : like > 1 ? (\r\n            isLiked ? (\r\n              like === 2 ? (\r\n                <span className=\"post-like-counter\">\r\n                  You and {like - 1} other person like this\r\n                </span>\r\n              ) : (\r\n                <span className=\"post-like-counter\">\r\n                  You and {like - 1} other people like this\r\n                </span>\r\n              )\r\n            ) : (\r\n              <span className=\"post-like-counter\">{like} people like this</span>\r\n            )\r\n          ) : (\r\n            <span className=\"post-like-counter\">Be the first to like this</span>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext, useEffect, useState, useRef } from \"react\";\r\nimport axios from \"axios\";\r\nimport { format } from \"timeago.js\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { MoreVert, Favorite, FavoriteBorder } from \"@material-ui/icons\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\nimport \"./Post.scss\";\r\nimport Comment from \"./comment/Comment\";\r\n\r\nexport default function Post({ post, page, fetchNotifications, sidebarOpen }) {\r\n  const [like, setLike] = useState(post.likes.length);\r\n  const [isLiked, setIsLiked] = useState(false);\r\n  const [comments, setComments] = useState([]);\r\n  const [user, setUser] = useState({});\r\n  const { user: currentUser } = useContext(AuthContext);\r\n  const commentRef = useRef();\r\n  const editBody = useRef();\r\n  let navigate = useNavigate();\r\n  const [showOptions, setShowOptions] = useState(false);\r\n  const [showDelete, setShowDelete] = useState(false);\r\n  const [showEdit, setShowEdit] = useState(false);\r\n  const [disableButton, setDisableButton] = useState(\"\");\r\n  const isInvalid = disableButton === \"\" || disableButton === post.body;\r\n  const [disableComment, setDisableComment] = useState(\"\");\r\n  const commentButtonIsInvalid = disableComment === \"\";\r\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n\r\n  // get likes\r\n  useEffect(() => {\r\n    setIsLiked(post.likes.includes(currentUser._id));\r\n  }, [currentUser._id, post.likes]);\r\n\r\n  // get user\r\n  useEffect(() => {\r\n    const fetchUser = async () => {\r\n      const res = await axios.get(\r\n        `https://radiant-oasis-77477.herokuapp.com/api/users?userId=${post.userId}`\r\n      );\r\n      setUser(res.data);\r\n    };\r\n    fetchUser();\r\n  }, [post.userId]);\r\n\r\n  // get comments\r\n  useEffect(() => {\r\n    const fetchComments = async () => {\r\n      const res = await axios.get(\r\n        `https://radiant-oasis-77477.herokuapp.com/api/posts/${post._id}/comments`\r\n      );\r\n      setComments(\r\n        res.data.sort((p1, p2) => {\r\n          return new Date(p1.createdAt) - new Date(p2.createdAt);\r\n        })\r\n      );\r\n    };\r\n    if (post.comments) {\r\n      fetchComments();\r\n    }\r\n  }, [user]);\r\n\r\n  // toggle likes\r\n  const likeHandler = () => {\r\n    try {\r\n      axios.put(\r\n        `https://radiant-oasis-77477.herokuapp.com/api/posts/${post._id}/like`,\r\n        { userId: currentUser._id }\r\n      );\r\n    } catch (err) {}\r\n    setLike(isLiked ? like - 1 : like + 1);\r\n    setIsLiked(!isLiked);\r\n\r\n    if (!isLiked) {\r\n      // send like notification\r\n      try {\r\n        axios.post(\r\n          \"https://radiant-oasis-77477.herokuapp.com/api/notifications/\",\r\n          // \"http://localhost:3000/api/notifications/\",\r\n          {\r\n            sender: currentUser._id,\r\n            recipient: user._id,\r\n            postId: post._id,\r\n            commentId: null,\r\n            type: \"postLike\",\r\n            seen: false,\r\n          }\r\n        );\r\n      } catch (err) {}\r\n    } else if (isLiked) {\r\n      // delete like notification\r\n      try {\r\n        axios.delete(\r\n          \"https://radiant-oasis-77477.herokuapp.com/api/notifications/\",\r\n          // \"http://localhost:3000/api/notifications/\",\r\n          {\r\n            data: {\r\n              sender: currentUser._id,\r\n              recipient: user._id,\r\n              postId: post._id,\r\n              commentId: null,\r\n              type: \"postLike\",\r\n            },\r\n          }\r\n        );\r\n      } catch (err) {}\r\n    }\r\n    fetchNotifications();\r\n  };\r\n\r\n  // submit comment\r\n  const submitComment = async (e) => {\r\n    e.preventDefault();\r\n    const newComment = {\r\n      userId: currentUser._id,\r\n      body: commentRef.current.value,\r\n      postId: post._id,\r\n      sender: currentUser._id,\r\n      recipient: user._id,\r\n      type: \"comment\",\r\n      seen: false,\r\n    };\r\n    // send comment post request\r\n    try {\r\n      await axios.post(\r\n        `https://radiant-oasis-77477.herokuapp.com/api/posts/${post._id}/comment`,\r\n        // `http://localhost:3000/api/posts/${post._id}/comment`,\r\n        newComment\r\n      );\r\n    } catch (err) {}\r\n    window.location.reload();\r\n    fetchNotifications();\r\n  };\r\n\r\n  // edit post\r\n  const handleEditPost = async (e) => {\r\n    e.preventDefault();\r\n    const updatedPost = {\r\n      userId: currentUser._id,\r\n      body: editBody.current.value,\r\n      edited: true,\r\n      editedtimestamp: Date.now(),\r\n    };\r\n    try {\r\n      await axios.put(\r\n        `https://radiant-oasis-77477.herokuapp.com/api/posts/${post._id}`,\r\n        // `http://localhost:3000/api/posts/${post._id}/`,\r\n        updatedPost\r\n      );\r\n      window.location.reload();\r\n    } catch (err) {}\r\n  };\r\n\r\n  // delete post\r\n  const handleDeletePost = async () => {\r\n    try {\r\n      await axios.delete(\r\n        `https://radiant-oasis-77477.herokuapp.com/api/posts/${post._id}/`,\r\n        // `http://localhost:3000/api/posts/${post._id}/`,\r\n        {\r\n          data: {\r\n            userId: currentUser._id,\r\n          },\r\n        }\r\n      );\r\n    } catch (err) {\r\n      alert(err);\r\n    }\r\n    setShowOptions(!showOptions);\r\n    setShowDelete(!showDelete);\r\n    fetchNotifications();\r\n    navigate(\"/\", { replace: true });\r\n    window.location.reload();\r\n  };\r\n\r\n  // options button functionality\r\n  const handleShowOptions = () => {\r\n    setShowOptions(!showOptions);\r\n    if (showEdit) {\r\n      setShowEdit(!showEdit);\r\n    }\r\n    if (showDelete) {\r\n      setShowEdit(!showDelete);\r\n    }\r\n  };\r\n\r\n  // close all options\r\n  const handleCancelAllOptions = () => {\r\n    setShowEdit(false);\r\n    setShowOptions(false);\r\n    setShowDelete(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"post\">\r\n      {showDelete && (\r\n        <div className=\"delete-post-container\">\r\n          <span className=\"delete-post-message\">\r\n            Are you sure you want to delete this post?\r\n          </span>\r\n          <div className=\"delete-post-button-container\">\r\n            <button\r\n              className=\"delete-button\"\r\n              onClick={() => handleDeletePost()}\r\n            >\r\n              DELETE\r\n            </button>\r\n            <button\r\n              className=\"cancel-button\"\r\n              onClick={() => handleCancelAllOptions()}\r\n            >\r\n              Cancel\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n      <div\r\n        className=\"post-wrapper\"\r\n        style={sidebarOpen ? { pointerEvents: \"none\" } : {}}\r\n      >\r\n        <div className=\"post-top\">\r\n          <div className=\"post-top-left\">\r\n            <Link to={`/profile/${user.username}`}>\r\n              <img\r\n                className=\"post-avatar\"\r\n                src={\r\n                  user.profilePicture\r\n                    ? PF + user.profilePicture\r\n                    : PF + \"assets/noAvatar.png\"\r\n                }\r\n                alt=\"\"\r\n              />\r\n              <span className=\"post-username\">{user.username}</span>\r\n            </Link>\r\n            <span className=\"post-date\">{format(post.createdAt)}</span>\r\n          </div>\r\n          {/* options button - delete/edit */}\r\n          {(user.username === currentUser.username || currentUser.isAdmin) && (\r\n            <div className=\"post-top-right\">\r\n              <MoreVert\r\n                className=\"post-options-icon\"\r\n                onClick={() => handleShowOptions()}\r\n              />\r\n              {showOptions && !showDelete && !showEdit && (\r\n                <div className=\"post-options-div\">\r\n                  <button\r\n                    className=\"post-options-delete\"\r\n                    onClick={() => setShowDelete(!showDelete)}\r\n                  >\r\n                    delete post\r\n                  </button>\r\n                  <button\r\n                    className=\"post-options-edit\"\r\n                    onClick={() => setShowEdit(!showEdit)}\r\n                  >\r\n                    edit post\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n        {/* Post content */}\r\n        <div className=\"post-center\">\r\n          <span className=\"post-body\">{post?.body}</span>\r\n          {/* edit input container */}\r\n          {showEdit && (\r\n            <div>\r\n              <form onSubmit={handleEditPost}>\r\n                <textarea\r\n                  className=\"edit-input\"\r\n                  type=\"text\"\r\n                  maxlength=\"500\"\r\n                  ref={editBody}\r\n                  onChange={(e) => setDisableButton(e.target.value)}\r\n                  defaultValue={post?.body ? post?.body : null}\r\n                />\r\n                <button\r\n                  disabled={isInvalid}\r\n                  type=\"submit\"\r\n                  className={isInvalid ? \"invalid\" : \"edit-options-submit \"}\r\n                >\r\n                  edit\r\n                </button>\r\n                <button\r\n                  className=\"edit-options-cancel\"\r\n                  onClick={() => handleCancelAllOptions()}\r\n                >\r\n                  cancel\r\n                </button>\r\n              </form>\r\n            </div>\r\n          )}\r\n          {post.edited && (\r\n            <span className=\"post-edit\">\r\n              edit: {format(post.editedtimestamp)}\r\n            </span>\r\n          )}\r\n          <img className=\"post-img\" src={PF + post.img} alt=\"\" />\r\n        </div>\r\n        <div className=\"post-bottom\">\r\n          <div className=\"post-bottom-left\">\r\n            {isLiked ? (\r\n              <Favorite className=\"like-icon\" onClick={likeHandler} />\r\n            ) : (\r\n              <FavoriteBorder className=\"like-icon\" onClick={likeHandler} />\r\n            )}\r\n            {like === 1 ? (\r\n              isLiked ? (\r\n                <span className=\"post-like-counter\">You like this</span>\r\n              ) : (\r\n                <span className=\"post-like-counter\">1 person likes this</span>\r\n              )\r\n            ) : like > 1 ? (\r\n              isLiked ? (\r\n                like === 2 ? (\r\n                  <span className=\"post-like-counter\">\r\n                    You and {like - 1} other person like this\r\n                  </span>\r\n                ) : (\r\n                  <span className=\"post-like-counter\">\r\n                    You and {like - 1} other people like this\r\n                  </span>\r\n                )\r\n              ) : (\r\n                <span className=\"post-like-counter\">\r\n                  {like} people like this\r\n                </span>\r\n              )\r\n            ) : (\r\n              <span className=\"post-like-counter\">\r\n                Be the first to like this\r\n              </span>\r\n            )}\r\n          </div>\r\n        </div>\r\n        <div className=\"post-comments-container\">\r\n          <div className=\"post-comment-input-container\">\r\n            <textarea\r\n              className=\"comment-input\"\r\n              type=\"text\"\r\n              ref={commentRef}\r\n              onChange={(e) => setDisableComment(e.target.value)}\r\n              placeholder=\"add a comment!\"\r\n            />\r\n            <form onSubmit={submitComment}>\r\n              <button type=\"submit\" disabled={commentButtonIsInvalid}>\r\n                comment\r\n              </button>\r\n            </form>\r\n          </div>\r\n          {/* postPage - show all comments */}\r\n          {comments && comments.length > 0 && page === \"postPage\" && (\r\n            <div className=\"post-comments\">\r\n              {comments.map((comment) => (\r\n                <Comment\r\n                  comment={comment}\r\n                  fetchNotifications={fetchNotifications}\r\n                />\r\n              ))}\r\n            </div>\r\n          )}\r\n          {/* timeline - show comments if 1 or 2 */}\r\n          {comments &&\r\n            comments.length > 0 &&\r\n            comments.length < 3 &&\r\n            page === \"timeline\" && (\r\n              <div className=\"post-comments\">\r\n                {comments.map((comment) => (\r\n                  <Comment\r\n                    comment={comment}\r\n                    fetchNotifications={fetchNotifications}\r\n                  />\r\n                ))}\r\n              </div>\r\n            )}\r\n          {/* timeline - show 'view more comments' button */}\r\n          {comments && comments.length > 2 && page === \"timeline\" && (\r\n            <div className=\"post-comments\">\r\n              <Comment\r\n                comment={comments[0]}\r\n                fetchNotifications={fetchNotifications}\r\n              />\r\n              <Link to={\"/post/\" + post._id}>\r\n                <button className=\"view-more-comments-button\">\r\n                  View more comments {\"(\" + post.comments.length + \")\"}\r\n                </button>\r\n              </Link>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport \"./Timeline.scss\";\r\nimport axios from \"axios\";\r\n// component imports\r\nimport Loader from \"../../components/loader/Loader\";\r\nimport Share from \"../share/Share\";\r\nimport Post from \"../post/Post\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\n\r\nexport default function Timeline({ fetchNotifications, setSidebarOpen }) {\r\n  const [loading, setLoading] = useState(true);\r\n  const [posts, setPosts] = useState([]);\r\n  const [skip, setSkip] = useState(0);\r\n  const { user } = useContext(AuthContext);\r\n\r\n  let username = user.username;\r\n\r\n  useEffect(() => {\r\n    const fetchPosts = async () => {\r\n      const res = await axios.get(\r\n        `https://radiant-oasis-77477.herokuapp.com/api/posts/timeline/${user._id}/${skip}`\r\n        // `http://localhost:3000/api/posts/timeline/${user._id}/${skip}`\r\n      );\r\n      setPosts([...posts, ...res.data]);\r\n      setLoading(false);\r\n    };\r\n    if (username) {\r\n      fetchPosts();\r\n    }\r\n  }, [username, user._id, skip]);\r\n\r\n  // infinite scroll functionality\r\n  const handleScroll = (e) => {\r\n    const { offsetHeight, scrollTop, scrollHeight } = e.target;\r\n\r\n    if (offsetHeight + scrollTop > scrollHeight * 0.95) {\r\n      setSkip(posts.length);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"timeline\"\r\n      onScroll={handleScroll}\r\n      onClick={() => setSidebarOpen(false)}\r\n    >\r\n      <>\r\n        {loading ? (\r\n          <Loader type={\"full-screen\"} />\r\n        ) : (\r\n          <div onScroll={handleScroll}>\r\n            <div className=\"timeline-wrapper\">\r\n              {(!username || username === user.username) && <Share />}\r\n              {posts.map((post) => (\r\n                <Post\r\n                  key={post._id}\r\n                  post={post}\r\n                  page=\"timeline\"\r\n                  fetchNotifications={fetchNotifications}\r\n                />\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport { useParams } from \"react-router\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\nimport axios from \"axios\";\r\nimport \"./Nav.scss\";\r\nimport { Add, Remove } from \"@material-ui/icons\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\n\r\nexport default function Nav({\r\n  profileUser,\r\n  currentPage,\r\n  post,\r\n  notificationsCount,\r\n  sidebarOpen,\r\n  setSidebarOpen,\r\n}) {\r\n  const username = useParams().username;\r\n  const postId = useParams().postId;\r\n  const [followed, setFollowed] = useState(false);\r\n  const { user, dispatch } = useContext(AuthContext);\r\n  const [postUser, setPostUser] = useState({});\r\n\r\n  useEffect(() => {\r\n    const checkFollowing = async () => {\r\n      let check = await user.followings.includes(profileUser?._id);\r\n      setFollowed(check);\r\n    };\r\n    checkFollowing();\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (postId) {\r\n      const fetchPost = async () => {\r\n        const postData = await axios.get(\r\n          `https://radiant-oasis-77477.herokuapp.com/api/posts/${postId}`\r\n        );\r\n        const fetchUser = await axios.get(\r\n          `https://radiant-oasis-77477.herokuapp.com/api/users?userId=${postData.data.userId}`\r\n        );\r\n        setPostUser(fetchUser.data);\r\n      };\r\n      fetchPost();\r\n    }\r\n  }, [postId]);\r\n\r\n  const handleClick = async () => {\r\n    console.log(\"followed\", followed);\r\n    try {\r\n      if (followed) {\r\n        await axios.put(\r\n          `https://radiant-oasis-77477.herokuapp.com/api/users/${profileUser._id}/unfollow`,\r\n          {\r\n            userId: user._id,\r\n          }\r\n        );\r\n        dispatch({ type: \"UNFOLLOW\", payload: profileUser._id });\r\n        // delete follow notification\r\n        try {\r\n          axios.delete(\r\n            \"https://radiant-oasis-77477.herokuapp.com/api/notifications/\",\r\n            // \"http://localhost:3000/api/notifications/\",\r\n            {\r\n              data: {\r\n                sender: user._id,\r\n                recipient: profileUser._id,\r\n                postId: null,\r\n                commentId: null,\r\n                type: \"follow\",\r\n              },\r\n            }\r\n          );\r\n        } catch (err) {}\r\n      } else {\r\n        await axios.put(\r\n          `https://radiant-oasis-77477.herokuapp.com/api/users/${profileUser._id}/follow`,\r\n          {\r\n            userId: user._id,\r\n          }\r\n        );\r\n        dispatch({ type: \"FOLLOW\", payload: profileUser._id });\r\n        // send follow notification\r\n        try {\r\n          axios.post(\r\n            \"https://radiant-oasis-77477.herokuapp.com/api/notifications/\",\r\n            // \"http://localhost:3000/api/notifications/\",\r\n            {\r\n              sender: user._id,\r\n              recipient: profileUser._id,\r\n              postId: null,\r\n              commentId: null,\r\n              type: \"follow\",\r\n              seen: false,\r\n            }\r\n          );\r\n        } catch (err) {}\r\n      }\r\n      setFollowed(!followed);\r\n    } catch (err) {}\r\n  };\r\n\r\n  const TimelineNav = () => {\r\n    return (\r\n      <div className=\"navbar\">\r\n        <div className=\"navbar-container\">\r\n          <div className=\"mobile-menu-button-container\">\r\n            <div\r\n              className=\"hamburger\"\r\n              onClick={() => setSidebarOpen(!sidebarOpen)}\r\n            >\r\n              <MenuIcon className=\"hamburger-icon\" />\r\n            </div>\r\n          </div>\r\n          <span className=\"nav-title\">{currentPage}</span>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const FollowsNav = () => {\r\n    return (\r\n      <div className=\"navbar\">\r\n        <div className=\"navbar-container\">\r\n          <div className=\"mobile-menu-button-container\">\r\n            <div\r\n              className=\"hamburger\"\r\n              onClick={() => setSidebarOpen(!sidebarOpen)}\r\n            >\r\n              <MenuIcon className=\"hamburger-icon\" />\r\n            </div>\r\n          </div>\r\n          <span className=\"nav-title\">\r\n            {currentPage === \"Followers\" && (\r\n              <>\r\n                {user.username} - {currentPage} {\" (\"}\r\n                {user.followers.length}\r\n                {\") \"}\r\n              </>\r\n            )}\r\n            {currentPage === \"Following\" && (\r\n              <>\r\n                {user.username} - {currentPage} {\" (\"}\r\n                {user.followings.length}\r\n                {\") \"}\r\n              </>\r\n            )}\r\n          </span>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const ProfileNav = () => {\r\n    return (\r\n      <div className=\"navbar\">\r\n        <div className=\"navbar-container\">\r\n          <div className=\"mobile-menu-button-container\">\r\n            <div\r\n              className=\"hamburger\"\r\n              onClick={() => setSidebarOpen(!sidebarOpen)}\r\n            >\r\n              <MenuIcon className=\"hamburger-icon\" />\r\n            </div>\r\n          </div>\r\n          {profileUser ? (\r\n            <div className=\"nav-info-container\">\r\n              <span className=\"nav-title\">{profileUser.username}</span>\r\n              {username !== user.username && (\r\n                <button className=\"follow-button\" onClick={handleClick}>\r\n                  {followed ? \"Unfollow\" : \"Follow\"}\r\n                  {followed ? <Remove /> : <Add />}\r\n                </button>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <span className=\"nav-title\">Loading...</span>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const UpdateNav = () => {\r\n    return (\r\n      <div className=\"navbar\">\r\n        <div className=\"navbar-container\">\r\n          <div className=\"mobile-menu-button-container\">\r\n            <div\r\n              className=\"hamburger\"\r\n              onClick={() => setSidebarOpen(!sidebarOpen)}\r\n            >\r\n              <MenuIcon className=\"hamburger-icon\" />\r\n            </div>\r\n          </div>\r\n          {user ? (\r\n            <div className=\"nav-info-container\">\r\n              <span className=\"nav-title\">\r\n                {user.username} - update profile\r\n              </span>\r\n            </div>\r\n          ) : (\r\n            <span className=\"nav-title\">Loading...</span>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const NotificationsNav = () => {\r\n    return (\r\n      <div className=\"navbar\">\r\n        <div className=\"navbar-container\">\r\n          <div className=\"mobile-menu-button-container\">\r\n            <div\r\n              className=\"hamburger\"\r\n              onClick={() => setSidebarOpen(!sidebarOpen)}\r\n            >\r\n              <MenuIcon className=\"hamburger-icon\" />\r\n            </div>\r\n          </div>\r\n          {user ? (\r\n            <div className=\"nav-info-container\">\r\n              <span className=\"nav-title\">\r\n                {user.username} - Notifications {\"(\" + notificationsCount + \")\"}\r\n              </span>\r\n            </div>\r\n          ) : (\r\n            <span className=\"nav-title\">Loading...</span>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const PostNav = () => {\r\n    return (\r\n      <div className=\"navbar\">\r\n        <div className=\"navbar-container\">\r\n          <div className=\"mobile-menu-button-container\">\r\n            <div\r\n              className=\"hamburger\"\r\n              onClick={() => setSidebarOpen(!sidebarOpen)}\r\n            >\r\n              <MenuIcon className=\"hamburger-icon\" />\r\n            </div>\r\n          </div>\r\n          {user && post ? (\r\n            <div className=\"nav-info-container\">\r\n              <span className=\"nav-title\">\r\n                {postUser.username} - {\"(\" + post.comments.length + \" replies)\"}\r\n              </span>\r\n            </div>\r\n          ) : (\r\n            <span className=\"nav-title\">Loading...</span>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {currentPage === \"Timeline\" && <TimelineNav />}\r\n      {currentPage === \"Profile\" && <ProfileNav />}\r\n      {currentPage === \"NotUsersProfile\" && <ProfileNav />}\r\n      {currentPage === \"Update\" && <UpdateNav />}\r\n      {currentPage === \"Followers\" && <FollowsNav />}\r\n      {currentPage === \"Following\" && <FollowsNav />}\r\n      {currentPage === \"Notifications\" && <NotificationsNav />}\r\n      {currentPage === \"Post\" && <PostNav />}\r\n      {currentPage === \"Explore\" && <TimelineNav />}\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport \"./Home.scss\";\r\nimport Timeline from \"../../components/timeline/Timeline\";\r\nimport Nav from \"../../components/nav/Nav\";\r\n\r\nexport default function Home({\r\n  currentPage,\r\n  setCurrentPage,\r\n  fetchNotifications,\r\n  sidebarOpen,\r\n  setSidebarOpen,\r\n}) {\r\n  setCurrentPage(\"Timeline\");\r\n  return (\r\n    <div className=\"container\" id=\"container\">\r\n      <Nav\r\n        currentPage={currentPage}\r\n        sidebarOpen={sidebarOpen}\r\n        setSidebarOpen={setSidebarOpen}\r\n      />\r\n      <Timeline\r\n        fetchNotifications={fetchNotifications}\r\n        setSidebarOpen={setSidebarOpen}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import { useContext, useEffect, useState } from \"react\";\r\nimport { Add, Remove } from \"@material-ui/icons\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./Follower.scss\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\nimport Loader from \"../../components/loader/Loader\";\r\n\r\nexport default function Follower({\r\n  friend,\r\n  handleFollowingStatus,\r\n  handleChangeFeed,\r\n  sidebarOpen,\r\n}) {\r\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n  const { user: currentUser } = useContext(AuthContext);\r\n  const [followStatus, setFollowStatus] = useState(\"\");\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const checkFollowStatus = async () => {\r\n      setTimeout(async function () {\r\n        if (friend._id === (await currentUser._id)) {\r\n          setFollowStatus(\"you\");\r\n        } else if (\r\n          friend.followingStatus === true &&\r\n          friend.followerStatus === true\r\n        ) {\r\n          setFollowStatus(\"mutual following\");\r\n        } else if (\r\n          friend.followingStatus === false &&\r\n          friend.followerStatus === true\r\n        ) {\r\n          setFollowStatus(\"follows you\");\r\n        } else if (\r\n          friend.followingStatus === true &&\r\n          friend.followerStatus === false\r\n        ) {\r\n          setFollowStatus(\"doesn't follow you\");\r\n        }\r\n        setLoading(false);\r\n      }, 1000);\r\n    };\r\n    checkFollowStatus();\r\n  });\r\n\r\n  return (\r\n    <div\r\n      className={\r\n        followStatus !== \"you\"\r\n          ? \"follow-container\"\r\n          : \"follow-container current-user-container\"\r\n      }\r\n      key={friend._id}\r\n    >\r\n      {loading ? (\r\n        <Loader type={\"follower\"} />\r\n      ) : (\r\n        <>\r\n          <Link\r\n            to={\"/profile/\" + friend.username}\r\n            style={{ textDecoration: \"none\" }}\r\n            onClick={() => handleChangeFeed(\"posts\")}\r\n          >\r\n            <div className=\"follow-container-left\">\r\n              <img\r\n                src={\r\n                  friend.profilePicture\r\n                    ? PF + friend.profilePicture\r\n                    : PF + \"assets/noAvatar.png\"\r\n                }\r\n                alt=\"\"\r\n                className=\"follow-img\"\r\n              />\r\n              <div className=\"follow-user-info\">\r\n                <span className=\"follow-username\">{friend.username}</span>\r\n                <span className=\"follow-name\">\r\n                  {friend.firstname} {friend.lastname}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </Link>\r\n          {/* follow unfollow button */}\r\n          {followStatus !== \"you\" && (\r\n            <div className=\"follow-container-right\">\r\n              <span className=\"follow-status-span\">{followStatus}</span>\r\n              <button\r\n                disabled={sidebarOpen}\r\n                className=\"follow-button\"\r\n                onClick={() =>\r\n                  handleFollowingStatus(friend.followingStatus, friend)\r\n                }\r\n              >\r\n                {friend.followingStatus ? \"Unfollow \" : \"Follow \"}\r\n                {friend.followingStatus ? <Remove /> : <Add />}\r\n              </button>\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext } from \"react\";\r\nimport \"./CenterFeed.scss\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\nimport { AccountBox, Chat, Group, Edit } from \"@material-ui/icons\";\r\n// component imports\r\nimport Loader from \"../../components/loader/Loader\";\r\nimport Share from \"../share/Share\";\r\nimport Post from \"../post/Post\";\r\nimport Follower from \"../follower/Follower\";\r\n\r\nexport default function CenterFeed({\r\n  profileUser,\r\n  feed,\r\n  handleChangeFeed,\r\n  fetchNotifications,\r\n  loading,\r\n  posts,\r\n  friends,\r\n  handleFollowingStatus,\r\n  sidebarOpen,\r\n}) {\r\n  const { user: currentUser } = useContext(AuthContext);\r\n\r\n  const formatBday = (date) => {\r\n    let arr = date.split(\"-\");\r\n    let formattedDate = arr[1] + \"/\" + arr[2] + \"/\" + arr[0];\r\n    return formattedDate;\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"profile-feed\">\r\n        <div className=\"profile-header\">\r\n          <div className=\"profile-header-wrapper\">\r\n            <div className=\"profile-info\">\r\n              <h4 className=\"profile-info-username\">{profileUser.username}</h4>\r\n              <span className=\"profile-info-name\">\r\n                {profileUser.firstname} {profileUser.lastname}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"profile-header-buttons-container\">\r\n          <div className=\"profile-header-buttons-wrapper\">\r\n            {/* INFO BUTTON */}\r\n            <div\r\n              style={sidebarOpen ? { pointerEvents: \"none\" } : {}}\r\n              onClick={() => handleChangeFeed(\"info\")}\r\n              className={\r\n                \"profile-info-clickable \" +\r\n                (feed === \"info\" ? \"pic-active\" : \"\")\r\n              }\r\n            >\r\n              info\r\n              <AccountBox className=\"profile-info-icon\" />\r\n            </div>\r\n            {/* POSTS BUTTON */}\r\n            <div\r\n              style={sidebarOpen ? { pointerEvents: \"none\" } : {}}\r\n              onClick={() => handleChangeFeed(\"posts\")}\r\n              className={\r\n                \"profile-info-clickable \" +\r\n                (feed === \"posts\" ? \"pic-active\" : \"\")\r\n              }\r\n            >\r\n              <span className=\"count\">\r\n                {profileUser.posts ? profileUser.posts.length : \"0\"}\r\n              </span>\r\n              posts\r\n              <Chat className=\"profile-info-icon\" />\r\n            </div>\r\n            {/* FOLLOWERS BUTTON */}\r\n            <div\r\n              style={sidebarOpen ? { pointerEvents: \"none\" } : {}}\r\n              onClick={() => handleChangeFeed(\"followers\")}\r\n              className={\r\n                \"profile-info-clickable \" +\r\n                (feed === \"followers\" ? \"pic-active\" : \"\")\r\n              }\r\n            >\r\n              <span className=\"count\">\r\n                {profileUser.followers ? profileUser.followers.length : \"0\"}\r\n              </span>\r\n              followers\r\n              <Group className=\"profile-info-icon\" />\r\n            </div>\r\n            {/* FOLLOWING BUTTON */}\r\n            <div\r\n              style={sidebarOpen ? { pointerEvents: \"none\" } : {}}\r\n              onClick={() => handleChangeFeed(\"following\")}\r\n              className={\r\n                \"profile-info-clickable \" +\r\n                (feed === \"following\" ? \"pic-active\" : \"\")\r\n              }\r\n            >\r\n              <span className=\"count\">\r\n                {profileUser.followings ? profileUser.followings.length : \"0\"}\r\n              </span>\r\n              following\r\n              <Group className=\"profile-info-icon\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {loading ? (\r\n          <Loader type={\"center-feed\"} />\r\n        ) : (\r\n          <div className=\"feed\">\r\n            {/* INFO FEED */}\r\n            {feed === \"info\" && (\r\n              <div className=\"feed-wrapper\">\r\n                <div className=\"profileInfo-container\">\r\n                  {currentUser._id === profileUser._id && (\r\n                    <Link to={`/${currentUser._id}/update`}>\r\n                      <div title=\"update user info\">\r\n                        <Edit className=\"edit-icon\" />\r\n                      </div>\r\n                    </Link>\r\n                  )}\r\n                  <div className=\"profile-info-div\">\r\n                    <div className=\"profile-info-strong\">Name:</div>{\" \"}\r\n                    <div className=\"profile-info-content\">\r\n                      {profileUser.firstname} {profileUser.lastname}\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"profile-info-div\">\r\n                    {\" \"}\r\n                    <div className=\"profile-info-strong\">Bio:</div>{\" \"}\r\n                    <div className=\"profile-info-content\">\r\n                      {profileUser.about}\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"profile-info-div\">\r\n                    <div className=\"profile-info-strong\">Birthday:</div>{\" \"}\r\n                    <div className=\"profile-info-content\">\r\n                      {profileUser.birthday\r\n                        ? formatBday(profileUser.birthday)\r\n                        : \"private\"}\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"profile-info-div\">\r\n                    <div className=\"profile-info-strong\">Location:</div>{\" \"}\r\n                    <div className=\"profile-info-content\">\r\n                      {profileUser.location ? profileUser.location : \"private\"}\r\n                    </div>\r\n                  </div>\r\n                  {/* WEBSITE */}\r\n                  <div className=\"profile-info-div\">\r\n                    <div className=\"profile-info-strong\">Website:</div>{\" \"}\r\n                    <div className=\"profile-info-content\">\r\n                      {profileUser.website ? (\r\n                        <a\r\n                          href={profileUser.website}\r\n                          target=\"_blank\"\r\n                          rel=\"noopener noreferrer\"\r\n                          className=\"profile-website-a\"\r\n                        >\r\n                          {profileUser.website}\r\n                        </a>\r\n                      ) : (\r\n                        \"private\"\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n            {/* POST FEED */}\r\n            {feed === \"posts\" && (\r\n              <div className=\"feed-wrapper\">\r\n                {(!profileUser.username ||\r\n                  profileUser.username === currentUser.username) && <Share />}\r\n                {posts.length > 0 ? (\r\n                  <>\r\n                    {posts.map((p) => (\r\n                      <Post\r\n                        key={p._id}\r\n                        post={p}\r\n                        page=\"timeline\"\r\n                        fetchNotifications={fetchNotifications}\r\n                      />\r\n                    ))}\r\n                  </>\r\n                ) : (\r\n                  <span className=\"no-content-message\">No posts yet </span>\r\n                )}\r\n              </div>\r\n            )}\r\n            {/* FOLLOWERS FEED */}\r\n            {feed === \"followers\" && (\r\n              <div className=\"feed-wrapper\">\r\n                {friends.length > 0 ? (\r\n                  <>\r\n                    {friends.map((friend) => (\r\n                      <Follower\r\n                        friend={friend}\r\n                        handleChangeFeed={handleChangeFeed}\r\n                        handleFollowingStatus={handleFollowingStatus}\r\n                      />\r\n                    ))}\r\n                  </>\r\n                ) : (\r\n                  <span className=\"no-content-message\">\r\n                    Nothing to see here \r\n                  </span>\r\n                )}\r\n              </div>\r\n            )}\r\n            {/* FOLLOWING FEED */}\r\n            {feed === \"following\" && (\r\n              <div className=\"feed-wrapper\">\r\n                {friends.length > 0 ? (\r\n                  <>\r\n                    {friends.map((friend) => (\r\n                      <Follower\r\n                        friend={friend}\r\n                        handleChangeFeed={handleChangeFeed}\r\n                        handleFollowingStatus={handleFollowingStatus}\r\n                      />\r\n                    ))}\r\n                  </>\r\n                ) : (\r\n                  <span className=\"no-content-message\">\r\n                    Nothing to see here \r\n                  </span>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","import { useEffect, useState, useContext } from \"react\";\r\nimport { useParams } from \"react-router\";\r\nimport axios from \"axios\";\r\nimport CenterFeed from \"../../components/centerFeed/CenterFeed\";\r\nimport \"./Profile.scss\";\r\nimport Nav from \"../../components/nav/Nav\";\r\nimport ProfileInfo from \"../../components/profileInfo/ProfileInfo\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\n\r\nexport default function Profile({\r\n  currentPage,\r\n  setCurrentPage,\r\n  fetchNotifications,\r\n  sidebarOpen,\r\n  setSidebarOpen,\r\n}) {\r\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n  const [profileUser, setProfileUser] = useState({});\r\n  const username = useParams().username;\r\n  const [followed, setFollowed] = useState(false);\r\n  const [feed, setFeed] = useState(\"posts\");\r\n  const { user: currentUser, dispatch } = useContext(AuthContext);\r\n  const [skip, setSkip] = useState(0);\r\n  const [loading, setLoading] = useState(true);\r\n  const [posts, setPosts] = useState([]);\r\n  const [friends, setFriends] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const checkFollowing = async () => {\r\n      let check = await currentUser.followings.includes(profileUser?._id);\r\n      setFollowed(check);\r\n    };\r\n    checkFollowing();\r\n    // remove unused error\r\n    if (followed) {\r\n      return null;\r\n    }\r\n  });\r\n\r\n  // gets the profiles user info\r\n  useEffect(() => {\r\n    const fetchUser = async () => {\r\n      const res = await axios.get(\r\n        `https://radiant-oasis-77477.herokuapp.com/api/users?username=${username}`\r\n      );\r\n      setProfileUser(res.data);\r\n      setFeed(\"posts\");\r\n    };\r\n    fetchUser();\r\n    if (username === currentUser.username) {\r\n      setCurrentPage(\"Profile\");\r\n    } else {\r\n      setCurrentPage(\"NotUsersProfile\");\r\n    }\r\n  }, [username, currentPage]);\r\n\r\n  // gets posts\r\n  useEffect(() => {\r\n    const fetchPosts = async () => {\r\n      const res = await axios.get(\r\n        `https://radiant-oasis-77477.herokuapp.com/api/posts/profile/${profileUser.username}/${skip}`\r\n        // `http://localhost:3000/api/posts/profile/${profileUser.username}/${skip}`\r\n      );\r\n      setPosts([...posts, ...res.data]);\r\n      setLoading(false);\r\n    };\r\n    if (feed === \"posts\" && profileUser.username) {\r\n      fetchPosts();\r\n    }\r\n  }, [profileUser.username, currentUser._id, skip, feed]);\r\n\r\n  // FOLLOW FEED FUNCTIONALITY\r\n  // FOLLOW FEED FUNCTIONALITY\r\n  const handleFollowingStatus = async (followed, userInQuestion) => {\r\n    const updateFollow = async () => {\r\n      try {\r\n        if (followed) {\r\n          await axios.put(\r\n            `https://radiant-oasis-77477.herokuapp.com/api/users/${userInQuestion._id}/unfollow`,\r\n            {\r\n              userId: currentUser._id,\r\n            }\r\n          );\r\n          dispatch({ type: \"UNFOLLOW\", payload: userInQuestion._id });\r\n          // delete follow notification\r\n          try {\r\n            axios.delete(\r\n              \"https://radiant-oasis-77477.herokuapp.com/api/notifications/\",\r\n              // \"http://localhost:3000/api/notifications/\",\r\n              {\r\n                data: {\r\n                  sender: currentUser._id,\r\n                  recipient: userInQuestion._id,\r\n                  postId: null,\r\n                  commentId: null,\r\n                  type: \"follow\",\r\n                },\r\n              }\r\n            );\r\n          } catch (err) {}\r\n        } else {\r\n          await axios.put(\r\n            `https://radiant-oasis-77477.herokuapp.com/api/users/${userInQuestion._id}/follow`,\r\n            {\r\n              userId: currentUser._id,\r\n            }\r\n          );\r\n          dispatch({ type: \"FOLLOW\", payload: userInQuestion._id });\r\n          // send follow notification\r\n          try {\r\n            axios.post(\r\n              \"https://radiant-oasis-77477.herokuapp.com/api/notifications/\",\r\n              // \"http://localhost:3000/api/notifications/\",\r\n              {\r\n                sender: currentUser._id,\r\n                recipient: userInQuestion._id,\r\n                postId: null,\r\n                commentId: null,\r\n                type: \"follow\",\r\n                seen: false,\r\n              }\r\n            );\r\n          } catch (err) {}\r\n        }\r\n      } catch (err) {}\r\n    };\r\n\r\n    updateFollow();\r\n  };\r\n\r\n  // update follows on infinite scroll\r\n  useEffect(() => {\r\n    const getFollows = async () => {\r\n      try {\r\n        const followsList = await axios.get(\r\n          `https://radiant-oasis-77477.herokuapp.com/api/users/${profileUser._id}/${feed}-profile/${currentUser._id}/${skip}`\r\n          // `http://localhost:3000/api/users/${profileUser._id}/${feed}-profile/${currentUser._id}/${skip}`\r\n        );\r\n        setFriends([...friends, ...followsList.data]);\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    };\r\n    if (feed !== \"posts\") {\r\n      getFollows();\r\n    }\r\n  }, [skip]);\r\n\r\n  // update page on new follow or feed switch\r\n  useEffect(() => {\r\n    const getFollows = async () => {\r\n      setTimeout(async function () {\r\n        try {\r\n          const followsList = await axios.get(\r\n            `https://radiant-oasis-77477.herokuapp.com/api/users/${profileUser._id}/${feed}-profile/${currentUser._id}/0`\r\n            // `http://localhost:3000/api/users/${profileUser._id}/${feed}-profile/${currentUser._id}/0`\r\n          );\r\n          setFriends(followsList.data);\r\n        } catch (err) {\r\n          console.log(err);\r\n        }\r\n        setLoading(false);\r\n      }, 300);\r\n    };\r\n    if (feed !== \"posts\") {\r\n      getFollows();\r\n    }\r\n  }, [feed, profileUser.username]);\r\n\r\n  // infinite scroll functionality\r\n  const handleScroll = (e) => {\r\n    const { offsetHeight, scrollTop, scrollHeight } = e.target;\r\n\r\n    if (offsetHeight + scrollTop > scrollHeight * 0.98) {\r\n      if (feed === \"posts\" && posts.length > skip + 4) {\r\n        setSkip(posts.length);\r\n      } else if (feed !== \"posts\" && friends.length > skip + 9) {\r\n        setSkip(friends.length);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleChangeFeed = (newFeed) => {\r\n    setPosts([]);\r\n    setFriends([]);\r\n    setLoading(true);\r\n    setSkip(0);\r\n    setFeed(newFeed);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"container\" id=\"container\">\r\n        <div className=\"profile-right\">\r\n          <Nav\r\n            user={currentUser}\r\n            profileUser={profileUser}\r\n            currentPage={currentPage}\r\n            sidebarOpen={sidebarOpen}\r\n            setSidebarOpen={setSidebarOpen}\r\n          />\r\n          <div\r\n            className=\"profile-right-content\"\r\n            onClick={() => setSidebarOpen(false)}\r\n            onScroll={handleScroll}\r\n          >\r\n            <div className=\"profile-right-top\">\r\n              <div className=\"profile-cover\">\r\n                <img\r\n                  className=\"profile-cover-img\"\r\n                  src={\r\n                    profileUser.coverPicture\r\n                      ? PF + profileUser.coverPicture\r\n                      : PF + \"assets/cover.png\"\r\n                  }\r\n                  alt=\"\"\r\n                />\r\n                <img\r\n                  className=\"profile-avatar\"\r\n                  src={\r\n                    profileUser.profilePicture\r\n                      ? PF + profileUser.profilePicture\r\n                      : PF + \"assets/noAvatar.png\"\r\n                  }\r\n                  alt=\"\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"profile-right-bottom\">\r\n              <CenterFeed\r\n                profileUser={profileUser}\r\n                feed={feed}\r\n                handleChangeFeed={handleChangeFeed}\r\n                fetchNotifications={fetchNotifications}\r\n                loading={loading}\r\n                posts={posts}\r\n                friends={friends}\r\n                handleFollowingStatus={handleFollowingStatus}\r\n                sidebarOpen={sidebarOpen}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","import { useEffect, useState, useContext } from \"react\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\nimport axios from \"axios\";\r\nimport Follower from \"../follower/Follower\";\r\nimport Loader from \"../../components/loader/Loader\";\r\nimport \"./FollowFeed.scss\";\r\n\r\nexport default function FollowFeed({\r\n  currentPage,\r\n  setCurrentPage,\r\n  follow,\r\n  sidebarOpen,\r\n  setSidebarOpen,\r\n}) {\r\n  setCurrentPage(follow);\r\n  const [loading, setLoading] = useState(true);\r\n  const [friends, setFriends] = useState([]);\r\n  const [skip, setSkip] = useState(0);\r\n  const { user: currentUser, dispatch } = useContext(AuthContext);\r\n\r\n  const handleFollowingStatus = async (followed, userInQuestion) => {\r\n    try {\r\n      if (followed) {\r\n        await axios.put(\r\n          `https://radiant-oasis-77477.herokuapp.com/api/users/${userInQuestion._id}/unfollow`,\r\n          {\r\n            userId: currentUser._id,\r\n          }\r\n        );\r\n        dispatch({ type: \"UNFOLLOW\", payload: userInQuestion._id });\r\n        // delete follow notification\r\n        try {\r\n          axios.delete(\r\n            \"https://radiant-oasis-77477.herokuapp.com/api/notifications/\",\r\n            // \"http://localhost:3000/api/notifications/\",\r\n            {\r\n              data: {\r\n                sender: currentUser._id,\r\n                recipient: userInQuestion._id,\r\n                postId: null,\r\n                commentId: null,\r\n                type: \"follow\",\r\n              },\r\n            }\r\n          );\r\n        } catch (err) {}\r\n      } else {\r\n        await axios.put(\r\n          `https://radiant-oasis-77477.herokuapp.com/api/users/${userInQuestion._id}/follow`,\r\n          {\r\n            userId: currentUser._id,\r\n          }\r\n        );\r\n        dispatch({ type: \"FOLLOW\", payload: userInQuestion._id });\r\n        // send follow notification\r\n        try {\r\n          axios.post(\r\n            \"https://radiant-oasis-77477.herokuapp.com/api/notifications/\",\r\n            // \"http://localhost:3000/api/notifications/\",\r\n            {\r\n              sender: currentUser._id,\r\n              recipient: userInQuestion._id,\r\n              postId: null,\r\n              commentId: null,\r\n              type: \"follow\",\r\n              seen: false,\r\n            }\r\n          );\r\n        } catch (err) {}\r\n      }\r\n    } catch (err) {}\r\n  };\r\n\r\n  // update page on infinite scroll\r\n  useEffect(() => {\r\n    const getFollows = async () => {\r\n      try {\r\n        const friendsList = await axios.get(\r\n          `https://radiant-oasis-77477.herokuapp.com/api/users/${currentUser._id}/${follow}/${skip}`\r\n          // `http://localhost:3000/api/users/${currentUser._id}/${follow}/${skip}`\r\n        );\r\n        setFriends([...friends, ...friendsList.data]);\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n      setLoading(false);\r\n    };\r\n    getFollows();\r\n  }, [skip]);\r\n\r\n  // update page on new follow\r\n  useEffect(() => {\r\n    const getFollows = async () => {\r\n      try {\r\n        const friendsList = await axios.get(\r\n          `https://radiant-oasis-77477.herokuapp.com/api/users/${currentUser._id}/${follow}/0`\r\n          // `http://localhost:3000/api/users/${currentUser._id}/${follow}/0`\r\n        );\r\n        setFriends(friendsList.data);\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n      setLoading(false);\r\n    };\r\n    getFollows();\r\n  }, [currentUser, currentPage]);\r\n\r\n  // infinite scroll functionality\r\n  const handleScroll = (e) => {\r\n    const { offsetHeight, scrollTop, scrollHeight } = e.target;\r\n\r\n    if (offsetHeight + scrollTop > scrollHeight * 0.95) {\r\n      setSkip(friends.length);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"followfeed\"\r\n      onScroll={handleScroll}\r\n      onClick={() => setSidebarOpen(false)}\r\n    >\r\n      {loading ? (\r\n        <Loader type={\"full-screen\"} />\r\n      ) : (\r\n        <div className=\"followfeed-wrapper\">\r\n          {friends.length > 0 ? (\r\n            <>\r\n              {friends.map((friend) => (\r\n                <Follower\r\n                  friend={friend}\r\n                  handleFollowingStatus={handleFollowingStatus}\r\n                  key={friend._id}\r\n                  sidebarOpen={sidebarOpen}\r\n                />\r\n              ))}\r\n            </>\r\n          ) : (\r\n            <>\r\n              {follow === \"Following\" ? (\r\n                <span className=\"no-explore-message\">\r\n                  Find users to follow in the Explore tab!\r\n                </span>\r\n              ) : (\r\n                <span className=\"no-explore-message\">No followers yet!</span>\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport \"./Follows.scss\";\r\nimport FollowFeed from \"../../components/followFeed/FollowFeed\";\r\nimport Nav from \"../../components/nav/Nav\";\r\n\r\nexport default function Followers({\r\n  currentPage,\r\n  setCurrentPage,\r\n  follow,\r\n  sidebarOpen,\r\n  setSidebarOpen,\r\n}) {\r\n  return (\r\n    <div className=\"container\" id=\"container\">\r\n      <Nav\r\n        currentPage={currentPage}\r\n        sidebarOpen={sidebarOpen}\r\n        setSidebarOpen={setSidebarOpen}\r\n      />\r\n      <FollowFeed\r\n        follow={follow}\r\n        currentPage={currentPage}\r\n        setCurrentPage={setCurrentPage}\r\n        setSidebarOpen={setSidebarOpen}\r\n        sidebarOpen={sidebarOpen}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport Loader from \"../loader/Loader\";\r\nimport Post from \"../post/Post\";\r\n\r\nexport default function PostPage({\r\n  post,\r\n  fetchNotifications,\r\n  sidebarOpen,\r\n  setSidebarOpen,\r\n}) {\r\n  console.log(post);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (post) {\r\n      setLoading(false);\r\n    }\r\n  }, [post]);\r\n\r\n  return (\r\n    <div\r\n      className=\"timeline\"\r\n      onClick={() => {\r\n        setSidebarOpen(false);\r\n      }}\r\n    >\r\n      <>\r\n        {loading ? (\r\n          <Loader type={\"full-screen\"} />\r\n        ) : (\r\n          <div>\r\n            <div className=\"timeline-wrapper\">\r\n              <Post\r\n                key={post._id}\r\n                post={post}\r\n                page=\"postPage\"\r\n                fetchNotifications={fetchNotifications}\r\n                sidebarOpen={sidebarOpen}\r\n              />\r\n            </div>\r\n          </div>\r\n        )}\r\n      </>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useParams } from \"react-router\";\r\nimport axios from \"axios\";\r\nimport PostPage from \"../../components/postPage/PostPage\";\r\nimport Nav from \"../../components/nav/Nav\";\r\nimport \"./Post.scss\";\r\n\r\nexport default function Post({\r\n  user,\r\n  currentPage,\r\n  setCurrentPage,\r\n  fetchNotifications,\r\n  sidebarOpen,\r\n  setSidebarOpen,\r\n}) {\r\n  setCurrentPage(\"Post\");\r\n  const postId = useParams().postId;\r\n  const [post, setPost] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const fetchPost = async () => {\r\n      const res = await axios.get(\r\n        `https://radiant-oasis-77477.herokuapp.com/api/posts/${postId}`\r\n      );\r\n      setPost(res.data);\r\n    };\r\n    fetchPost();\r\n  }, [postId]);\r\n\r\n  return (\r\n    <div className=\"container\" id=\"container\">\r\n      <Nav\r\n        user={user}\r\n        currentPage={currentPage}\r\n        post={post}\r\n        setSidebarOpen={setSidebarOpen}\r\n        sidebarOpen={sidebarOpen}\r\n      />\r\n      <PostPage\r\n        user={user}\r\n        post={post}\r\n        fetchNotifications={fetchNotifications}\r\n        setSidebarOpen={setSidebarOpen}\r\n        sidebarOpen={sidebarOpen}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import { React, useState, useContext, useRef } from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\n// import { useForm } from \"react-hook-form\";\r\nimport Loader from \"../../components/loader/Loader\";\r\nimport \"./Login.scss\";\r\n// import { loginCall } from \"../../apiCalls\";\r\nimport axios from \"axios\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\nimport { CircularProgress } from \"@material-ui/core\";\r\n\r\nexport default function Login() {\r\n  // const { register, handleSubmit } = useForm();\r\n  const [loginErr, setLoginErr] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // const onSubmit = async (data) => {\r\n  //   setLoading(true);\r\n  //   const formData = JSON.stringify(data);\r\n  //   try {\r\n  //     const req = await fetch(\r\n  //       \"https://radiant-oasis-77477.herokuapp.com/api/auth/login\",\r\n  //       {\r\n  //         method: \"POST\",\r\n  //         body: formData,\r\n  //         headers: {\r\n  //           Accept: \"application/json\",\r\n  //           \"Content-Type\": \"application/json\",\r\n  //         },\r\n  //       }\r\n  //     );\r\n  //     const myJson = await req.json();\r\n  //     if (req.status !== 200) {\r\n  //       setLoginErr(true);\r\n  //       setLoading(false);\r\n  //       return;\r\n  //     }\r\n  //     localStorage.setItem(\"token\", myJson.token);\r\n  //     localStorage.setItem(\"userAuth\", true);\r\n  //     setUserAuth(true);\r\n  //     navigate(\"/\", { replace: true });\r\n  //   } catch (err) {\r\n  //     setLoginErr(true);\r\n  //     setLoading(false);\r\n  //   }\r\n  // };\r\n  let navigate = useNavigate();\r\n  const usermail = useRef();\r\n  const password = useRef();\r\n  const { isFetching, dispatch } = useContext(AuthContext);\r\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n\r\n  const handleClick = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    try {\r\n      dispatch({ type: \"LOGIN_START\" });\r\n      try {\r\n        const res = await axios.post(\r\n          \"https://radiant-oasis-77477.herokuapp.com/api/auth/login\",\r\n          { usermail: usermail.current.value, password: password.current.value }\r\n        );\r\n        dispatch({ type: \"LOGIN_SUCCESS\", payload: res.data });\r\n        setLoading(false);\r\n        navigate(\"/\", { replace: true });\r\n      } catch (err) {\r\n        setLoginErr(true);\r\n        dispatch({ type: \"LOGIN_FAILURE\", payload: err });\r\n        setLoading(false);\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {loading ? (\r\n        <Loader type={\"full-screen\"} />\r\n      ) : (\r\n        <div className=\"login-container\">\r\n          <div className=\"login-left\">\r\n            {/* <span className=\"login-left-title\">nodebook</span> */}\r\n            <div className=\"glow\"></div>\r\n            <img\r\n              className=\"wordmark\"\r\n              src={PF + \"assets/wordmark3.png\"}\r\n              alt=\"\"\r\n            />\r\n          </div>\r\n          <div className=\"login-right\">\r\n            <div className=\"login-form\">\r\n              <form onSubmit={handleClick}>\r\n                <div>\r\n                  <input\r\n                    className=\"form-input\"\r\n                    type=\"text\"\r\n                    placeholder=\"Username or email\"\r\n                    // {...register(\"usermail\", { required: true })}\r\n                    ref={usermail}\r\n                    required\r\n                  ></input>\r\n                </div>\r\n\r\n                <div>\r\n                  <input\r\n                    className=\"form-input\"\r\n                    placeholder=\"Password\"\r\n                    type=\"password\"\r\n                    // {...register(\"password\", { required: true })}\r\n                    ref={password}\r\n                    required\r\n                  ></input>\r\n                </div>\r\n\r\n                <button\r\n                  type=\"submit\"\r\n                  // onClick={((e) => e.preventDefault(), handleSubmit(onSubmit))}\r\n                  disabled={isFetching}\r\n                >\r\n                  {isFetching ? (\r\n                    <CircularProgress color=\"white\" size=\"20px\" />\r\n                  ) : (\r\n                    \"Login\"\r\n                  )}\r\n                </button>\r\n              </form>\r\n            </div>\r\n            <div className=\"login-sub-container\">\r\n              <p className=\"dont-have-an-account\">\r\n                Don't have an account?\r\n                <Link to=\"/signup\"> Sign-up</Link>\r\n              </p>\r\n              {loginErr && (\r\n                <span className=\"error-span\">\r\n                  Username or password incorrect\r\n                </span>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import { React, useRef } from \"react\";\r\nimport { useNavigate, Link } from \"react-router-dom\";\r\n// import { useForm } from \"react-hook-form\";\r\nimport axios from \"axios\";\r\nimport \"./Login.scss\";\r\n\r\nexport default function Signup({ setUserAuth }) {\r\n  // const { register, handleSubmit } = useForm();\r\n  // const [loginErr, setLoginErr] = useState(false);\r\n  let navigate = useNavigate();\r\n\r\n  const firstname = useRef();\r\n  const lastname = useRef();\r\n  const username = useRef();\r\n  const email = useRef();\r\n  const password = useRef();\r\n  const confirmPassword = useRef();\r\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n\r\n  const handleClick = async (e) => {\r\n    e.preventDefault();\r\n    if (confirmPassword.current.value !== password.current.value) {\r\n      confirmPassword.current.setCustomValidity(\"Passwords don't match!\");\r\n    } else {\r\n      const user = {\r\n        firstname: firstname.current.value,\r\n        lastname: lastname.current.value,\r\n        username: username.current.value,\r\n        email: email.current.value,\r\n        password: password.current.value,\r\n      };\r\n      try {\r\n        await axios.post(\r\n          \"https://radiant-oasis-77477.herokuapp.com/api/auth/register\",\r\n          user\r\n        );\r\n        navigate(\"/login\", { replace: true });\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    }\r\n  };\r\n\r\n  // const onSubmit = async (data) => {\r\n  //   const formData = JSON.stringify(data);\r\n  //   try {\r\n  //     const req = await fetch(\r\n  //       \"https://radiant-oasis-77477.herokuapp.com/api/sign-up\",\r\n  //       {\r\n  //         method: \"POST\",\r\n  //         body: formData,\r\n  //         headers: {\r\n  //           Accept: \"application/json\",\r\n  //           \"Content-Type\": \"application/json\",\r\n  //         },\r\n  //       }\r\n  //     );\r\n  //     const myJson = await req.json();\r\n  //     if (req.status !== 200) {\r\n  //       setLoginErr(true);\r\n  //       return;\r\n  //     }\r\n  //     localStorage.setItem(\"token\", myJson.token);\r\n  //     localStorage.setItem(\"userAuth\", true);\r\n  //     setUserAuth(true);\r\n  //     navigate(\"/\", { replace: true });\r\n  //   } catch (err) {\r\n  //     setLoginErr(true);\r\n  //   }\r\n  // };\r\n\r\n  return (\r\n    <div className=\"login-container\">\r\n      <div className=\"login-left\">\r\n        {/* <span className=\"login-left-title\">nodebook</span> */}\r\n        <div className=\"glow\"></div>\r\n        <img className=\"wordmark\" src={PF + \"assets/wordmark3.png\"} alt=\"\" />\r\n      </div>\r\n      <div className=\"login-right\">\r\n        <div className=\"login-form\">\r\n          <form onSubmit={handleClick}>\r\n            {/* first name */}\r\n            <div>\r\n              <input\r\n                className=\"form-input\"\r\n                type=\"text\"\r\n                placeholder=\"First name\"\r\n                ref={firstname}\r\n                // {...register(\"firstname\", { required: true })}\r\n              ></input>\r\n            </div>\r\n            {/* last name */}\r\n            <div>\r\n              <input\r\n                className=\"form-input\"\r\n                type=\"text\"\r\n                placeholder=\"Last name\"\r\n                ref={lastname}\r\n                // {...register(\"lastname\", { required: true })}\r\n              ></input>\r\n            </div>\r\n            {/* username */}\r\n            <div>\r\n              <input\r\n                className=\"form-input\"\r\n                type=\"text\"\r\n                placeholder=\"Username\"\r\n                ref={username}\r\n                // {...register(\"username\", { required: true })}\r\n              ></input>\r\n            </div>\r\n            {/* email */}\r\n            <div>\r\n              <input\r\n                className=\"form-input\"\r\n                type=\"email\"\r\n                placeholder=\"Email address\"\r\n                ref={email}\r\n                // {...register(\"email\", { required: true })}\r\n              ></input>\r\n            </div>\r\n            {/* password */}\r\n            <div>\r\n              <input\r\n                className=\"form-input\"\r\n                placeholder=\"Password\"\r\n                type=\"password\"\r\n                ref={password}\r\n                // {...register(\"password\", { required: true })}\r\n              ></input>\r\n            </div>\r\n            {/* confirm password */}\r\n            <div>\r\n              <input\r\n                className=\"form-input\"\r\n                placeholder=\"Confirm password\"\r\n                type=\"password\"\r\n                ref={confirmPassword}\r\n                // {...register(\"confirm-password\", { required: true })}\r\n              ></input>\r\n            </div>\r\n\r\n            <button\r\n              type=\"submit\"\r\n              // onClick={((e) => e.preventDefault(), handleSubmit(onSubmit))}\r\n            >\r\n              Sign up\r\n            </button>\r\n          </form>\r\n        </div>\r\n        <div className=\"login-sub-container\">\r\n          <p className=\"dont-have-an-account\">\r\n            Already have an account?\r\n            <Link to=\"/login\"> Login</Link>\r\n          </p>\r\n          {/* {loginErr && <span className=\"error-span\">Error, try again</span>} */}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import axios from \"axios\";\r\n\r\nexport const loginCall = async (userCredential, dispatch) => {\r\n  dispatch({ type: \"LOGIN_START\" });\r\n  try {\r\n    const res = await axios.post(\r\n      \"https://radiant-oasis-77477.herokuapp.com/api/auth/login\",\r\n      userCredential\r\n    );\r\n    dispatch({ type: \"LOGIN_SUCCESS\", payload: res.data });\r\n  } catch (err) {\r\n    dispatch({ type: \"LOGIN_FAILURE\", payload: err });\r\n  }\r\n};\r\n\r\nexport const logoutCall = async (dispatch) => {\r\n  dispatch({ type: \"LOGOUT\", payload: null });\r\n};\r\n","import React, { useRef, useContext, useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\nimport \"./UpdateUser.scss\";\r\nimport axios from \"axios\";\r\nimport { logoutCall } from \"../../apiCalls\";\r\n\r\nexport default function UpdateUser() {\r\n  let firstname = useRef();\r\n  let lastname = useRef();\r\n  let username = useRef();\r\n  let email = useRef();\r\n  let about = useRef();\r\n  let location = useRef();\r\n  let website = useRef();\r\n  let birthday = useRef();\r\n  let navigate = useNavigate();\r\n  const { user: currentUser, dispatch } = useContext(AuthContext);\r\n  const [user, setUser] = useState(\"\");\r\n  const [error, setError] = useState(false);\r\n  const [errorMsg, setErrorMsg] = useState(\"\");\r\n\r\n  // gets up to date user info\r\n  useEffect(() => {\r\n    const getUser = async () => {\r\n      try {\r\n        const res = await axios.get(\r\n          `https://radiant-oasis-77477.herokuapp.com/api/users?username=${currentUser.username}`\r\n        );\r\n        setUser(res.data);\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    };\r\n    getUser();\r\n  }, []);\r\n\r\n  const handleClick = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const updatedUser = {\r\n      firstname: firstname.current.value,\r\n      lastname: lastname.current.value,\r\n      username: username.current.value,\r\n      email: email.current.value,\r\n      about: about.current.value,\r\n      location: location.current.value,\r\n      website: website.current.value,\r\n      birthday: birthday.current.value,\r\n      userId: user._id,\r\n    };\r\n    try {\r\n      await axios.put(\r\n        `https://radiant-oasis-77477.herokuapp.com/api/users/${user._id}`,\r\n        updatedUser\r\n      );\r\n      setError(false);\r\n      setErrorMsg(\"\");\r\n      if (currentUser.username === username.current.value) {\r\n        // if the username did not change, navigate to the timeline\r\n        navigate(\"/\", { replace: true });\r\n      } else {\r\n        // if the username did change, navigate to the login page\r\n        alert(`You're new username is ${username.current.value}`);\r\n        localStorage.clear();\r\n        logoutCall(dispatch);\r\n        navigate(\"/login\", { replace: true });\r\n      }\r\n    } catch (err) {\r\n      console.log(err.response.data.msg);\r\n      setError(true);\r\n      setErrorMsg(err.response.data.msg);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"update-user-page\">\r\n      <div className=\"update-form\">\r\n        <form onSubmit={handleClick}>\r\n          {/* first name */}\r\n          <div className=\"update-item-div\">\r\n            <label htmlFor=\"firstname\" className=\"update-label\">\r\n              First name:\r\n            </label>\r\n            <input\r\n              className=\"update-form-input\"\r\n              type=\"text\"\r\n              placeholder=\"First name\"\r\n              ref={firstname}\r\n              defaultValue={user.firstname ? user.firstname : null}\r\n              // {...register(\"firstname\", { required: true })}\r\n            ></input>\r\n          </div>\r\n          {/* last name */}\r\n          <div className=\"update-item-div\">\r\n            <label htmlFor=\"lastname\" className=\"update-label\">\r\n              Last name:\r\n            </label>\r\n            <input\r\n              className=\"update-form-input\"\r\n              type=\"text\"\r\n              placeholder=\"Last name\"\r\n              ref={lastname}\r\n              defaultValue={user.lastname ? user.lastname : null}\r\n              // {...register(\"lastname\", { required: true })}\r\n            ></input>\r\n          </div>\r\n          {/* username */}\r\n          <div className=\"update-item-div\">\r\n            <label htmlFor=\"username\" className=\"update-label\">\r\n              Username:\r\n            </label>\r\n            <input\r\n              className=\"update-form-input\"\r\n              type=\"text\"\r\n              placeholder=\"Username\"\r\n              ref={username}\r\n              defaultValue={user.username ? user.username : null}\r\n              // {...register(\"username\", { required: true })}\r\n            ></input>\r\n          </div>\r\n          {/* email */}\r\n          <div className=\"update-item-div\">\r\n            <label htmlFor=\"email\" className=\"update-label\">\r\n              Email:\r\n            </label>\r\n            <input\r\n              className=\"update-form-input\"\r\n              type=\"email\"\r\n              placeholder=\"Email address\"\r\n              ref={email}\r\n              defaultValue={user.email ? user.email : null}\r\n              // {...register(\"email\", { required: true })}\r\n            ></input>\r\n          </div>\r\n          {/* Bio */}\r\n          <div className=\"update-item-div\">\r\n            <label htmlFor=\"bio\" className=\"update-label\">\r\n              Bio:\r\n            </label>\r\n            <textarea\r\n              className=\"update-form-textarea\"\r\n              placeholder=\"About\"\r\n              type=\"text\"\r\n              ref={about}\r\n              defaultValue={user.about ? user.about : null}\r\n              // {...register(\"password\", { required: true })}\r\n            ></textarea>\r\n          </div>\r\n          {/* Location */}\r\n          <div className=\"update-item-div\">\r\n            <label htmlFor=\"location\" className=\"update-label\">\r\n              Location:\r\n            </label>\r\n            <input\r\n              className=\"update-form-input\"\r\n              placeholder=\"Location\"\r\n              type=\"text\"\r\n              ref={location}\r\n              defaultValue={user.location ? user.location : null}\r\n              // {...register(\"password\", { required: true })}\r\n            ></input>\r\n          </div>\r\n          {/* Website */}\r\n          <div className=\"update-item-div\">\r\n            <label htmlFor=\"website\" className=\"update-label\">\r\n              Website:\r\n            </label>\r\n            <input\r\n              className=\"update-form-input\"\r\n              placeholder=\"Website\"\r\n              type=\"text\"\r\n              ref={website}\r\n              defaultValue={user.website ? user.website : null}\r\n              // {...register(\"confirm-password\", { required: true })}\r\n            ></input>\r\n          </div>\r\n          {/* birthday */}\r\n          <div className=\"update-item-div\">\r\n            <label htmlFor=\"birthday\" className=\"update-label\">\r\n              Birthday:\r\n            </label>\r\n            <input\r\n              className=\"update-form-input\"\r\n              placeholder=\"Website\"\r\n              type=\"date\"\r\n              ref={birthday}\r\n              defaultValue={user.birthday ? user.birthday : null}\r\n              // {...register(\"confirm-password\", { required: true })}\r\n            ></input>\r\n          </div>\r\n          <div className=\"message-before-update-button\">\r\n            <span>\r\n              <span className=\"info-icon\"></span> If you are changing your\r\n              username you will be logged out after updating\r\n            </span>\r\n          </div>\r\n\r\n          {error && (\r\n            <div className=\"error-msg\">\r\n              <span>{errorMsg}</span>\r\n            </div>\r\n          )}\r\n          <button type=\"submit\">Update</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport UpdateUser from \"../../components/updateUser/UpdateUser\";\r\nimport Nav from \"../../components/nav/Nav\";\r\n\r\nexport default function Update({\r\n  user,\r\n  currentPage,\r\n  setCurrentPage,\r\n  updateType,\r\n}) {\r\n  setCurrentPage(\"Update\");\r\n  return (\r\n    <div className=\"container\" id=\"container\">\r\n      <Nav user={user} currentPage={currentPage} />\r\n      {updateType === \"user\" && <UpdateUser user={user} />}\r\n    </div>\r\n  );\r\n}\r\n","import { useContext, useEffect, useState } from \"react\";\r\nimport { Add, Remove } from \"@material-ui/icons\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./ExploreUser.scss\";\r\nimport { AuthContext } from \"../../../context/AuthContext\";\r\nimport Loader from \"../../loader/Loader\";\r\n\r\nexport default function Follower({\r\n  friend,\r\n  handleFollowingStatus,\r\n  sidebarOpen,\r\n}) {\r\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n  const { user: currentUser } = useContext(AuthContext);\r\n  const [followStatus, setFollowStatus] = useState(\"\");\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const checkFollowStatus = async () => {\r\n      setTimeout(async function () {\r\n        if (friend._id === (await currentUser._id)) {\r\n          setFollowStatus(\"you\");\r\n        } else if (\r\n          friend.followingStatus === true &&\r\n          friend.followerStatus === true\r\n        ) {\r\n          setFollowStatus(\"mutual following\");\r\n        } else if (\r\n          friend.followingStatus === false &&\r\n          friend.followerStatus === true\r\n        ) {\r\n          setFollowStatus(\"follows you\");\r\n        } else if (\r\n          friend.followingStatus === true &&\r\n          friend.followerStatus === false\r\n        ) {\r\n          setFollowStatus(\"doesn't follow you\");\r\n        }\r\n        setLoading(false);\r\n      }, 1000);\r\n    };\r\n    checkFollowStatus();\r\n  });\r\n\r\n  return (\r\n    <div className=\"follow-container\" key={friend._id}>\r\n      {loading ? (\r\n        <Loader type={\"follower\"} />\r\n      ) : (\r\n        <>\r\n          <Link\r\n            to={\"/profile/\" + friend.username}\r\n            style={{ textDecoration: \"none\" }}\r\n          >\r\n            <div className=\"follow-container-left\">\r\n              <img\r\n                src={\r\n                  friend.profilePicture\r\n                    ? PF + friend.profilePicture\r\n                    : PF + \"assets/noAvatar.png\"\r\n                }\r\n                alt=\"\"\r\n                className=\"follow-img\"\r\n              />\r\n              <div className=\"follow-user-info\">\r\n                <span className=\"follow-username\">{friend.username}</span>\r\n                <span className=\"follow-name\">\r\n                  {friend.firstname} {friend.lastname}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </Link>\r\n          {/* follow unfollow button */}\r\n          {followStatus !== \"you\" && (\r\n            <div className=\"follow-container-right\">\r\n              <span className=\"follow-status-span\">{followStatus}</span>\r\n              <button\r\n                disabled={sidebarOpen}\r\n                className=\"follow-button\"\r\n                onClick={() =>\r\n                  handleFollowingStatus(friend.followingStatus, friend)\r\n                }\r\n              >\r\n                {friend.followingStatus ? \"Unfollow\" : \"Follow\"}\r\n                {friend.followingStatus ? <Remove /> : <Add />}\r\n              </button>\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect, useState, useContext } from \"react\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\nimport axios from \"axios\";\r\nimport ExploreUser from \"./exploreUser/ExploreUser\";\r\nimport Loader from \"../../components/loader/Loader\";\r\nimport \"./ExploreFeed.scss\";\r\n\r\nexport default function ExploreFeed({\r\n  setCurrentPage,\r\n  currentPage,\r\n  sidebarOpen,\r\n  setSidebarOpen,\r\n}) {\r\n  setCurrentPage(\"Explore\");\r\n  const [loading, setLoading] = useState(true);\r\n  const [friends, setFriends] = useState([]);\r\n  const [skip, setSkip] = useState(0);\r\n  const { user: currentUser, dispatch } = useContext(AuthContext);\r\n\r\n  const handleFollowingStatus = async (followed, userInQuestion) => {\r\n    const updateFollow = async () => {\r\n      try {\r\n        if (followed) {\r\n          await axios.put(\r\n            `https://radiant-oasis-77477.herokuapp.com/api/users/${userInQuestion._id}/unfollow`,\r\n            {\r\n              userId: currentUser._id,\r\n            }\r\n          );\r\n          dispatch({ type: \"UNFOLLOW\", payload: userInQuestion._id });\r\n          // delete follow notification\r\n          try {\r\n            axios.delete(\r\n              \"https://radiant-oasis-77477.herokuapp.com/api/notifications/\",\r\n              // \"http://localhost:3000/api/notifications/\",\r\n              {\r\n                data: {\r\n                  sender: currentUser._id,\r\n                  recipient: userInQuestion._id,\r\n                  postId: null,\r\n                  commentId: null,\r\n                  type: \"follow\",\r\n                },\r\n              }\r\n            );\r\n          } catch (err) {}\r\n        } else {\r\n          await axios.put(\r\n            `https://radiant-oasis-77477.herokuapp.com/api/users/${userInQuestion._id}/follow`,\r\n            {\r\n              userId: currentUser._id,\r\n            }\r\n          );\r\n          dispatch({ type: \"FOLLOW\", payload: userInQuestion._id });\r\n          // send follow notification\r\n          try {\r\n            axios.post(\r\n              \"https://radiant-oasis-77477.herokuapp.com/api/notifications/\",\r\n              // \"http://localhost:3000/api/notifications/\",\r\n              {\r\n                sender: currentUser._id,\r\n                recipient: userInQuestion._id,\r\n                postId: null,\r\n                commentId: null,\r\n                type: \"follow\",\r\n                seen: false,\r\n              }\r\n            );\r\n          } catch (err) {}\r\n        }\r\n      } catch (err) {}\r\n    };\r\n\r\n    updateFollow();\r\n  };\r\n\r\n  // update page on infinite scroll\r\n  useEffect(() => {\r\n    const getFollows = async () => {\r\n      try {\r\n        const exploreList = await axios.get(\r\n          `https://radiant-oasis-77477.herokuapp.com/api/users/explore/${currentUser._id}/${skip}`\r\n          // `http://localhost:3000/api/users/explore/${currentUser._id}/${skip}`\r\n        );\r\n        setFriends([...friends, ...exploreList.data]);\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n      setLoading(false);\r\n    };\r\n    getFollows();\r\n  }, [skip]);\r\n\r\n  // update page on new follow\r\n  useEffect(() => {\r\n    const getFollows = async () => {\r\n      try {\r\n        const exploreList = await axios.get(\r\n          `https://radiant-oasis-77477.herokuapp.com/api/users/explore/${currentUser._id}/0`\r\n          // `http://localhost:3000/api/users/explore/${currentUser._id}/0`\r\n        );\r\n        setFriends(exploreList.data);\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n      setLoading(false);\r\n    };\r\n    getFollows();\r\n  }, [currentUser]);\r\n\r\n  // infinite scroll functionality\r\n  const handleScroll = (e) => {\r\n    const { offsetHeight, scrollTop, scrollHeight } = e.target;\r\n\r\n    if (offsetHeight + scrollTop > scrollHeight * 0.95) {\r\n      setSkip(friends.length);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"followfeed\"\r\n      onScroll={handleScroll}\r\n      onClick={() => setSidebarOpen(false)}\r\n    >\r\n      {loading ? (\r\n        <Loader type={\"full-screen\"} />\r\n      ) : (\r\n        <div className=\"followfeed-wrapper\">\r\n          {friends.length > 0 ? (\r\n            <>\r\n              {friends.map((friend) => (\r\n                <ExploreUser\r\n                  friend={friend}\r\n                  handleFollowingStatus={handleFollowingStatus}\r\n                  key={friend._id}\r\n                  sidebarOpen={sidebarOpen}\r\n                />\r\n              ))}\r\n            </>\r\n          ) : (\r\n            <span className=\"no-explore-message\">No one new to see</span>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport \"../follows/Follows.scss\";\r\nimport ExploreFeed from \"../../components/exploreFeed/ExploreFeed\";\r\nimport Nav from \"../../components/nav/Nav\";\r\n\r\nexport default function Followers({\r\n  currentPage,\r\n  setCurrentPage,\r\n  sidebarOpen,\r\n  setSidebarOpen,\r\n}) {\r\n  return (\r\n    <div className=\"container\" id=\"container\">\r\n      <Nav\r\n        currentPage={currentPage}\r\n        sidebarOpen={sidebarOpen}\r\n        setSidebarOpen={setSidebarOpen}\r\n      />\r\n      <ExploreFeed\r\n        currentPage={currentPage}\r\n        setCurrentPage={setCurrentPage}\r\n        sidebarOpen={sidebarOpen}\r\n        setSidebarOpen={setSidebarOpen}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { format } from \"timeago.js\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { AuthContext } from \"../../../context/AuthContext\";\r\nimport Loader from \"../../../components/loader/Loader\";\r\nimport {\r\n  FavoriteBorder,\r\n  MessageOutlined,\r\n  Check,\r\n  DeleteForeverOutlined,\r\n  AddAlertOutlined,\r\n  PersonAddOutlined,\r\n} from \"@material-ui/icons\";\r\nimport \"./Notification.scss\";\r\n\r\nexport default function Notification({\r\n  notification,\r\n  status,\r\n  getNotifications,\r\n}) {\r\n  const { user: currentUser } = useContext(AuthContext);\r\n  const [user, setUser] = useState({});\r\n  const [content, setContent] = useState({});\r\n  const [loading, setLoading] = useState(true);\r\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n\r\n  // get user\r\n  useEffect(() => {\r\n    const fetchUser = async () => {\r\n      const res = await axios.get(\r\n        `https://radiant-oasis-77477.herokuapp.com/api/users?userId=${notification.sender}`\r\n      );\r\n      setUser(res.data);\r\n    };\r\n    fetchUser();\r\n\r\n    const fetchPost = async () => {\r\n      setTimeout(async function () {\r\n        let contentId;\r\n        let apiRoute;\r\n        let res;\r\n        if (notification.type === \"postLike\") {\r\n          contentId = notification.postId;\r\n          apiRoute = \"posts/\";\r\n        } else if (notification.type === \"commentLike\") {\r\n          contentId = notification.commentId;\r\n          apiRoute = \"comments/\";\r\n        } else if (notification.type === \"comment\") {\r\n          contentId = notification.commentId;\r\n          apiRoute = \"comments/\";\r\n        } else if (notification.type === \"follow\") {\r\n          contentId = notification.sender;\r\n          apiRoute = \"users?userId=\";\r\n        }\r\n        res = await axios.get(\r\n          `https://radiant-oasis-77477.herokuapp.com/api/${apiRoute}${contentId}`\r\n        );\r\n        setContent(res.data);\r\n        setLoading(false);\r\n      }, 1000);\r\n    };\r\n    fetchPost();\r\n  }, [currentUser]);\r\n\r\n  const handleMarkAsRead = async () => {\r\n    const getReadStatus = async () => {\r\n      try {\r\n        axios.put(\r\n          `https://radiant-oasis-77477.herokuapp.com/api/notifications/${notification._id}`\r\n          // `http://localhost:3000/api/notifications/${notification._id}`\r\n        );\r\n      } catch (err) {}\r\n    };\r\n    await getReadStatus();\r\n    getNotifications();\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    const deleteNotification = async () => {\r\n      try {\r\n        axios.delete(\r\n          `https://radiant-oasis-77477.herokuapp.com/api/notifications/${notification._id}`\r\n          // `http://localhost:3000/api/notifications/${notification._id}`\r\n        );\r\n      } catch (err) {}\r\n    };\r\n    await deleteNotification();\r\n    getNotifications();\r\n  };\r\n\r\n  const CommentLikeMsg = () => {\r\n    return (\r\n      <>\r\n        <span className=\"notification-message\">\r\n          liked your comment {format(notification.createdAt)}\r\n        </span>\r\n\r\n        <FavoriteBorder className=\"notification-icon like-icon\" />\r\n      </>\r\n    );\r\n  };\r\n\r\n  const PostLikeMsg = () => {\r\n    return (\r\n      <>\r\n        <span className=\"notification-message\">\r\n          {\" \"}\r\n          liked your post {format(notification.createdAt)}\r\n        </span>\r\n\r\n        <FavoriteBorder className=\"notification-icon like-icon\" />\r\n      </>\r\n    );\r\n  };\r\n\r\n  const CommentMsg = () => {\r\n    return (\r\n      <>\r\n        <span className=\"notification-message\">\r\n          {\" \"}\r\n          commented on your post {format(notification.createdAt)}\r\n        </span>\r\n\r\n        <MessageOutlined className=\"notification-icon message-icon\" />\r\n      </>\r\n    );\r\n  };\r\n\r\n  const FollowMsg = () => {\r\n    return (\r\n      <>\r\n        <span className=\"notification-message\">\r\n          {\" \"}\r\n          followed you {format(notification.createdAt)}\r\n        </span>\r\n\r\n        <PersonAddOutlined className=\"notification-icon follow-icon\" />\r\n      </>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"notification-container\">\r\n      {loading ? (\r\n        <Loader type={\"notification\"} />\r\n      ) : (\r\n        <>\r\n          <Link\r\n            to={\r\n              notification.type === \"follow\"\r\n                ? `/profile/${user.username}`\r\n                : `/post/${notification.postId}`\r\n            }\r\n            className=\"notification-link\"\r\n          >\r\n            <div className=\"notification-wrapper\">\r\n              <div className=\"notification-top\">\r\n                <Link to={`/profile/${user.username}`}>\r\n                  <img\r\n                    className=\"notification-avatar\"\r\n                    src={\r\n                      user.profilePicture\r\n                        ? PF + user.profilePicture\r\n                        : PF + \"assets/noAvatar.png\"\r\n                    }\r\n                    alt=\"\"\r\n                  />\r\n                </Link>\r\n                <div className=\"notification-desc\">\r\n                  <Link\r\n                    className=\"notification-username-link\"\r\n                    to={`/profile/${user.username}`}\r\n                  >\r\n                    <span className=\"notification-username\">\r\n                      {user.username !== currentUser.username\r\n                        ? user.username\r\n                        : \"You\"}\r\n                    </span>\r\n                  </Link>\r\n                  {notification.type === \"commentLike\" && <CommentLikeMsg />}\r\n                  {notification.type === \"postLike\" && <PostLikeMsg />}\r\n                  {notification.type === \"comment\" && <CommentMsg />}\r\n                  {notification.type === \"follow\" && <FollowMsg />}\r\n                </div>\r\n              </div>\r\n              {notification.type !== \"follow\" && (\r\n                <span className=\"content-body\">{content.body}</span>\r\n              )}\r\n              {notification.type === \"follow\" && (\r\n                <span className=\"content-follow\">View their profile</span>\r\n              )}\r\n            </div>\r\n          </Link>\r\n          <div className=\"notification-buttons-container\">\r\n            <button\r\n              className=\"notification-read-button\"\r\n              onClick={handleMarkAsRead}\r\n            >\r\n              {status === \"new\" ? (\r\n                <Check className=\"button-icon\" />\r\n              ) : (\r\n                <AddAlertOutlined className=\"button-icon\" />\r\n              )}\r\n            </button>\r\n            <button\r\n              className=\"notification-delete-button\"\r\n              onClick={handleDelete}\r\n            >\r\n              <DeleteForeverOutlined className=\"button-icon\" />\r\n            </button>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport axios from \"axios\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\nimport \"./NotificationsFeed.scss\";\r\nimport Loader from \"../../components/loader/Loader\";\r\nimport Notification from \"./notification/Notification\";\r\n\r\nexport default function NotificationsFeed({\r\n  fetchNotifications,\r\n  setCurrentPage,\r\n  sidebarOpen,\r\n  setSidebarOpen,\r\n}) {\r\n  const [loading, setLoading] = useState(true);\r\n  const [waitingOnLoad, setWaitingOnLoad] = useState(true);\r\n  const [seenNotifications, setSeenNotifications] = useState([]);\r\n  const [newNotifications, setNewNotifications] = useState([]);\r\n  const { user } = useContext(AuthContext);\r\n\r\n  setCurrentPage(\"Notifications\");\r\n\r\n  const getNotifications = async () => {\r\n    setTimeout(async function () {\r\n      const res = await axios.get(\r\n        `https://radiant-oasis-77477.herokuapp.com/api/notifications/${user._id}`\r\n        // `http://localhost:3000/api/notifications/${user._id}`\r\n      );\r\n      let seenFilter = res.data.filter((noti) => {\r\n        return noti.seen === true;\r\n      });\r\n      setSeenNotifications(\r\n        seenFilter.sort((p1, p2) => {\r\n          return new Date(p2.createdAt) - new Date(p1.createdAt);\r\n        })\r\n      );\r\n      let newFilter = res.data.filter((noti) => {\r\n        return noti.seen === false;\r\n      });\r\n      setNewNotifications(\r\n        newFilter.sort((p1, p2) => {\r\n          return new Date(p2.createdAt) - new Date(p1.createdAt);\r\n        })\r\n      );\r\n      fetchNotifications();\r\n      setWaitingOnLoad(false);\r\n    }, 1000);\r\n    setLoading(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    getNotifications();\r\n  }, [user._id]);\r\n\r\n  const handleSeenStatus = async (status) => {\r\n    const getReadStatus = async () => {\r\n      let updateNotis;\r\n      if (status === \"seen\") {\r\n        updateNotis = seenNotifications;\r\n      } else {\r\n        updateNotis = newNotifications;\r\n      }\r\n      const updateNotifications = async () => {\r\n        await Promise.all(\r\n          updateNotis.map(async (notificationToUpdate) => {\r\n            await axios.put(\r\n              `https://radiant-oasis-77477.herokuapp.com/api/notifications/${notificationToUpdate._id}`\r\n              // `http://localhost:3000/api/notifications/${notificationToUpdate._id}`\r\n            );\r\n          })\r\n        );\r\n      };\r\n\r\n      const refreshNotifications = async () => {\r\n        getNotifications();\r\n      };\r\n\r\n      updateNotifications().then(() => refreshNotifications());\r\n    };\r\n    getReadStatus();\r\n    getNotifications();\r\n  };\r\n\r\n  const handleDeleteBatch = async (status) => {\r\n    const deleteBatch = async () => {\r\n      let deleteNotis;\r\n      if (status === \"seen\") {\r\n        deleteNotis = seenNotifications;\r\n      } else {\r\n        deleteNotis = newNotifications;\r\n      }\r\n\r\n      const deleteNotifcations = async () => {\r\n        await Promise.all(\r\n          deleteNotis.map(async (notificationToDelete) => {\r\n            await axios.delete(\r\n              `https://radiant-oasis-77477.herokuapp.com/api/notifications/${notificationToDelete._id}`\r\n              // `http://localhost:3000/api/notifications/${notificationToDelete._id}`\r\n            );\r\n          })\r\n        );\r\n      };\r\n\r\n      const refreshNotifications = async () => {\r\n        getNotifications();\r\n      };\r\n\r\n      deleteNotifcations().then(() => refreshNotifications());\r\n    };\r\n    deleteBatch();\r\n  };\r\n\r\n  const NewNotificationsFeed = () => {\r\n    return (\r\n      <div\r\n        className=\"notifications-container\"\r\n        onClick={() => setSidebarOpen(false)}\r\n      >\r\n        <div\r\n          className=\"notification-type-header\"\r\n          style={sidebarOpen ? { pointerEvents: \"none\" } : {}}\r\n        >\r\n          <div className=\"notification-type-header-wrapper\">\r\n            <span className=\"notification-type-header-title\">\r\n              New {\"(\"}\r\n              {newNotifications.length}\r\n              {\")\"}\r\n            </span>\r\n            {newNotifications.length > 0 && (\r\n              <div className=\"notification-type-button-container\">\r\n                <button\r\n                  className=\"notification-read-button desktop-button\"\r\n                  onClick={() => handleSeenStatus(\"new\")}\r\n                >\r\n                  Mark all as seen\r\n                </button>\r\n                <button\r\n                  className=\"notification-delete-button desktop-button\"\r\n                  onClick={() => handleDeleteBatch(\"new\")}\r\n                >\r\n                  Delete all new\r\n                </button>\r\n                <button\r\n                  className=\"notification-read-button mobile-button\"\r\n                  onClick={() => handleSeenStatus(\"new\")}\r\n                >\r\n                  All seen\r\n                </button>\r\n                <button\r\n                  className=\"notification-delete-button mobile-button\"\r\n                  onClick={() => handleDeleteBatch(\"new\")}\r\n                >\r\n                  Delete all\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n        <div\r\n          className=\"notifications-holder\"\r\n          style={sidebarOpen ? { pointerEvents: \"none\" } : {}}\r\n        >\r\n          {newNotifications.length > 0 ? (\r\n            newNotifications.map((notification) => (\r\n              <Notification\r\n                notification={notification}\r\n                key={notification._id}\r\n                status=\"new\"\r\n                getNotifications={getNotifications}\r\n              />\r\n            ))\r\n          ) : (\r\n            <div className=\"full-width-wrapper\">\r\n              <span className=\"no-notifications-message\">\r\n                No new notifications\r\n              </span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const SeenNotificationsFeed = () => {\r\n    return (\r\n      <div className=\"notifications-container\">\r\n        <div className=\"notification-type-header\">\r\n          <div className=\"notification-type-header-wrapper\">\r\n            <span className=\"notification-type-header-title \">\r\n              Seen {\"(\"}\r\n              {seenNotifications.length}\r\n              {\")\"}\r\n            </span>\r\n            {seenNotifications.length > 0 && (\r\n              <div className=\"notification-type-button-container\">\r\n                <button\r\n                  className=\"notification-read-button desktop-button\"\r\n                  onClick={() => handleSeenStatus(\"seen\")}\r\n                >\r\n                  All new\r\n                </button>\r\n                <button\r\n                  className=\"notification-delete-button desktop-button\"\r\n                  onClick={() => handleDeleteBatch(\"seen\")}\r\n                >\r\n                  Delete all\r\n                </button>\r\n                <button\r\n                  className=\"notification-read-button mobile-button\"\r\n                  onClick={() => handleSeenStatus(\"seen\")}\r\n                >\r\n                  All new\r\n                </button>\r\n                <button\r\n                  className=\"notification-delete-button mobile-button\"\r\n                  onClick={() => handleDeleteBatch(\"seen\")}\r\n                >\r\n                  Delete all\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n        <div className=\"notifications-holder\">\r\n          {seenNotifications.length > 0 ? (\r\n            seenNotifications.map((notification) => (\r\n              <Notification\r\n                notification={notification}\r\n                key={notification._id}\r\n                status=\"seen\"\r\n                getNotifications={getNotifications}\r\n              />\r\n            ))\r\n          ) : (\r\n            <div className=\"full-width-wrapper\">\r\n              <span className=\"no-notifications-message\">\r\n                No seen notifications\r\n              </span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"notifications-feed-page\">\r\n      <>\r\n        {loading ? (\r\n          <Loader type={\"full-screen\"} />\r\n        ) : (\r\n          <>\r\n            {seenNotifications.length + newNotifications.length > 0 ? (\r\n              <>\r\n                <NewNotificationsFeed />\r\n                <SeenNotificationsFeed />\r\n              </>\r\n            ) : waitingOnLoad ? (\r\n              <Loader type={\"full-screen\"} />\r\n            ) : (\r\n              <span className=\"no-notifications-message\">No notifications</span>\r\n            )}\r\n          </>\r\n        )}\r\n      </>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport NotificationsFeed from \"../../components/notificationsFeed/NotificationsFeed\";\r\nimport Nav from \"../../components/nav/Nav\";\r\n\r\nexport default function Notifications({\r\n  currentPage,\r\n  setCurrentPage,\r\n  fetchNotifications,\r\n  notificationsCount,\r\n  sidebarOpen,\r\n  setSidebarOpen,\r\n}) {\r\n  return (\r\n    <div className=\"container\" id=\"container\">\r\n      <Nav\r\n        currentPage={currentPage}\r\n        notificationsCount={notificationsCount}\r\n        sidebarOpen={sidebarOpen}\r\n        setSidebarOpen={setSidebarOpen}\r\n      />\r\n      <NotificationsFeed\r\n        fetchNotifications={fetchNotifications}\r\n        setCurrentPage={setCurrentPage}\r\n        sidebarOpen={sidebarOpen}\r\n        setSidebarOpen={setSidebarOpen}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport \"./Sidebar.scss\";\r\n\r\nexport default function Logo() {\r\n  return (\r\n    <svg\r\n      className=\"navbar-svg\"\r\n      version=\"1.0\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      width=\"4000.000000pt\"\r\n      height=\"4000.000000pt\"\r\n      viewBox=\"0 0 4000.000000 4000.000000\"\r\n      preserveAspectRatio=\"xMidYMid meet\"\r\n    >\r\n      <g\r\n        transform=\"translate(0.000000,4000.000000) scale(0.100000,-0.100000)\"\r\n        fill=\"#000000\"\r\n        stroke=\"none\"\r\n        className=\"navbar-svg-g\"\r\n      >\r\n        <path\r\n          d=\"M1353 22773 c2 -15060 3 -15886 20 -16028 72 -620 208 -1161 422\r\n-1680 77 -190 265 -569 365 -740 530 -900 1265 -1635 2165 -2165 171 -100 550\r\n-288 740 -366 584 -240 1210 -385 1865 -434 187 -14 25953 -14 26140 0 655 49\r\n1281 194 1865 434 190 78 569 266 740 366 900 530 1635 1265 2165 2165 100\r\n171 288 550 365 740 214 519 350 1060 422 1680 17 142 18 837 21 13150 2 9481\r\n0 13045 -8 13165 -44 644 -192 1286 -434 1875 -78 190 -266 569 -366 740 -530\r\n900 -1265 1635 -2165 2165 -171 100 -550 288 -740 366 -584 240 -1210 385\r\n-1865 434 -89 7 -5493 10 -15928 10 l-15792 0 3 -15877z m24827 9233 c1160\r\n-88 2045 -305 2845 -695 253 -124 381 -196 585 -329 649 -424 1168 -975 1560\r\n-1657 90 -157 268 -524 339 -701 578 -1443 701 -3358 365 -5724 -56 -400 -77\r\n-521 -754 -4360 -357 -2027 -931 -5282 -1275 -7235 -344 -1952 -628 -3562\r\n-631 -3578 l-6 -27 -3359 0 -3359 0 5 22 c3 13 311 1760 685 3883 375 2123\r\n906 5136 1181 6695 514 2912 563 3200 623 3620 169 1182 179 2074 30 2738 -62\r\n276 -130 474 -239 697 -323 657 -884 1063 -1695 1225 -318 64 -584 84 -990 77\r\n-404 -7 -649 -37 -995 -122 -1044 -256 -1873 -874 -2548 -1900 -270 -412 -545\r\n-963 -752 -1510 -311 -818 -555 -1743 -789 -2985 -36 -190 -540 -3040 -1121\r\n-6335 -580 -3294 -1061 -6016 -1067 -6047 l-11 -58 -3358 0 -3359 0 5 23 c3\r\n12 723 4092 1600 9067 877 4975 1810 10265 2073 11755 l478 2710 3357 3 c1846\r\n1 3357 -1 3357 -5 0 -12 -371 -2118 -375 -2130 -3 -9 10 -13 48 -13 l52 1 73\r\n87 c301 356 727 763 1118 1068 940 733 2065 1257 3274 1528 504 112 1019 186\r\n1510 216 96 6 198 12 225 14 137 10 1105 -4 1295 -18z\"\r\n        />\r\n      </g>\r\n    </svg>\r\n  );\r\n}\r\n","import React, { useContext } from \"react\";\r\nimport \"./Sidebar.scss\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport {\r\n  HomeRounded,\r\n  HomeOutlined,\r\n  Person,\r\n  PersonOutlineRounded,\r\n  ExitToApp,\r\n  Notifications,\r\n  NotificationsOutlined,\r\n  Group,\r\n  GroupOutlined,\r\n  Language,\r\n  Public,\r\n} from \"@material-ui/icons\";\r\nimport { logoutCall } from \"../../apiCalls\";\r\nimport Logo from \"./Logo\";\r\n\r\nexport default function Sidebar({\r\n  currentPage,\r\n  notificationsCount,\r\n  sidebarOpen,\r\n  setSidebarOpen,\r\n}) {\r\n  const { user, dispatch } = useContext(AuthContext);\r\n  let navigate = useNavigate();\r\n\r\n  const logout = () => {\r\n    localStorage.clear();\r\n    logoutCall(dispatch);\r\n    setSidebarOpen(false);\r\n    navigate(\"/login\", { replace: true });\r\n  };\r\n\r\n  const handleOptionClick = () => {\r\n    setSidebarOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div className={\"sidebar \" + (sidebarOpen && \"active\")}>\r\n      <div className=\"sidebar-wrapper\">\r\n        <Logo />\r\n        {/* TIMELINE */}\r\n        <Link to=\"/\">\r\n          <div\r\n            onClick={() => handleOptionClick()}\r\n            className={\r\n              \"sidebar-link \" +\r\n              (currentPage === \"Timeline\" ? \"active-nav-link\" : \"\")\r\n            }\r\n          >\r\n            {currentPage === \"Timeline\" ? (\r\n              <HomeRounded className=\"sidebar-icon\" />\r\n            ) : (\r\n              <HomeOutlined className=\"sidebar-icon\" />\r\n            )}{\" \"}\r\n            Timeline\r\n          </div>\r\n        </Link>\r\n        {/* PROFILE */}\r\n        <Link to={\"/profile/\" + user.username}>\r\n          <div\r\n            onClick={() => handleOptionClick()}\r\n            className={\r\n              \"sidebar-link \" +\r\n              (currentPage === \"Profile\" ? \"active-nav-link\" : \"\")\r\n            }\r\n          >\r\n            {currentPage === \"Profile\" ? (\r\n              <Person className=\"sidebar-icon\" />\r\n            ) : (\r\n              <PersonOutlineRounded className=\"sidebar-icon\" />\r\n            )}{\" \"}\r\n            Profile\r\n          </div>\r\n        </Link>\r\n        {/* NOTIFICATIONS */}\r\n        <Link to={\"/notifications/\" + user.username}>\r\n          <div\r\n            onClick={() => handleOptionClick()}\r\n            className={\r\n              \"sidebar-link \" +\r\n              (currentPage === \"Notifications\" ? \"active-nav-link\" : \"\")\r\n            }\r\n          >\r\n            {currentPage === \"Notifications\" ? (\r\n              <Notifications className=\"sidebar-icon\" />\r\n            ) : (\r\n              <NotificationsOutlined className=\"sidebar-icon\" />\r\n            )}{\" \"}\r\n            Notifications\r\n            {notificationsCount > 0 && (\r\n              <div className=\"notification-badge\">{notificationsCount}</div>\r\n            )}\r\n          </div>\r\n        </Link>\r\n        {/* FOLLOWERS */}\r\n        <Link to={`/${user.username}/followers`}>\r\n          <div\r\n            onClick={() => handleOptionClick()}\r\n            className={\r\n              \"sidebar-link \" +\r\n              (currentPage === \"Followers\" ? \"active-nav-link\" : \"\")\r\n            }\r\n          >\r\n            {currentPage === \"Followers\" ? (\r\n              <Group className=\"sidebar-icon\" />\r\n            ) : (\r\n              <GroupOutlined className=\"sidebar-icon\" />\r\n            )}{\" \"}\r\n            Followers\r\n          </div>\r\n        </Link>\r\n        {/* FOLLOWING */}\r\n        <Link to={`/${user.username}/following`}>\r\n          <div\r\n            onClick={() => handleOptionClick()}\r\n            className={\r\n              \"sidebar-link \" +\r\n              (currentPage === \"Following\" ? \"active-nav-link\" : \"\")\r\n            }\r\n          >\r\n            {currentPage === \"Following\" ? (\r\n              <Group className=\"sidebar-icon\" />\r\n            ) : (\r\n              <GroupOutlined className=\"sidebar-icon\" />\r\n            )}{\" \"}\r\n            Following\r\n          </div>\r\n        </Link>\r\n        {/* EXPLORE */}\r\n        <Link to={`/explore/${user._id}`}>\r\n          <div\r\n            onClick={() => handleOptionClick()}\r\n            className={\r\n              \"sidebar-link \" +\r\n              (currentPage === \"Explore\" ? \"active-nav-link\" : \"\")\r\n            }\r\n          >\r\n            {currentPage === \"Explore\" ? (\r\n              <Public className=\"sidebar-icon\" />\r\n            ) : (\r\n              <Language className=\"sidebar-icon\" />\r\n            )}{\" \"}\r\n            Explore\r\n          </div>\r\n        </Link>\r\n        {/* LOGOUT */}\r\n        <div className=\"sidebar-logout\">\r\n          <button className=\"logout-button\" onClick={logout}>\r\n            <ExitToApp className=\"sidebar-icon\" /> Logout\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// imports\nimport { useEffect, useState, useContext } from \"react\";\nimport { BrowserRouter as Router, Route, Routes } from \"react-router-dom\";\nimport { AuthContext } from \"./context/AuthContext\";\nimport \"./App.css\";\nimport \"./global.scss\";\nimport axios from \"axios\";\n// pages\nimport Home from \"./pages/home/Home\";\nimport Profile from \"./pages/profile/Profile\";\nimport Follows from \"./pages/follows/Follows\";\nimport Post from \"./pages/post/Post\";\nimport Login from \"./pages/login/Login\";\nimport Signup from \"./pages/login/Signup\";\nimport Update from \"./pages/update/Update\";\nimport Explore from \"./pages/explore/Explore\";\nimport Notifications from \"./pages/notifications/Notifications\";\nimport Sidebar from \"./components/sidebar/Sidebar\";\n\nfunction App() {\n  const [userAuth, setUserAuth] = useState(false);\n  const [currentPage, setCurrentPage] = useState(\"Timeline\");\n  const { user } = useContext(AuthContext);\n  const [userData, setUserData] = useState({});\n  const [notificationsCount, setNotificationsCount] = useState(0);\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n\n  const fetchNotifications = async () => {\n    // set a buffer for new notifications to get set before fetching\n    setTimeout(async function () {\n      const res = await axios.get(\n        `https://radiant-oasis-77477.herokuapp.com/api/users?userId=${user._id}`\n        // `http://localhost:3000/api/users?userId=${user._id}`\n      );\n      setUserData(res.data);\n      let count = 0;\n      for (let notification of res.data.notifications) {\n        if (notification.seen === false) {\n          count++;\n        }\n      }\n      setNotificationsCount(count);\n      // remove unused error\n      if (userData) {\n        return null;\n      }\n    }, 300);\n  };\n\n  useEffect(() => {\n    const userCheck = localStorage.getItem(\"userAuth\");\n    if (userCheck) {\n      setUserAuth(true);\n    } else {\n      setUserAuth(false);\n    }\n    if (user) {\n      fetchNotifications();\n    }\n  }, [user]);\n\n  return (\n    <Router basename=\"/\">\n      <div className=\"app\">\n        {user ? (\n          <div className=\"home-container\">\n            <Sidebar\n              currentPage={currentPage}\n              setCurrentPage={setCurrentPage}\n              notificationsCount={notificationsCount}\n              sidebarOpen={sidebarOpen}\n              setSidebarOpen={setSidebarOpen}\n            />\n            <div className=\"left-container\">\n              <Routes>\n                {/* HOME ROUTE, if no user go to LOGIN */}\n                <Route\n                  exact\n                  path=\"/\"\n                  element={\n                    <Home\n                      currentPage={currentPage}\n                      setCurrentPage={setCurrentPage}\n                      fetchNotifications={fetchNotifications}\n                      sidebarOpen={sidebarOpen}\n                      setSidebarOpen={setSidebarOpen}\n                    />\n                  }\n                ></Route>\n                {/* PROFILE ROUTE, if no user go to LOGIN */}\n                <Route\n                  path=\"/profile/:username\"\n                  element={\n                    <Profile\n                      currentPage={currentPage}\n                      setCurrentPage={setCurrentPage}\n                      fetchNotifications={fetchNotifications}\n                      sidebarOpen={sidebarOpen}\n                      setSidebarOpen={setSidebarOpen}\n                    />\n                  }\n                ></Route>\n                {/* NOTIFICATIONS ROUTE, if no user go to LOGIN */}\n                <Route\n                  path=\"/notifications/:username\"\n                  element={\n                    <Notifications\n                      currentPage={currentPage}\n                      setCurrentPage={setCurrentPage}\n                      fetchNotifications={fetchNotifications}\n                      notificationsCount={notificationsCount}\n                      sidebarOpen={sidebarOpen}\n                      setSidebarOpen={setSidebarOpen}\n                    />\n                  }\n                ></Route>\n                {/* FOLLOWERS ROUTE, if no user go to LOGIN */}\n                <Route\n                  exact\n                  path=\"/:id/followers\"\n                  element={\n                    <Follows\n                      currentPage={currentPage}\n                      setCurrentPage={setCurrentPage}\n                      follow={\"Followers\"}\n                      sidebarOpen={sidebarOpen}\n                      setSidebarOpen={setSidebarOpen}\n                    />\n                  }\n                ></Route>\n                {/* FOLLOWING ROUTE, if no user go to LOGIN */}\n                <Route\n                  exact\n                  path=\"/:id/following\"\n                  element={\n                    <Follows\n                      currentPage={currentPage}\n                      setCurrentPage={setCurrentPage}\n                      follow={\"Following\"}\n                      sidebarOpen={sidebarOpen}\n                      setSidebarOpen={setSidebarOpen}\n                    />\n                  }\n                ></Route>\n                {/* EXPLORE ROUTE, if no user go to LOGIN */}\n                <Route\n                  exact\n                  path=\"/explore/:userId\"\n                  element={\n                    <Explore\n                      currentPage={currentPage}\n                      setCurrentPage={setCurrentPage}\n                      sidebarOpen={sidebarOpen}\n                      setSidebarOpen={setSidebarOpen}\n                    />\n                  }\n                ></Route>\n                {/* POST ROUTE, if no user go to LOGIN */}\n                <Route\n                  exact\n                  path=\"/post/:postId\"\n                  element={\n                    <Post\n                      user={user}\n                      currentPage={currentPage}\n                      setCurrentPage={setCurrentPage}\n                      fetchNotifications={fetchNotifications}\n                      sidebarOpen={sidebarOpen}\n                      setSidebarOpen={setSidebarOpen}\n                    />\n                  }\n                ></Route>\n                {/* UPDATE USER ROUTE, if no user go to LOGIN */}\n                <Route\n                  exact\n                  path=\"/:id/update\"\n                  element={\n                    <Update\n                      user={user}\n                      currentPage={currentPage}\n                      setCurrentPage={setCurrentPage}\n                      updateType={\"user\"}\n                      sidebarOpen={sidebarOpen}\n                      setSidebarOpen={setSidebarOpen}\n                    />\n                  }\n                ></Route>\n                {/* LOGIN ROUTE, if there's a user redirect to home */}\n                <Route\n                  exact\n                  path=\"/login\"\n                  element={\n                    <Home\n                      currentPage={currentPage}\n                      setCurrentPage={setCurrentPage}\n                    />\n                  }\n                ></Route>\n                {/* SIGNUP ROUTE*/}\n                <Route\n                  exact\n                  path=\"/signup\"\n                  element={\n                    <Signup userAuth={userAuth} setUserAuth={setUserAuth} />\n                  }\n                ></Route>\n              </Routes>\n            </div>\n          </div>\n        ) : (\n          <Routes>\n            {/* LOGIN ROUTE, if there's a user redirect to home */}\n            <Route exact path=\"/login\" element={<Login />}></Route>\n            {/* SIGNUP ROUTE*/}\n            <Route\n              exact\n              path=\"/signup\"\n              element={<Signup userAuth={userAuth} setUserAuth={setUserAuth} />}\n            ></Route>\n          </Routes>\n        )}\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { AuthContextProvider } from \"./context/AuthContext\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <AuthContextProvider>\n      <App />\n    </AuthContextProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}